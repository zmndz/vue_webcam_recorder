(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Wl(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const He={},ai=[],sr=()=>{},Qy=()=>!1,Zy=/^on[^a-z]/,ho=t=>Zy.test(t),zl=t=>t.startsWith("onUpdate:"),st=Object.assign,ql=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},e_=Object.prototype.hasOwnProperty,Oe=(t,e)=>e_.call(t,e),Ee=Array.isArray,oi=t=>po(t)==="[object Map]",$p=t=>po(t)==="[object Set]",Ce=t=>typeof t=="function",at=t=>typeof t=="string",Gl=t=>typeof t=="symbol",Ye=t=>t!==null&&typeof t=="object",jp=t=>Ye(t)&&Ce(t.then)&&Ce(t.catch),Hp=Object.prototype.toString,po=t=>Hp.call(t),t_=t=>po(t).slice(8,-1),Vp=t=>po(t)==="[object Object]",Xl=t=>at(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ia=Wl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mo=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},r_=/-(\w)/g,yr=mo(t=>t.replace(r_,(e,n)=>n?n.toUpperCase():"")),n_=/\B([A-Z])/g,Ri=mo(t=>t.replace(n_,"-$1").toLowerCase()),go=mo(t=>t.charAt(0).toUpperCase()+t.slice(1)),uu=mo(t=>t?`on${go(t)}`:""),xs=(t,e)=>!Object.is(t,e),lu=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Ma=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},i_=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let ed;const Ku=()=>ed||(ed=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vo(t){if(Ee(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=at(r)?u_(r):vo(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if(at(t))return t;if(Ye(t))return t}}const s_=/;(?![^(]*\))/g,a_=/:([^]+)/,o_=/\/\*[^]*?\*\//g;function u_(t){const e={};return t.replace(o_,"").split(s_).forEach(n=>{if(n){const r=n.split(a_);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Es(t){let e="";if(at(t))e=t;else if(Ee(t))for(let n=0;n<t.length;n++){const r=Es(t[n]);r&&(e+=r+" ")}else if(Ye(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const l_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",c_=Wl(l_);function Wp(t){return!!t||t===""}const f_=t=>at(t)?t:t==null?"":Ee(t)||Ye(t)&&(t.toString===Hp||!Ce(t.toString))?JSON.stringify(t,zp,2):String(t),zp=(t,e)=>e&&e.__v_isRef?zp(t,e.value):oi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:$p(e)?{[`Set(${e.size})`]:[...e.values()]}:Ye(e)&&!Ee(e)&&!Vp(e)?String(e):e;let er;class d_{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=er,!e&&er&&(this.index=(er.scopes||(er.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=er;try{return er=this,e()}finally{er=n}}}on(){er=this}off(){er=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function h_(t,e=er){e&&e.active&&e.effects.push(t)}function p_(){return er}const Kl=t=>{const e=new Set(t);return e.w=0,e.n=0,e},qp=t=>(t.w&tn)>0,Gp=t=>(t.n&tn)>0,m_=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=tn},g_=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];qp(i)&&!Gp(i)?i.delete(t):e[n++]=i,i.w&=~tn,i.n&=~tn}e.length=n}},Yu=new WeakMap;let os=0,tn=1;const Ju=30;let rr;const An=Symbol(""),Qu=Symbol("");class Yl{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,h_(this,r)}run(){if(!this.active)return this.fn();let e=rr,n=Gr;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=rr,rr=this,Gr=!0,tn=1<<++os,os<=Ju?m_(this):td(this),this.fn()}finally{os<=Ju&&g_(this),tn=1<<--os,rr=this.parent,Gr=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){rr===this?this.deferStop=!0:this.active&&(td(this),this.onStop&&this.onStop(),this.active=!1)}}function td(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Gr=!0;const Xp=[];function Di(){Xp.push(Gr),Gr=!1}function Li(){const t=Xp.pop();Gr=t===void 0?!0:t}function Dt(t,e,n){if(Gr&&rr){let r=Yu.get(t);r||Yu.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=Kl()),Kp(i)}}function Kp(t,e){let n=!1;os<=Ju?Gp(t)||(t.n|=tn,n=!qp(t)):n=!t.has(rr),n&&(t.add(rr),rr.deps.push(t))}function kr(t,e,n,r,i,s){const a=Yu.get(t);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(n==="length"&&Ee(t)){const u=Number(r);a.forEach((l,c)=>{(c==="length"||c>=u)&&o.push(l)})}else switch(n!==void 0&&o.push(a.get(n)),e){case"add":Ee(t)?Xl(n)&&o.push(a.get("length")):(o.push(a.get(An)),oi(t)&&o.push(a.get(Qu)));break;case"delete":Ee(t)||(o.push(a.get(An)),oi(t)&&o.push(a.get(Qu)));break;case"set":oi(t)&&o.push(a.get(An));break}if(o.length===1)o[0]&&Zu(o[0]);else{const u=[];for(const l of o)l&&u.push(...l);Zu(Kl(u))}}function Zu(t,e){const n=Ee(t)?t:[...t];for(const r of n)r.computed&&rd(r);for(const r of n)r.computed||rd(r)}function rd(t,e){(t!==rr||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const v_=Wl("__proto__,__v_isRef,__isVue"),Yp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Gl)),y_=Jl(),__=Jl(!1,!0),b_=Jl(!0),nd=T_();function T_(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=De(this);for(let s=0,a=this.length;s<a;s++)Dt(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(De)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Di();const r=De(this)[e].apply(this,n);return Li(),r}}),t}function S_(t){const e=De(this);return Dt(e,"has",t),e.hasOwnProperty(t)}function Jl(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?F_:tm:e?em:Zp).get(r))return r;const a=Ee(r);if(!t){if(a&&Oe(nd,i))return Reflect.get(nd,i,s);if(i==="hasOwnProperty")return S_}const o=Reflect.get(r,i,s);return(Gl(i)?Yp.has(i):v_(i))||(t||Dt(r,"get",i),e)?o:ht(o)?a&&Xl(i)?o:o.value:Ye(o)?t?nm(o):mi(o):o}}const x_=Jp(),E_=Jp(!0);function Jp(t=!1){return function(n,r,i,s){let a=n[r];if(gi(a)&&ht(a)&&!ht(i))return!1;if(!t&&(!Ua(i)&&!gi(i)&&(a=De(a),i=De(i)),!Ee(n)&&ht(a)&&!ht(i)))return a.value=i,!0;const o=Ee(n)&&Xl(r)?Number(r)<n.length:Oe(n,r),u=Reflect.set(n,r,i,s);return n===De(s)&&(o?xs(i,a)&&kr(n,"set",r,i):kr(n,"add",r,i)),u}}function w_(t,e){const n=Oe(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&kr(t,"delete",e,void 0),r}function C_(t,e){const n=Reflect.has(t,e);return(!Gl(e)||!Yp.has(e))&&Dt(t,"has",e),n}function A_(t){return Dt(t,"iterate",Ee(t)?"length":An),Reflect.ownKeys(t)}const Qp={get:y_,set:x_,deleteProperty:w_,has:C_,ownKeys:A_},I_={get:b_,set(t,e){return!0},deleteProperty(t,e){return!0}},k_=st({},Qp,{get:__,set:E_}),Ql=t=>t,yo=t=>Reflect.getPrototypeOf(t);function da(t,e,n=!1,r=!1){t=t.__v_raw;const i=De(t),s=De(e);n||(e!==s&&Dt(i,"get",e),Dt(i,"get",s));const{has:a}=yo(i),o=r?Ql:n?tc:ws;if(a.call(i,e))return o(t.get(e));if(a.call(i,s))return o(t.get(s));t!==i&&t.get(e)}function ha(t,e=!1){const n=this.__v_raw,r=De(n),i=De(t);return e||(t!==i&&Dt(r,"has",t),Dt(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function pa(t,e=!1){return t=t.__v_raw,!e&&Dt(De(t),"iterate",An),Reflect.get(t,"size",t)}function id(t){t=De(t);const e=De(this);return yo(e).has.call(e,t)||(e.add(t),kr(e,"add",t,t)),this}function sd(t,e){e=De(e);const n=De(this),{has:r,get:i}=yo(n);let s=r.call(n,t);s||(t=De(t),s=r.call(n,t));const a=i.call(n,t);return n.set(t,e),s?xs(e,a)&&kr(n,"set",t,e):kr(n,"add",t,e),this}function ad(t){const e=De(this),{has:n,get:r}=yo(e);let i=n.call(e,t);i||(t=De(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&kr(e,"delete",t,void 0),s}function od(){const t=De(this),e=t.size!==0,n=t.clear();return e&&kr(t,"clear",void 0,void 0),n}function ma(t,e){return function(r,i){const s=this,a=s.__v_raw,o=De(a),u=e?Ql:t?tc:ws;return!t&&Dt(o,"iterate",An),a.forEach((l,c)=>r.call(i,u(l),u(c),s))}}function ga(t,e,n){return function(...r){const i=this.__v_raw,s=De(i),a=oi(s),o=t==="entries"||t===Symbol.iterator&&a,u=t==="keys"&&a,l=i[t](...r),c=n?Ql:e?tc:ws;return!e&&Dt(s,"iterate",u?Qu:An),{next(){const{value:f,done:d}=l.next();return d?{value:f,done:d}:{value:o?[c(f[0]),c(f[1])]:c(f),done:d}},[Symbol.iterator](){return this}}}}function Br(t){return function(...e){return t==="delete"?!1:this}}function P_(){const t={get(s){return da(this,s)},get size(){return pa(this)},has:ha,add:id,set:sd,delete:ad,clear:od,forEach:ma(!1,!1)},e={get(s){return da(this,s,!1,!0)},get size(){return pa(this)},has:ha,add:id,set:sd,delete:ad,clear:od,forEach:ma(!1,!0)},n={get(s){return da(this,s,!0)},get size(){return pa(this,!0)},has(s){return ha.call(this,s,!0)},add:Br("add"),set:Br("set"),delete:Br("delete"),clear:Br("clear"),forEach:ma(!0,!1)},r={get(s){return da(this,s,!0,!0)},get size(){return pa(this,!0)},has(s){return ha.call(this,s,!0)},add:Br("add"),set:Br("set"),delete:Br("delete"),clear:Br("clear"),forEach:ma(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=ga(s,!1,!1),n[s]=ga(s,!0,!1),e[s]=ga(s,!1,!0),r[s]=ga(s,!0,!0)}),[t,n,e,r]}const[O_,R_,D_,L_]=P_();function Zl(t,e){const n=e?t?L_:D_:t?R_:O_;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Oe(n,i)&&i in r?n:r,i,s)}const N_={get:Zl(!1,!1)},M_={get:Zl(!1,!0)},U_={get:Zl(!0,!1)},Zp=new WeakMap,em=new WeakMap,tm=new WeakMap,F_=new WeakMap;function B_(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $_(t){return t.__v_skip||!Object.isExtensible(t)?0:B_(t_(t))}function mi(t){return gi(t)?t:ec(t,!1,Qp,N_,Zp)}function rm(t){return ec(t,!1,k_,M_,em)}function nm(t){return ec(t,!0,I_,U_,tm)}function ec(t,e,n,r,i){if(!Ye(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const a=$_(t);if(a===0)return t;const o=new Proxy(t,a===2?r:n);return i.set(t,o),o}function ui(t){return gi(t)?ui(t.__v_raw):!!(t&&t.__v_isReactive)}function gi(t){return!!(t&&t.__v_isReadonly)}function Ua(t){return!!(t&&t.__v_isShallow)}function im(t){return ui(t)||gi(t)}function De(t){const e=t&&t.__v_raw;return e?De(e):t}function sm(t){return Ma(t,"__v_skip",!0),t}const ws=t=>Ye(t)?mi(t):t,tc=t=>Ye(t)?nm(t):t;function am(t){Gr&&rr&&(t=De(t),Kp(t.dep||(t.dep=Kl())))}function om(t,e){t=De(t);const n=t.dep;n&&Zu(n)}function ht(t){return!!(t&&t.__v_isRef===!0)}function It(t){return um(t,!1)}function j_(t){return um(t,!0)}function um(t,e){return ht(t)?t:new H_(t,e)}class H_{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:De(e),this._value=n?e:ws(e)}get value(){return am(this),this._value}set value(e){const n=this.__v_isShallow||Ua(e)||gi(e);e=n?e:De(e),xs(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:ws(e),om(this))}}function ft(t){return ht(t)?t.value:t}const V_={get:(t,e,n)=>ft(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return ht(i)&&!ht(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function lm(t){return ui(t)?t:new Proxy(t,V_)}class W_{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Yl(e,()=>{this._dirty||(this._dirty=!0,om(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=De(this);return am(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function z_(t,e,n=!1){let r,i;const s=Ce(t);return s?(r=t,i=sr):(r=t.get,i=t.set),new W_(r,i,s||!i,n)}function Xr(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){_o(s,e,n)}return i}function ar(t,e,n,r){if(Ce(t)){const s=Xr(t,e,n,r);return s&&jp(s)&&s.catch(a=>{_o(a,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(ar(t[s],e,n,r));return i}function _o(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,o=n;for(;s;){const l=s.ec;if(l){for(let c=0;c<l.length;c++)if(l[c](t,a,o)===!1)return}s=s.parent}const u=e.appContext.config.errorHandler;if(u){Xr(u,null,10,[t,a,o]);return}}q_(t,n,i,r)}function q_(t,e,n,r=!0){console.error(t)}let Cs=!1,el=!1;const dt=[];let hr=0;const li=[];let xr=null,_n=0;const cm=Promise.resolve();let rc=null;function fm(t){const e=rc||cm;return t?e.then(this?t.bind(this):t):e}function G_(t){let e=hr+1,n=dt.length;for(;e<n;){const r=e+n>>>1;As(dt[r])<t?e=r+1:n=r}return e}function nc(t){(!dt.length||!dt.includes(t,Cs&&t.allowRecurse?hr+1:hr))&&(t.id==null?dt.push(t):dt.splice(G_(t.id),0,t),dm())}function dm(){!Cs&&!el&&(el=!0,rc=cm.then(pm))}function X_(t){const e=dt.indexOf(t);e>hr&&dt.splice(e,1)}function K_(t){Ee(t)?li.push(...t):(!xr||!xr.includes(t,t.allowRecurse?_n+1:_n))&&li.push(t),dm()}function ud(t,e=Cs?hr+1:0){for(;e<dt.length;e++){const n=dt[e];n&&n.pre&&(dt.splice(e,1),e--,n())}}function hm(t){if(li.length){const e=[...new Set(li)];if(li.length=0,xr){xr.push(...e);return}for(xr=e,xr.sort((n,r)=>As(n)-As(r)),_n=0;_n<xr.length;_n++)xr[_n]();xr=null,_n=0}}const As=t=>t.id==null?1/0:t.id,Y_=(t,e)=>{const n=As(t)-As(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function pm(t){el=!1,Cs=!0,dt.sort(Y_);const e=sr;try{for(hr=0;hr<dt.length;hr++){const n=dt[hr];n&&n.active!==!1&&Xr(n,null,14)}}finally{hr=0,dt.length=0,hm(),Cs=!1,rc=null,(dt.length||li.length)&&pm()}}function J_(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||He;let i=n;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in r){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:d}=r[c]||He;d&&(i=n.map(h=>at(h)?h.trim():h)),f&&(i=n.map(i_))}let o,u=r[o=uu(e)]||r[o=uu(yr(e))];!u&&s&&(u=r[o=uu(Ri(e))]),u&&ar(u,t,6,i);const l=r[o+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,ar(l,t,6,i)}}function mm(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let a={},o=!1;if(!Ce(t)){const u=l=>{const c=mm(l,e,!0);c&&(o=!0,st(a,c))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!s&&!o?(Ye(t)&&r.set(t,null),null):(Ee(s)?s.forEach(u=>a[u]=null):st(a,s),Ye(t)&&r.set(t,a),a)}function bo(t,e){return!t||!ho(e)?!1:(e=e.slice(2).replace(/Once$/,""),Oe(t,e[0].toLowerCase()+e.slice(1))||Oe(t,Ri(e))||Oe(t,e))}let pt=null,gm=null;function Fa(t){const e=pt;return pt=t,gm=t&&t.type.__scopeId||null,e}function vm(t,e=pt,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&_d(-1);const s=Fa(e);let a;try{a=t(...i)}finally{Fa(s),r._d&&_d(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function cu(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[a],slots:o,attrs:u,emit:l,render:c,renderCache:f,data:d,setupState:h,ctx:g,inheritAttrs:E}=t;let S,x;const D=Fa(t);try{if(n.shapeFlag&4){const U=i||r;S=dr(c.call(U,U,f,s,h,d,g)),x=u}else{const U=e;S=dr(U.length>1?U(s,{attrs:u,slots:o,emit:l}):U(s,null)),x=e.props?u:Q_(u)}}catch(U){ms.length=0,_o(U,t,1),S=wt(rn)}let $=S;if(x&&E!==!1){const U=Object.keys(x),{shapeFlag:_e}=$;U.length&&_e&7&&(a&&U.some(zl)&&(x=Z_(x,a)),$=vi($,x))}return n.dirs&&($=vi($),$.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&($.transition=n.transition),S=$,Fa(D),S}const Q_=t=>{let e;for(const n in t)(n==="class"||n==="style"||ho(n))&&((e||(e={}))[n]=t[n]);return e},Z_=(t,e)=>{const n={};for(const r in t)(!zl(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function eb(t,e,n){const{props:r,children:i,component:s}=t,{props:a,children:o,patchFlag:u}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?ld(r,a,l):!!a;if(u&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const d=c[f];if(a[d]!==r[d]&&!bo(l,d))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?ld(r,a,l):!0:!!a;return!1}function ld(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!bo(n,s))return!0}return!1}function tb({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const rb=t=>t.__isSuspense;function nb(t,e){e&&e.pendingBranch?Ee(t)?e.effects.push(...t):e.effects.push(t):K_(t)}const va={};function ka(t,e,n){return ym(t,e,n)}function ym(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:a}=He){var o;const u=p_()===((o=ut)==null?void 0:o.scope)?ut:null;let l,c=!1,f=!1;if(ht(t)?(l=()=>t.value,c=Ua(t)):ui(t)?(l=()=>t,r=!0):Ee(t)?(f=!0,c=t.some(U=>ui(U)||Ua(U)),l=()=>t.map(U=>{if(ht(U))return U.value;if(ui(U))return Sn(U);if(Ce(U))return Xr(U,u,2)})):Ce(t)?e?l=()=>Xr(t,u,2):l=()=>{if(!(u&&u.isUnmounted))return d&&d(),ar(t,u,3,[h])}:l=sr,e&&r){const U=l;l=()=>Sn(U())}let d,h=U=>{d=D.onStop=()=>{Xr(U,u,4)}},g;if(ks)if(h=sr,e?n&&ar(e,u,3,[l(),f?[]:void 0,h]):l(),i==="sync"){const U=Zb();g=U.__watcherHandles||(U.__watcherHandles=[])}else return sr;let E=f?new Array(t.length).fill(va):va;const S=()=>{if(D.active)if(e){const U=D.run();(r||c||(f?U.some((_e,re)=>xs(_e,E[re])):xs(U,E)))&&(d&&d(),ar(e,u,3,[U,E===va?void 0:f&&E[0]===va?[]:E,h]),E=U)}else D.run()};S.allowRecurse=!!e;let x;i==="sync"?x=S:i==="post"?x=()=>kt(S,u&&u.suspense):(S.pre=!0,u&&(S.id=u.uid),x=()=>nc(S));const D=new Yl(l,x);e?n?S():E=D.run():i==="post"?kt(D.run.bind(D),u&&u.suspense):D.run();const $=()=>{D.stop(),u&&u.scope&&ql(u.scope.effects,D)};return g&&g.push($),$}function ib(t,e,n){const r=this.proxy,i=at(t)?t.includes(".")?_m(r,t):()=>r[t]:t.bind(r,r);let s;Ce(e)?s=e:(s=e.handler,n=e);const a=ut;yi(this);const o=ym(i,s.bind(r),n);return a?yi(a):In(),o}function _m(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Sn(t,e){if(!Ye(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ht(t))Sn(t.value,e);else if(Ee(t))for(let n=0;n<t.length;n++)Sn(t[n],e);else if($p(t)||oi(t))t.forEach(n=>{Sn(n,e)});else if(Vp(t))for(const n in t)Sn(t[n],e);return t}function sb(t,e){const n=pt;if(n===null)return t;const r=wo(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[a,o,u,l=He]=e[s];a&&(Ce(a)&&(a={mounted:a,updated:a}),a.deep&&Sn(o),i.push({dir:a,instance:r,value:o,oldValue:void 0,arg:u,modifiers:l}))}return t}function pn(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let u=o.dir[r];u&&(Di(),ar(u,n,8,[t.el,o,t,e]),Li())}}function Hs(t,e){return Ce(t)?(()=>st({name:t.name},e,{setup:t}))():t}const hs=t=>!!t.type.__asyncLoader,bm=t=>t.type.__isKeepAlive;function ab(t,e){Tm(t,"a",e)}function ob(t,e){Tm(t,"da",e)}function Tm(t,e,n=ut){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(To(e,r,n),n){let i=n.parent;for(;i&&i.parent;)bm(i.parent.vnode)&&ub(r,e,n,i),i=i.parent}}function ub(t,e,n,r){const i=To(e,t,r,!0);ic(()=>{ql(r[e],i)},n)}function To(t,e,n=ut,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...a)=>{if(n.isUnmounted)return;Di(),yi(n);const o=ar(e,n,t,a);return In(),Li(),o});return r?i.unshift(s):i.push(s),s}}const Lr=t=>(e,n=ut)=>(!ks||t==="sp")&&To(t,(...r)=>e(...r),n),lb=Lr("bm"),cb=Lr("m"),fb=Lr("bu"),db=Lr("u"),hb=Lr("bum"),ic=Lr("um"),pb=Lr("sp"),mb=Lr("rtg"),gb=Lr("rtc");function vb(t,e=ut){To("ec",t,e)}const Sm="components";function yb(t,e){return bb(Sm,t,!0,e)||t}const _b=Symbol.for("v-ndc");function bb(t,e,n=!0,r=!1){const i=pt||ut;if(i){const s=i.type;if(t===Sm){const o=Yb(s,!1);if(o&&(o===e||o===yr(e)||o===go(yr(e))))return s}const a=cd(i[t]||s[t],e)||cd(i.appContext[t],e);return!a&&r?s:a}}function cd(t,e){return t&&(t[e]||t[yr(e)]||t[go(yr(e))])}function Tb(t,e,n={},r,i){if(pt.isCE||pt.parent&&hs(pt.parent)&&pt.parent.isCE)return e!=="default"&&(n.name=e),wt("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),Ut();const a=s&&xm(s(n)),o=xo(Jt,{key:n.key||a&&a.key||`_${e}`},a||(r?r():[]),a&&t._===1?64:-2);return!i&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function xm(t){return t.some(e=>ja(e)?!(e.type===rn||e.type===Jt&&!xm(e.children)):!0)?t:null}const tl=t=>t?Lm(t)?wo(t)||t.proxy:tl(t.parent):null,ps=st(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>tl(t.parent),$root:t=>tl(t.root),$emit:t=>t.emit,$options:t=>sc(t),$forceUpdate:t=>t.f||(t.f=()=>nc(t.update)),$nextTick:t=>t.n||(t.n=fm.bind(t.proxy)),$watch:t=>ib.bind(t)}),fu=(t,e)=>t!==He&&!t.__isScriptSetup&&Oe(t,e),Sb={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:o,appContext:u}=t;let l;if(e[0]!=="$"){const h=a[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(fu(r,e))return a[e]=1,r[e];if(i!==He&&Oe(i,e))return a[e]=2,i[e];if((l=t.propsOptions[0])&&Oe(l,e))return a[e]=3,s[e];if(n!==He&&Oe(n,e))return a[e]=4,n[e];rl&&(a[e]=0)}}const c=ps[e];let f,d;if(c)return e==="$attrs"&&Dt(t,"get",e),c(t);if((f=o.__cssModules)&&(f=f[e]))return f;if(n!==He&&Oe(n,e))return a[e]=4,n[e];if(d=u.config.globalProperties,Oe(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return fu(i,e)?(i[e]=n,!0):r!==He&&Oe(r,e)?(r[e]=n,!0):Oe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},a){let o;return!!n[a]||t!==He&&Oe(t,a)||fu(e,a)||(o=s[0])&&Oe(o,a)||Oe(r,a)||Oe(ps,a)||Oe(i.config.globalProperties,a)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Oe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function fd(t){return Ee(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let rl=!0;function xb(t){const e=sc(t),n=t.proxy,r=t.ctx;rl=!1,e.beforeCreate&&dd(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:a,watch:o,provide:u,inject:l,created:c,beforeMount:f,mounted:d,beforeUpdate:h,updated:g,activated:E,deactivated:S,beforeDestroy:x,beforeUnmount:D,destroyed:$,unmounted:U,render:_e,renderTracked:re,renderTriggered:Z,errorCaptured:H,serverPrefetch:z,expose:ie,inheritAttrs:me,components:de,directives:V,filters:J}=e;if(l&&Eb(l,r,null),a)for(const pe in a){const be=a[pe];Ce(be)&&(r[pe]=be.bind(n))}if(i){const pe=i.call(n,n);Ye(pe)&&(t.data=mi(pe))}if(rl=!0,s)for(const pe in s){const be=s[pe],ze=Ce(be)?be.bind(n,n):Ce(be.get)?be.get.bind(n,n):sr,Be=!Ce(be)&&Ce(be.set)?be.set.bind(n):sr,$e=nr({get:ze,set:Be});Object.defineProperty(r,pe,{enumerable:!0,configurable:!0,get:()=>$e.value,set:we=>$e.value=we})}if(o)for(const pe in o)Em(o[pe],r,n,pe);if(u){const pe=Ce(u)?u.call(n):u;Reflect.ownKeys(pe).forEach(be=>{Pa(be,pe[be])})}c&&dd(c,t,"c");function he(pe,be){Ee(be)?be.forEach(ze=>pe(ze.bind(n))):be&&pe(be.bind(n))}if(he(lb,f),he(cb,d),he(fb,h),he(db,g),he(ab,E),he(ob,S),he(vb,H),he(gb,re),he(mb,Z),he(hb,D),he(ic,U),he(pb,z),Ee(ie))if(ie.length){const pe=t.exposed||(t.exposed={});ie.forEach(be=>{Object.defineProperty(pe,be,{get:()=>n[be],set:ze=>n[be]=ze})})}else t.exposed||(t.exposed={});_e&&t.render===sr&&(t.render=_e),me!=null&&(t.inheritAttrs=me),de&&(t.components=de),V&&(t.directives=V)}function Eb(t,e,n=sr){Ee(t)&&(t=nl(t));for(const r in t){const i=t[r];let s;Ye(i)?"default"in i?s=wr(i.from||r,i.default,!0):s=wr(i.from||r):s=wr(i),ht(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function dd(t,e,n){ar(Ee(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Em(t,e,n,r){const i=r.includes(".")?_m(n,r):()=>n[r];if(at(t)){const s=e[t];Ce(s)&&ka(i,s)}else if(Ce(t))ka(i,t.bind(n));else if(Ye(t))if(Ee(t))t.forEach(s=>Em(s,e,n,r));else{const s=Ce(t.handler)?t.handler.bind(n):e[t.handler];Ce(s)&&ka(i,s,t)}}function sc(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,o=s.get(e);let u;return o?u=o:!i.length&&!n&&!r?u=e:(u={},i.length&&i.forEach(l=>Ba(u,l,a,!0)),Ba(u,e,a)),Ye(e)&&s.set(e,u),u}function Ba(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Ba(t,s,n,!0),i&&i.forEach(a=>Ba(t,a,n,!0));for(const a in e)if(!(r&&a==="expose")){const o=wb[a]||n&&n[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const wb={data:hd,props:pd,emits:pd,methods:us,computed:us,beforeCreate:_t,created:_t,beforeMount:_t,mounted:_t,beforeUpdate:_t,updated:_t,beforeDestroy:_t,beforeUnmount:_t,destroyed:_t,unmounted:_t,activated:_t,deactivated:_t,errorCaptured:_t,serverPrefetch:_t,components:us,directives:us,watch:Ab,provide:hd,inject:Cb};function hd(t,e){return e?t?function(){return st(Ce(t)?t.call(this,this):t,Ce(e)?e.call(this,this):e)}:e:t}function Cb(t,e){return us(nl(t),nl(e))}function nl(t){if(Ee(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function _t(t,e){return t?[...new Set([].concat(t,e))]:e}function us(t,e){return t?st(Object.create(null),t,e):e}function pd(t,e){return t?Ee(t)&&Ee(e)?[...new Set([...t,...e])]:st(Object.create(null),fd(t),fd(e??{})):e}function Ab(t,e){if(!t)return e;if(!e)return t;const n=st(Object.create(null),t);for(const r in e)n[r]=_t(t[r],e[r]);return n}function wm(){return{app:null,config:{isNativeTag:Qy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ib=0;function kb(t,e){return function(r,i=null){Ce(r)||(r=st({},r)),i!=null&&!Ye(i)&&(i=null);const s=wm(),a=new Set;let o=!1;const u=s.app={_uid:Ib++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:eT,get config(){return s.config},set config(l){},use(l,...c){return a.has(l)||(l&&Ce(l.install)?(a.add(l),l.install(u,...c)):Ce(l)&&(a.add(l),l(u,...c))),u},mixin(l){return s.mixins.includes(l)||s.mixins.push(l),u},component(l,c){return c?(s.components[l]=c,u):s.components[l]},directive(l,c){return c?(s.directives[l]=c,u):s.directives[l]},mount(l,c,f){if(!o){const d=wt(r,i);return d.appContext=s,c&&e?e(d,l):t(d,l,f),o=!0,u._container=l,l.__vue_app__=u,wo(d.component)||d.component.proxy}},unmount(){o&&(t(null,u._container),delete u._container.__vue_app__)},provide(l,c){return s.provides[l]=c,u},runWithContext(l){$a=u;try{return l()}finally{$a=null}}};return u}}let $a=null;function Pa(t,e){if(ut){let n=ut.provides;const r=ut.parent&&ut.parent.provides;r===n&&(n=ut.provides=Object.create(r)),n[t]=e}}function wr(t,e,n=!1){const r=ut||pt;if(r||$a){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:$a._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ce(e)?e.call(r&&r.proxy):e}}function Pb(t,e,n,r=!1){const i={},s={};Ma(s,Eo,1),t.propsDefaults=Object.create(null),Cm(t,e,i,s);for(const a in t.propsOptions[0])a in i||(i[a]=void 0);n?t.props=r?i:rm(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function Ob(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=t,o=De(i),[u]=t.propsOptions;let l=!1;if((r||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let f=0;f<c.length;f++){let d=c[f];if(bo(t.emitsOptions,d))continue;const h=e[d];if(u)if(Oe(s,d))h!==s[d]&&(s[d]=h,l=!0);else{const g=yr(d);i[g]=il(u,o,g,h,t,!1)}else h!==s[d]&&(s[d]=h,l=!0)}}}else{Cm(t,e,i,s)&&(l=!0);let c;for(const f in o)(!e||!Oe(e,f)&&((c=Ri(f))===f||!Oe(e,c)))&&(u?n&&(n[f]!==void 0||n[c]!==void 0)&&(i[f]=il(u,o,f,void 0,t,!0)):delete i[f]);if(s!==o)for(const f in s)(!e||!Oe(e,f))&&(delete s[f],l=!0)}l&&kr(t,"set","$attrs")}function Cm(t,e,n,r){const[i,s]=t.propsOptions;let a=!1,o;if(e)for(let u in e){if(Ia(u))continue;const l=e[u];let c;i&&Oe(i,c=yr(u))?!s||!s.includes(c)?n[c]=l:(o||(o={}))[c]=l:bo(t.emitsOptions,u)||(!(u in r)||l!==r[u])&&(r[u]=l,a=!0)}if(s){const u=De(n),l=o||He;for(let c=0;c<s.length;c++){const f=s[c];n[f]=il(i,u,f,l[f],t,!Oe(l,f))}}return a}function il(t,e,n,r,i,s){const a=t[n];if(a!=null){const o=Oe(a,"default");if(o&&r===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&Ce(u)){const{propsDefaults:l}=i;n in l?r=l[n]:(yi(i),r=l[n]=u.call(null,e),In())}else r=u}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===Ri(n))&&(r=!0))}return r}function Am(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,a={},o=[];let u=!1;if(!Ce(t)){const c=f=>{u=!0;const[d,h]=Am(f,e,!0);st(a,d),h&&o.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!u)return Ye(t)&&r.set(t,ai),ai;if(Ee(s))for(let c=0;c<s.length;c++){const f=yr(s[c]);md(f)&&(a[f]=He)}else if(s)for(const c in s){const f=yr(c);if(md(f)){const d=s[c],h=a[f]=Ee(d)||Ce(d)?{type:d}:st({},d);if(h){const g=yd(Boolean,h.type),E=yd(String,h.type);h[0]=g>-1,h[1]=E<0||g<E,(g>-1||Oe(h,"default"))&&o.push(f)}}}const l=[a,o];return Ye(t)&&r.set(t,l),l}function md(t){return t[0]!=="$"}function gd(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function vd(t,e){return gd(t)===gd(e)}function yd(t,e){return Ee(e)?e.findIndex(n=>vd(n,t)):Ce(e)&&vd(e,t)?0:-1}const Im=t=>t[0]==="_"||t==="$stable",ac=t=>Ee(t)?t.map(dr):[dr(t)],Rb=(t,e,n)=>{if(e._n)return e;const r=vm((...i)=>ac(e(...i)),n);return r._c=!1,r},km=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Im(i))continue;const s=t[i];if(Ce(s))e[i]=Rb(i,s,r);else if(s!=null){const a=ac(s);e[i]=()=>a}}},Pm=(t,e)=>{const n=ac(e);t.slots.default=()=>n},Db=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=De(e),Ma(e,"_",n)):km(e,t.slots={})}else t.slots={},e&&Pm(t,e);Ma(t.slots,Eo,1)},Lb=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,a=He;if(r.shapeFlag&32){const o=e._;o?n&&o===1?s=!1:(st(i,e),!n&&o===1&&delete i._):(s=!e.$stable,km(e,i)),a=e}else e&&(Pm(t,e),a={default:1});if(s)for(const o in i)!Im(o)&&!(o in a)&&delete i[o]};function sl(t,e,n,r,i=!1){if(Ee(t)){t.forEach((d,h)=>sl(d,e&&(Ee(e)?e[h]:e),n,r,i));return}if(hs(r)&&!i)return;const s=r.shapeFlag&4?wo(r.component)||r.component.proxy:r.el,a=i?null:s,{i:o,r:u}=t,l=e&&e.r,c=o.refs===He?o.refs={}:o.refs,f=o.setupState;if(l!=null&&l!==u&&(at(l)?(c[l]=null,Oe(f,l)&&(f[l]=null)):ht(l)&&(l.value=null)),Ce(u))Xr(u,o,12,[a,c]);else{const d=at(u),h=ht(u);if(d||h){const g=()=>{if(t.f){const E=d?Oe(f,u)?f[u]:c[u]:u.value;i?Ee(E)&&ql(E,s):Ee(E)?E.includes(s)||E.push(s):d?(c[u]=[s],Oe(f,u)&&(f[u]=c[u])):(u.value=[s],t.k&&(c[t.k]=u.value))}else d?(c[u]=a,Oe(f,u)&&(f[u]=a)):h&&(u.value=a,t.k&&(c[t.k]=a))};a?(g.id=-1,kt(g,n)):g()}}}const kt=nb;function Nb(t){return Mb(t)}function Mb(t,e){const n=Ku();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:o,createComment:u,setText:l,setElementText:c,parentNode:f,nextSibling:d,setScopeId:h=sr,insertStaticContent:g}=t,E=(b,w,P,N=null,j=null,W=null,K=!1,Y=null,ee=!!w.dynamicChildren)=>{if(b===w)return;b&&!Ki(b,w)&&(N=M(b),we(b,j,W,!0),b=null),w.patchFlag===-2&&(ee=!1,w.dynamicChildren=null);const{type:B,ref:ge,shapeFlag:oe}=w;switch(B){case So:S(b,w,P,N);break;case rn:x(b,w,P,N);break;case du:b==null&&D(w,P,N,K);break;case Jt:de(b,w,P,N,j,W,K,Y,ee);break;default:oe&1?_e(b,w,P,N,j,W,K,Y,ee):oe&6?V(b,w,P,N,j,W,K,Y,ee):(oe&64||oe&128)&&B.process(b,w,P,N,j,W,K,Y,ee,q)}ge!=null&&j&&sl(ge,b&&b.ref,W,w||b,!w)},S=(b,w,P,N)=>{if(b==null)r(w.el=o(w.children),P,N);else{const j=w.el=b.el;w.children!==b.children&&l(j,w.children)}},x=(b,w,P,N)=>{b==null?r(w.el=u(w.children||""),P,N):w.el=b.el},D=(b,w,P,N)=>{[b.el,b.anchor]=g(b.children,w,P,N,b.el,b.anchor)},$=({el:b,anchor:w},P,N)=>{let j;for(;b&&b!==w;)j=d(b),r(b,P,N),b=j;r(w,P,N)},U=({el:b,anchor:w})=>{let P;for(;b&&b!==w;)P=d(b),i(b),b=P;i(w)},_e=(b,w,P,N,j,W,K,Y,ee)=>{K=K||w.type==="svg",b==null?re(w,P,N,j,W,K,Y,ee):z(b,w,j,W,K,Y,ee)},re=(b,w,P,N,j,W,K,Y)=>{let ee,B;const{type:ge,props:oe,shapeFlag:ye,transition:xe,dirs:Ie}=b;if(ee=b.el=a(b.type,W,oe&&oe.is,oe),ye&8?c(ee,b.children):ye&16&&H(b.children,ee,null,N,j,W&&ge!=="foreignObject",K,Y),Ie&&pn(b,null,N,"created"),Z(ee,b,b.scopeId,K,N),oe){for(const Le in oe)Le!=="value"&&!Ia(Le)&&s(ee,Le,null,oe[Le],W,b.children,N,j,qe);"value"in oe&&s(ee,"value",null,oe.value),(B=oe.onVnodeBeforeMount)&&fr(B,N,b)}Ie&&pn(b,null,N,"beforeMount");const Ne=(!j||j&&!j.pendingBranch)&&xe&&!xe.persisted;Ne&&xe.beforeEnter(ee),r(ee,w,P),((B=oe&&oe.onVnodeMounted)||Ne||Ie)&&kt(()=>{B&&fr(B,N,b),Ne&&xe.enter(ee),Ie&&pn(b,null,N,"mounted")},j)},Z=(b,w,P,N,j)=>{if(P&&h(b,P),N)for(let W=0;W<N.length;W++)h(b,N[W]);if(j){let W=j.subTree;if(w===W){const K=j.vnode;Z(b,K,K.scopeId,K.slotScopeIds,j.parent)}}},H=(b,w,P,N,j,W,K,Y,ee=0)=>{for(let B=ee;B<b.length;B++){const ge=b[B]=Y?Vr(b[B]):dr(b[B]);E(null,ge,w,P,N,j,W,K,Y)}},z=(b,w,P,N,j,W,K)=>{const Y=w.el=b.el;let{patchFlag:ee,dynamicChildren:B,dirs:ge}=w;ee|=b.patchFlag&16;const oe=b.props||He,ye=w.props||He;let xe;P&&mn(P,!1),(xe=ye.onVnodeBeforeUpdate)&&fr(xe,P,w,b),ge&&pn(w,b,P,"beforeUpdate"),P&&mn(P,!0);const Ie=j&&w.type!=="foreignObject";if(B?ie(b.dynamicChildren,B,Y,P,N,Ie,W):K||be(b,w,Y,null,P,N,Ie,W,!1),ee>0){if(ee&16)me(Y,w,oe,ye,P,N,j);else if(ee&2&&oe.class!==ye.class&&s(Y,"class",null,ye.class,j),ee&4&&s(Y,"style",oe.style,ye.style,j),ee&8){const Ne=w.dynamicProps;for(let Le=0;Le<Ne.length;Le++){const Xe=Ne[Le],ct=oe[Xe],Mr=ye[Xe];(Mr!==ct||Xe==="value")&&s(Y,Xe,ct,Mr,j,b.children,P,N,qe)}}ee&1&&b.children!==w.children&&c(Y,w.children)}else!K&&B==null&&me(Y,w,oe,ye,P,N,j);((xe=ye.onVnodeUpdated)||ge)&&kt(()=>{xe&&fr(xe,P,w,b),ge&&pn(w,b,P,"updated")},N)},ie=(b,w,P,N,j,W,K)=>{for(let Y=0;Y<w.length;Y++){const ee=b[Y],B=w[Y],ge=ee.el&&(ee.type===Jt||!Ki(ee,B)||ee.shapeFlag&70)?f(ee.el):P;E(ee,B,ge,null,N,j,W,K,!0)}},me=(b,w,P,N,j,W,K)=>{if(P!==N){if(P!==He)for(const Y in P)!Ia(Y)&&!(Y in N)&&s(b,Y,P[Y],null,K,w.children,j,W,qe);for(const Y in N){if(Ia(Y))continue;const ee=N[Y],B=P[Y];ee!==B&&Y!=="value"&&s(b,Y,B,ee,K,w.children,j,W,qe)}"value"in N&&s(b,"value",P.value,N.value)}},de=(b,w,P,N,j,W,K,Y,ee)=>{const B=w.el=b?b.el:o(""),ge=w.anchor=b?b.anchor:o("");let{patchFlag:oe,dynamicChildren:ye,slotScopeIds:xe}=w;xe&&(Y=Y?Y.concat(xe):xe),b==null?(r(B,P,N),r(ge,P,N),H(w.children,P,ge,j,W,K,Y,ee)):oe>0&&oe&64&&ye&&b.dynamicChildren?(ie(b.dynamicChildren,ye,P,j,W,K,Y),(w.key!=null||j&&w===j.subTree)&&Om(b,w,!0)):be(b,w,P,ge,j,W,K,Y,ee)},V=(b,w,P,N,j,W,K,Y,ee)=>{w.slotScopeIds=Y,b==null?w.shapeFlag&512?j.ctx.activate(w,P,N,K,ee):J(w,P,N,j,W,K,ee):Te(b,w,ee)},J=(b,w,P,N,j,W,K)=>{const Y=b.component=zb(b,N,j);if(bm(b)&&(Y.ctx.renderer=q),qb(Y),Y.asyncDep){if(j&&j.registerDep(Y,he),!b.el){const ee=Y.subTree=wt(rn);x(null,ee,w,P)}return}he(Y,b,w,P,j,W,K)},Te=(b,w,P)=>{const N=w.component=b.component;if(eb(b,w,P))if(N.asyncDep&&!N.asyncResolved){pe(N,w,P);return}else N.next=w,X_(N.update),N.update();else w.el=b.el,N.vnode=w},he=(b,w,P,N,j,W,K)=>{const Y=()=>{if(b.isMounted){let{next:ge,bu:oe,u:ye,parent:xe,vnode:Ie}=b,Ne=ge,Le;mn(b,!1),ge?(ge.el=Ie.el,pe(b,ge,K)):ge=Ie,oe&&lu(oe),(Le=ge.props&&ge.props.onVnodeBeforeUpdate)&&fr(Le,xe,ge,Ie),mn(b,!0);const Xe=cu(b),ct=b.subTree;b.subTree=Xe,E(ct,Xe,f(ct.el),M(ct),b,j,W),ge.el=Xe.el,Ne===null&&tb(b,Xe.el),ye&&kt(ye,j),(Le=ge.props&&ge.props.onVnodeUpdated)&&kt(()=>fr(Le,xe,ge,Ie),j)}else{let ge;const{el:oe,props:ye}=w,{bm:xe,m:Ie,parent:Ne}=b,Le=hs(w);if(mn(b,!1),xe&&lu(xe),!Le&&(ge=ye&&ye.onVnodeBeforeMount)&&fr(ge,Ne,w),mn(b,!0),oe&&Re){const Xe=()=>{b.subTree=cu(b),Re(oe,b.subTree,b,j,null)};Le?w.type.__asyncLoader().then(()=>!b.isUnmounted&&Xe()):Xe()}else{const Xe=b.subTree=cu(b);E(null,Xe,P,N,b,j,W),w.el=Xe.el}if(Ie&&kt(Ie,j),!Le&&(ge=ye&&ye.onVnodeMounted)){const Xe=w;kt(()=>fr(ge,Ne,Xe),j)}(w.shapeFlag&256||Ne&&hs(Ne.vnode)&&Ne.vnode.shapeFlag&256)&&b.a&&kt(b.a,j),b.isMounted=!0,w=P=N=null}},ee=b.effect=new Yl(Y,()=>nc(B),b.scope),B=b.update=()=>ee.run();B.id=b.uid,mn(b,!0),B()},pe=(b,w,P)=>{w.component=b;const N=b.vnode.props;b.vnode=w,b.next=null,Ob(b,w.props,N,P),Lb(b,w.children,P),Di(),ud(),Li()},be=(b,w,P,N,j,W,K,Y,ee=!1)=>{const B=b&&b.children,ge=b?b.shapeFlag:0,oe=w.children,{patchFlag:ye,shapeFlag:xe}=w;if(ye>0){if(ye&128){Be(B,oe,P,N,j,W,K,Y,ee);return}else if(ye&256){ze(B,oe,P,N,j,W,K,Y,ee);return}}xe&8?(ge&16&&qe(B,j,W),oe!==B&&c(P,oe)):ge&16?xe&16?Be(B,oe,P,N,j,W,K,Y,ee):qe(B,j,W,!0):(ge&8&&c(P,""),xe&16&&H(oe,P,N,j,W,K,Y,ee))},ze=(b,w,P,N,j,W,K,Y,ee)=>{b=b||ai,w=w||ai;const B=b.length,ge=w.length,oe=Math.min(B,ge);let ye;for(ye=0;ye<oe;ye++){const xe=w[ye]=ee?Vr(w[ye]):dr(w[ye]);E(b[ye],xe,P,null,j,W,K,Y,ee)}B>ge?qe(b,j,W,!0,!1,oe):H(w,P,N,j,W,K,Y,ee,oe)},Be=(b,w,P,N,j,W,K,Y,ee)=>{let B=0;const ge=w.length;let oe=b.length-1,ye=ge-1;for(;B<=oe&&B<=ye;){const xe=b[B],Ie=w[B]=ee?Vr(w[B]):dr(w[B]);if(Ki(xe,Ie))E(xe,Ie,P,null,j,W,K,Y,ee);else break;B++}for(;B<=oe&&B<=ye;){const xe=b[oe],Ie=w[ye]=ee?Vr(w[ye]):dr(w[ye]);if(Ki(xe,Ie))E(xe,Ie,P,null,j,W,K,Y,ee);else break;oe--,ye--}if(B>oe){if(B<=ye){const xe=ye+1,Ie=xe<ge?w[xe].el:N;for(;B<=ye;)E(null,w[B]=ee?Vr(w[B]):dr(w[B]),P,Ie,j,W,K,Y,ee),B++}}else if(B>ye)for(;B<=oe;)we(b[B],j,W,!0),B++;else{const xe=B,Ie=B,Ne=new Map;for(B=Ie;B<=ye;B++){const vt=w[B]=ee?Vr(w[B]):dr(w[B]);vt.key!=null&&Ne.set(vt.key,B)}let Le,Xe=0;const ct=ye-Ie+1;let Mr=!1,cn=0;const Ur=new Array(ct);for(B=0;B<ct;B++)Ur[B]=0;for(B=xe;B<=oe;B++){const vt=b[B];if(Xe>=ct){we(vt,j,W,!0);continue}let qt;if(vt.key!=null)qt=Ne.get(vt.key);else for(Le=Ie;Le<=ye;Le++)if(Ur[Le-Ie]===0&&Ki(vt,w[Le])){qt=Le;break}qt===void 0?we(vt,j,W,!0):(Ur[qt-Ie]=B+1,qt>=cn?cn=qt:Mr=!0,E(vt,w[qt],P,null,j,W,K,Y,ee),Xe++)}const fn=Mr?Ub(Ur):ai;for(Le=fn.length-1,B=ct-1;B>=0;B--){const vt=Ie+B,qt=w[vt],dn=vt+1<ge?w[vt+1].el:N;Ur[B]===0?E(null,qt,P,dn,j,W,K,Y,ee):Mr&&(Le<0||B!==fn[Le]?$e(qt,P,dn,2):Le--)}}},$e=(b,w,P,N,j=null)=>{const{el:W,type:K,transition:Y,children:ee,shapeFlag:B}=b;if(B&6){$e(b.component.subTree,w,P,N);return}if(B&128){b.suspense.move(w,P,N);return}if(B&64){K.move(b,w,P,q);return}if(K===Jt){r(W,w,P);for(let oe=0;oe<ee.length;oe++)$e(ee[oe],w,P,N);r(b.anchor,w,P);return}if(K===du){$(b,w,P);return}if(N!==2&&B&1&&Y)if(N===0)Y.beforeEnter(W),r(W,w,P),kt(()=>Y.enter(W),j);else{const{leave:oe,delayLeave:ye,afterLeave:xe}=Y,Ie=()=>r(W,w,P),Ne=()=>{oe(W,()=>{Ie(),xe&&xe()})};ye?ye(W,Ie,Ne):Ne()}else r(W,w,P)},we=(b,w,P,N=!1,j=!1)=>{const{type:W,props:K,ref:Y,children:ee,dynamicChildren:B,shapeFlag:ge,patchFlag:oe,dirs:ye}=b;if(Y!=null&&sl(Y,null,P,b,!0),ge&256){w.ctx.deactivate(b);return}const xe=ge&1&&ye,Ie=!hs(b);let Ne;if(Ie&&(Ne=K&&K.onVnodeBeforeUnmount)&&fr(Ne,w,b),ge&6)Mt(b.component,P,N);else{if(ge&128){b.suspense.unmount(P,N);return}xe&&pn(b,null,w,"beforeUnmount"),ge&64?b.type.remove(b,w,P,j,q,N):B&&(W!==Jt||oe>0&&oe&64)?qe(B,w,P,!1,!0):(W===Jt&&oe&384||!j&&ge&16)&&qe(ee,w,P),N&&tt(b)}(Ie&&(Ne=K&&K.onVnodeUnmounted)||xe)&&kt(()=>{Ne&&fr(Ne,w,b),xe&&pn(b,null,w,"unmounted")},P)},tt=b=>{const{type:w,el:P,anchor:N,transition:j}=b;if(w===Jt){lt(P,N);return}if(w===du){U(b);return}const W=()=>{i(P),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(b.shapeFlag&1&&j&&!j.persisted){const{leave:K,delayLeave:Y}=j,ee=()=>K(P,W);Y?Y(b.el,W,ee):ee()}else W()},lt=(b,w)=>{let P;for(;b!==w;)P=d(b),i(b),b=P;i(w)},Mt=(b,w,P)=>{const{bum:N,scope:j,update:W,subTree:K,um:Y}=b;N&&lu(N),j.stop(),W&&(W.active=!1,we(K,b,w,P)),Y&&kt(Y,w),kt(()=>{b.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},qe=(b,w,P,N=!1,j=!1,W=0)=>{for(let K=W;K<b.length;K++)we(b[K],w,P,N,j)},M=b=>b.shapeFlag&6?M(b.component.subTree):b.shapeFlag&128?b.suspense.next():d(b.anchor||b.el),se=(b,w,P)=>{b==null?w._vnode&&we(w._vnode,null,null,!0):E(w._vnode||null,b,w,null,null,null,P),ud(),hm(),w._vnode=b},q={p:E,um:we,m:$e,r:tt,mt:J,mc:H,pc:be,pbc:ie,n:M,o:t};let ce,Re;return e&&([ce,Re]=e(q)),{render:se,hydrate:ce,createApp:kb(se,ce)}}function mn({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Om(t,e,n=!1){const r=t.children,i=e.children;if(Ee(r)&&Ee(i))for(let s=0;s<r.length;s++){const a=r[s];let o=i[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[s]=Vr(i[s]),o.el=a.el),n||Om(a,o)),o.type===So&&(o.el=a.el)}}function Ub(t){const e=t.slice(),n=[0];let r,i,s,a,o;const u=t.length;for(r=0;r<u;r++){const l=t[r];if(l!==0){if(i=n[n.length-1],t[i]<l){e[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)o=s+a>>1,t[n[o]]<l?s=o+1:a=o;l<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=e[a];return n}const Fb=t=>t.__isTeleport,Jt=Symbol.for("v-fgt"),So=Symbol.for("v-txt"),rn=Symbol.for("v-cmt"),du=Symbol.for("v-stc"),ms=[];let ir=null;function Ut(t=!1){ms.push(ir=t?null:[])}function Bb(){ms.pop(),ir=ms[ms.length-1]||null}let Is=1;function _d(t){Is+=t}function Rm(t){return t.dynamicChildren=Is>0?ir||ai:null,Bb(),Is>0&&ir&&ir.push(t),t}function Sr(t,e,n,r,i,s){return Rm(ke(t,e,n,r,i,s,!0))}function xo(t,e,n,r,i){return Rm(wt(t,e,n,r,i,!0))}function ja(t){return t?t.__v_isVNode===!0:!1}function Ki(t,e){return t.type===e.type&&t.key===e.key}const Eo="__vInternal",Dm=({key:t})=>t??null,Oa=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?at(t)||ht(t)||Ce(t)?{i:pt,r:t,k:e,f:!!n}:t:null);function ke(t,e=null,n=null,r=0,i=null,s=t===Jt?0:1,a=!1,o=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Dm(e),ref:e&&Oa(e),scopeId:gm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:pt};return o?(oc(u,n),s&128&&t.normalize(u)):n&&(u.shapeFlag|=at(n)?8:16),Is>0&&!a&&ir&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&ir.push(u),u}const wt=$b;function $b(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===_b)&&(t=rn),ja(t)){const o=vi(t,e,!0);return n&&oc(o,n),Is>0&&!s&&ir&&(o.shapeFlag&6?ir[ir.indexOf(t)]=o:ir.push(o)),o.patchFlag|=-2,o}if(Jb(t)&&(t=t.__vccOpts),e){e=jb(e);let{class:o,style:u}=e;o&&!at(o)&&(e.class=Es(o)),Ye(u)&&(im(u)&&!Ee(u)&&(u=st({},u)),e.style=vo(u))}const a=at(t)?1:rb(t)?128:Fb(t)?64:Ye(t)?4:Ce(t)?2:0;return ke(t,e,n,r,i,a,s,!0)}function jb(t){return t?im(t)||Eo in t?st({},t):t:null}function vi(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:a}=t,o=e?Hb(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&Dm(o),ref:e&&e.ref?n&&i?Ee(i)?i.concat(Oa(e)):[i,Oa(e)]:Oa(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Jt?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&vi(t.ssContent),ssFallback:t.ssFallback&&vi(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function al(t=" ",e=0){return wt(So,null,t,e)}function gn(t="",e=!1){return e?(Ut(),xo(rn,null,t)):wt(rn,null,t)}function dr(t){return t==null||typeof t=="boolean"?wt(rn):Ee(t)?wt(Jt,null,t.slice()):typeof t=="object"?Vr(t):wt(So,null,String(t))}function Vr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:vi(t)}function oc(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ee(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),oc(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Eo in e)?e._ctx=pt:i===3&&pt&&(pt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ce(e)?(e={default:e,_ctx:pt},n=32):(e=String(e),r&64?(n=16,e=[al(e)]):n=8);t.children=e,t.shapeFlag|=n}function Hb(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Es([e.class,r.class]));else if(i==="style")e.style=vo([e.style,r.style]);else if(ho(i)){const s=e[i],a=r[i];a&&s!==a&&!(Ee(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=r[i])}return e}function fr(t,e,n,r=null){ar(t,e,7,[n,r])}const Vb=wm();let Wb=0;function zb(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Vb,s={uid:Wb++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new d_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Am(r,i),emitsOptions:mm(r,i),emit:null,emitted:null,propsDefaults:He,inheritAttrs:r.inheritAttrs,ctx:He,data:He,props:He,attrs:He,slots:He,refs:He,setupState:He,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=J_.bind(null,s),t.ce&&t.ce(s),s}let ut=null,uc,qn,bd="__VUE_INSTANCE_SETTERS__";(qn=Ku()[bd])||(qn=Ku()[bd]=[]),qn.push(t=>ut=t),uc=t=>{qn.length>1?qn.forEach(e=>e(t)):qn[0](t)};const yi=t=>{uc(t),t.scope.on()},In=()=>{ut&&ut.scope.off(),uc(null)};function Lm(t){return t.vnode.shapeFlag&4}let ks=!1;function qb(t,e=!1){ks=e;const{props:n,children:r}=t.vnode,i=Lm(t);Pb(t,n,i,e),Db(t,r);const s=i?Gb(t,e):void 0;return ks=!1,s}function Gb(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=sm(new Proxy(t.ctx,Sb));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?Kb(t):null;yi(t),Di();const s=Xr(r,t,0,[t.props,i]);if(Li(),In(),jp(s)){if(s.then(In,In),e)return s.then(a=>{Td(t,a,e)}).catch(a=>{_o(a,t,0)});t.asyncDep=s}else Td(t,s,e)}else Nm(t,e)}function Td(t,e,n){Ce(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ye(e)&&(t.setupState=lm(e)),Nm(t,n)}let Sd;function Nm(t,e,n){const r=t.type;if(!t.render){if(!e&&Sd&&!r.render){const i=r.template||sc(t).template;if(i){const{isCustomElement:s,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:u}=r,l=st(st({isCustomElement:s,delimiters:o},a),u);r.render=Sd(i,l)}}t.render=r.render||sr}yi(t),Di(),xb(t),Li(),In()}function Xb(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Dt(t,"get","$attrs"),e[n]}}))}function Kb(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return Xb(t)},slots:t.slots,emit:t.emit,expose:e}}function wo(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(lm(sm(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ps)return ps[n](t)},has(e,n){return n in e||n in ps}}))}function Yb(t,e=!0){return Ce(t)?t.displayName||t.name:t.name||e&&t.__name}function Jb(t){return Ce(t)&&"__vccOpts"in t}const nr=(t,e)=>z_(t,e,ks);function Mm(t,e,n){const r=arguments.length;return r===2?Ye(e)&&!Ee(e)?ja(e)?wt(t,null,[e]):wt(t,e):wt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ja(n)&&(n=[n]),wt(t,e,n))}const Qb=Symbol.for("v-scx"),Zb=()=>wr(Qb),eT="3.3.4",tT="http://www.w3.org/2000/svg",bn=typeof document<"u"?document:null,xd=bn&&bn.createElement("template"),rT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?bn.createElementNS(tT,t):bn.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>bn.createTextNode(t),createComment:t=>bn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>bn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const a=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{xd.innerHTML=r?`<svg>${t}</svg>`:t;const o=xd.content;if(r){const u=o.firstChild;for(;u.firstChild;)o.appendChild(u.firstChild);o.removeChild(u)}e.insertBefore(o,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function nT(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function iT(t,e,n){const r=t.style,i=at(n);if(n&&!i){if(e&&!at(e))for(const s in e)n[s]==null&&ol(r,s,"");for(const s in n)ol(r,s,n[s])}else{const s=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}const Ed=/\s*!important$/;function ol(t,e,n){if(Ee(n))n.forEach(r=>ol(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=sT(t,e);Ed.test(n)?t.setProperty(Ri(r),n.replace(Ed,""),"important"):t[r]=n}}const wd=["Webkit","Moz","ms"],hu={};function sT(t,e){const n=hu[e];if(n)return n;let r=yr(e);if(r!=="filter"&&r in t)return hu[e]=r;r=go(r);for(let i=0;i<wd.length;i++){const s=wd[i]+r;if(s in t)return hu[e]=s}return e}const Cd="http://www.w3.org/1999/xlink";function aT(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Cd,e.slice(6,e.length)):t.setAttributeNS(Cd,e,n);else{const s=c_(e);n==null||s&&!Wp(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function oT(t,e,n,r,i,s,a){if(e==="innerHTML"||e==="textContent"){r&&a(r,i,s),t[e]=n??"";return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){t._value=n;const l=o==="OPTION"?t.getAttribute("value"):t.value,c=n??"";l!==c&&(t.value=c),n==null&&t.removeAttribute(e);return}let u=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Wp(n):n==null&&l==="string"?(n="",u=!0):l==="number"&&(n=0,u=!0)}try{t[e]=n}catch{}u&&t.removeAttribute(e)}function uT(t,e,n,r){t.addEventListener(e,n,r)}function lT(t,e,n,r){t.removeEventListener(e,n,r)}function cT(t,e,n,r,i=null){const s=t._vei||(t._vei={}),a=s[e];if(r&&a)a.value=r;else{const[o,u]=fT(e);if(r){const l=s[e]=pT(r,i);uT(t,o,l,u)}else a&&(lT(t,o,a,u),s[e]=void 0)}}const Ad=/(?:Once|Passive|Capture)$/;function fT(t){let e;if(Ad.test(t)){e={};let r;for(;r=t.match(Ad);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ri(t.slice(2)),e]}let pu=0;const dT=Promise.resolve(),hT=()=>pu||(dT.then(()=>pu=0),pu=Date.now());function pT(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ar(mT(r,n.value),e,5,[r])};return n.value=t,n.attached=hT(),n}function mT(t,e){if(Ee(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Id=/^on[a-z]/,gT=(t,e,n,r,i=!1,s,a,o,u)=>{e==="class"?nT(t,r,i):e==="style"?iT(t,n,r):ho(e)?zl(e)||cT(t,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):vT(t,e,r,i))?oT(t,e,r,s,a,o,u):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),aT(t,e,r,i))};function vT(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&Id.test(e)&&Ce(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Id.test(e)&&at(n)?!1:e in t}const yT={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Yi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Yi(t,!0),r.enter(t)):r.leave(t,()=>{Yi(t,!1)}):Yi(t,e))},beforeUnmount(t,{value:e}){Yi(t,e)}};function Yi(t,e){t.style.display=e?t._vod:"none"}const _T=st({patchProp:gT},rT);let kd;function bT(){return kd||(kd=Nb(_T))}const TT=(...t)=>{const e=bT().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=ST(r);if(!i)return;const s=e._component;!Ce(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e};function ST(t){return at(t)?document.querySelector(t):t}const Um=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},xT={};function ET(t,e){const n=yb("RouterView");return Ut(),xo(n)}const wT=Um(xT,[["render",ET]]);/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const ti=typeof window<"u";function CT(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Ue=Object.assign;function mu(t,e){const n={};for(const r in e){const i=e[r];n[r]=ur(i)?i.map(t):t(i)}return n}const gs=()=>{},ur=Array.isArray,AT=/\/$/,IT=t=>t.replace(AT,"");function gu(t,e,n="/"){let r,i={},s="",a="";const o=e.indexOf("#");let u=e.indexOf("?");return o<u&&o>=0&&(u=-1),u>-1&&(r=e.slice(0,u),s=e.slice(u+1,o>-1?o:e.length),i=t(s)),o>-1&&(r=r||e.slice(0,o),a=e.slice(o,e.length)),r=RT(r??e,n),{fullPath:r+(s&&"?")+s+a,path:r,query:i,hash:a}}function kT(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Pd(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function PT(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&_i(e.matched[r],n.matched[i])&&Fm(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function _i(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Fm(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!OT(t[n],e[n]))return!1;return!0}function OT(t,e){return ur(t)?Od(t,e):ur(e)?Od(e,t):t===e}function Od(t,e){return ur(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function RT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,a,o;for(a=0;a<r.length;a++)if(o=r[a],o!==".")if(o==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(a-(a===r.length?1:0)).join("/")}var Ps;(function(t){t.pop="pop",t.push="push"})(Ps||(Ps={}));var vs;(function(t){t.back="back",t.forward="forward",t.unknown=""})(vs||(vs={}));function DT(t){if(!t)if(ti){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),IT(t)}const LT=/^[^#]+#/;function NT(t,e){return t.replace(LT,"#")+e}function MT(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Co=()=>({left:window.pageXOffset,top:window.pageYOffset});function UT(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=MT(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Rd(t,e){return(history.state?history.state.position-e:-1)+t}const ul=new Map;function FT(t,e){ul.set(t,e)}function BT(t){const e=ul.get(t);return ul.delete(t),e}let $T=()=>location.protocol+"//"+location.host;function Bm(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let o=i.includes(t.slice(s))?t.slice(s).length:1,u=i.slice(o);return u[0]!=="/"&&(u="/"+u),Pd(u,"")}return Pd(n,t)+r+i}function jT(t,e,n,r){let i=[],s=[],a=null;const o=({state:d})=>{const h=Bm(t,location),g=n.value,E=e.value;let S=0;if(d){if(n.value=h,e.value=d,a&&a===g){a=null;return}S=E?d.position-E.position:0}else r(h);i.forEach(x=>{x(n.value,g,{delta:S,type:Ps.pop,direction:S?S>0?vs.forward:vs.back:vs.unknown})})};function u(){a=n.value}function l(d){i.push(d);const h=()=>{const g=i.indexOf(d);g>-1&&i.splice(g,1)};return s.push(h),h}function c(){const{history:d}=window;d.state&&d.replaceState(Ue({},d.state,{scroll:Co()}),"")}function f(){for(const d of s)d();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:u,listen:l,destroy:f}}function Dd(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Co():null}}function HT(t){const{history:e,location:n}=window,r={value:Bm(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(u,l,c){const f=t.indexOf("#"),d=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+u:$T()+t+u;try{e[c?"replaceState":"pushState"](l,"",d),i.value=l}catch(h){console.error(h),n[c?"replace":"assign"](d)}}function a(u,l){const c=Ue({},e.state,Dd(i.value.back,u,i.value.forward,!0),l,{position:i.value.position});s(u,c,!0),r.value=u}function o(u,l){const c=Ue({},i.value,e.state,{forward:u,scroll:Co()});s(c.current,c,!0);const f=Ue({},Dd(r.value,u,null),{position:c.position+1},l);s(u,f,!1),r.value=u}return{location:r,state:i,push:o,replace:a}}function VT(t){t=DT(t);const e=HT(t),n=jT(t,e.state,e.location,e.replace);function r(s,a=!0){a||n.pauseListeners(),history.go(s)}const i=Ue({location:"",base:t,go:r,createHref:NT.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function WT(t){return typeof t=="string"||t&&typeof t=="object"}function $m(t){return typeof t=="string"||typeof t=="symbol"}const $r={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},jm=Symbol("");var Ld;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Ld||(Ld={}));function bi(t,e){return Ue(new Error,{type:t,[jm]:!0},e)}function Tr(t,e){return t instanceof Error&&jm in t&&(e==null||!!(t.type&e))}const Nd="[^/]+?",zT={sensitive:!1,strict:!1,start:!0,end:!0},qT=/[.+*?^${}()[\]/\\]/g;function GT(t,e){const n=Ue({},zT,e),r=[];let i=n.start?"^":"";const s=[];for(const l of t){const c=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let f=0;f<l.length;f++){const d=l[f];let h=40+(n.sensitive?.25:0);if(d.type===0)f||(i+="/"),i+=d.value.replace(qT,"\\$&"),h+=40;else if(d.type===1){const{value:g,repeatable:E,optional:S,regexp:x}=d;s.push({name:g,repeatable:E,optional:S});const D=x||Nd;if(D!==Nd){h+=10;try{new RegExp(`(${D})`)}catch(U){throw new Error(`Invalid custom RegExp for param "${g}" (${D}): `+U.message)}}let $=E?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;f||($=S&&l.length<2?`(?:/${$})`:"/"+$),S&&($+="?"),i+=$,h+=20,S&&(h+=-8),E&&(h+=-20),D===".*"&&(h+=-50)}c.push(h)}r.push(c)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function o(l){const c=l.match(a),f={};if(!c)return null;for(let d=1;d<c.length;d++){const h=c[d]||"",g=s[d-1];f[g.name]=h&&g.repeatable?h.split("/"):h}return f}function u(l){let c="",f=!1;for(const d of t){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const h of d)if(h.type===0)c+=h.value;else if(h.type===1){const{value:g,repeatable:E,optional:S}=h,x=g in l?l[g]:"";if(ur(x)&&!E)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const D=ur(x)?x.join("/"):x;if(!D)if(S)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);c+=D}}return c||"/"}return{re:a,score:r,keys:s,parse:o,stringify:u}}function XT(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function KT(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=XT(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(Md(r))return 1;if(Md(i))return-1}return i.length-r.length}function Md(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const YT={type:0,value:""},JT=/[a-zA-Z0-9_]/;function QT(t){if(!t)return[[]];if(t==="/")return[[YT]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${l}": ${h}`)}let n=0,r=n;const i=[];let s;function a(){s&&i.push(s),s=[]}let o=0,u,l="",c="";function f(){l&&(n===0?s.push({type:0,value:l}):n===1||n===2||n===3?(s.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:c,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=u}for(;o<t.length;){if(u=t[o++],u==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:u==="/"?(l&&f(),a()):u===":"?(f(),n=1):d();break;case 4:d(),n=r;break;case 1:u==="("?n=2:JT.test(u)?d():(f(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&o--);break;case 2:u===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+u:n=3:c+=u;break;case 3:f(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&o--,c="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),f(),a(),i}function ZT(t,e,n){const r=GT(QT(t.path),n),i=Ue(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function eS(t,e){const n=[],r=new Map;e=Bd({strict:!1,end:!0,sensitive:!1},e);function i(c){return r.get(c)}function s(c,f,d){const h=!d,g=tS(c);g.aliasOf=d&&d.record;const E=Bd(e,c),S=[g];if("alias"in c){const $=typeof c.alias=="string"?[c.alias]:c.alias;for(const U of $)S.push(Ue({},g,{components:d?d.record.components:g.components,path:U,aliasOf:d?d.record:g}))}let x,D;for(const $ of S){const{path:U}=$;if(f&&U[0]!=="/"){const _e=f.record.path,re=_e[_e.length-1]==="/"?"":"/";$.path=f.record.path+(U&&re+U)}if(x=ZT($,f,E),d?d.alias.push(x):(D=D||x,D!==x&&D.alias.push(x),h&&c.name&&!Fd(x)&&a(c.name)),g.children){const _e=g.children;for(let re=0;re<_e.length;re++)s(_e[re],x,d&&d.children[re])}d=d||x,(x.record.components&&Object.keys(x.record.components).length||x.record.name||x.record.redirect)&&u(x)}return D?()=>{a(D)}:gs}function a(c){if($m(c)){const f=r.get(c);f&&(r.delete(c),n.splice(n.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=n.indexOf(c);f>-1&&(n.splice(f,1),c.record.name&&r.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function o(){return n}function u(c){let f=0;for(;f<n.length&&KT(c,n[f])>=0&&(c.record.path!==n[f].record.path||!Hm(c,n[f]));)f++;n.splice(f,0,c),c.record.name&&!Fd(c)&&r.set(c.record.name,c)}function l(c,f){let d,h={},g,E;if("name"in c&&c.name){if(d=r.get(c.name),!d)throw bi(1,{location:c});E=d.record.name,h=Ue(Ud(f.params,d.keys.filter(D=>!D.optional).map(D=>D.name)),c.params&&Ud(c.params,d.keys.map(D=>D.name))),g=d.stringify(h)}else if("path"in c)g=c.path,d=n.find(D=>D.re.test(g)),d&&(h=d.parse(g),E=d.record.name);else{if(d=f.name?r.get(f.name):n.find(D=>D.re.test(f.path)),!d)throw bi(1,{location:c,currentLocation:f});E=d.record.name,h=Ue({},f.params,c.params),g=d.stringify(h)}const S=[];let x=d;for(;x;)S.unshift(x.record),x=x.parent;return{name:E,path:g,params:h,matched:S,meta:nS(S)}}return t.forEach(c=>s(c)),{addRoute:s,resolve:l,removeRoute:a,getRoutes:o,getRecordMatcher:i}}function Ud(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function tS(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:rS(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function rS(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Fd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function nS(t){return t.reduce((e,n)=>Ue(e,n.meta),{})}function Bd(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Hm(t,e){return e.children.some(n=>n===t||Hm(t,n))}const Vm=/#/g,iS=/&/g,sS=/\//g,aS=/=/g,oS=/\?/g,Wm=/\+/g,uS=/%5B/g,lS=/%5D/g,zm=/%5E/g,cS=/%60/g,qm=/%7B/g,fS=/%7C/g,Gm=/%7D/g,dS=/%20/g;function lc(t){return encodeURI(""+t).replace(fS,"|").replace(uS,"[").replace(lS,"]")}function hS(t){return lc(t).replace(qm,"{").replace(Gm,"}").replace(zm,"^")}function ll(t){return lc(t).replace(Wm,"%2B").replace(dS,"+").replace(Vm,"%23").replace(iS,"%26").replace(cS,"`").replace(qm,"{").replace(Gm,"}").replace(zm,"^")}function pS(t){return ll(t).replace(aS,"%3D")}function mS(t){return lc(t).replace(Vm,"%23").replace(oS,"%3F")}function gS(t){return t==null?"":mS(t).replace(sS,"%2F")}function Ha(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function vS(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(Wm," "),a=s.indexOf("="),o=Ha(a<0?s:s.slice(0,a)),u=a<0?null:Ha(s.slice(a+1));if(o in e){let l=e[o];ur(l)||(l=e[o]=[l]),l.push(u)}else e[o]=u}return e}function $d(t){let e="";for(let n in t){const r=t[n];if(n=pS(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(ur(r)?r.map(s=>s&&ll(s)):[r&&ll(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function yS(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=ur(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const _S=Symbol(""),jd=Symbol(""),cc=Symbol(""),Xm=Symbol(""),cl=Symbol("");function Ji(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Wr(t,e,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,o)=>{const u=f=>{f===!1?o(bi(4,{from:n,to:e})):f instanceof Error?o(f):WT(f)?o(bi(2,{from:e,to:f})):(s&&r.enterCallbacks[i]===s&&typeof f=="function"&&s.push(f),a())},l=t.call(r&&r.instances[i],e,n,u);let c=Promise.resolve(l);t.length<3&&(c=c.then(u)),c.catch(f=>o(f))})}function vu(t,e,n,r){const i=[];for(const s of t)for(const a in s.components){let o=s.components[a];if(!(e!=="beforeRouteEnter"&&!s.instances[a]))if(bS(o)){const l=(o.__vccOpts||o)[e];l&&i.push(Wr(l,n,r,s,a))}else{let u=o();i.push(()=>u.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${s.path}"`));const c=CT(l)?l.default:l;s.components[a]=c;const d=(c.__vccOpts||c)[e];return d&&Wr(d,n,r,s,a)()}))}}return i}function bS(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Hd(t){const e=wr(cc),n=wr(Xm),r=nr(()=>e.resolve(ft(t.to))),i=nr(()=>{const{matched:u}=r.value,{length:l}=u,c=u[l-1],f=n.matched;if(!c||!f.length)return-1;const d=f.findIndex(_i.bind(null,c));if(d>-1)return d;const h=Vd(u[l-2]);return l>1&&Vd(c)===h&&f[f.length-1].path!==h?f.findIndex(_i.bind(null,u[l-2])):d}),s=nr(()=>i.value>-1&&ES(n.params,r.value.params)),a=nr(()=>i.value>-1&&i.value===n.matched.length-1&&Fm(n.params,r.value.params));function o(u={}){return xS(u)?e[ft(t.replace)?"replace":"push"](ft(t.to)).catch(gs):Promise.resolve()}return{route:r,href:nr(()=>r.value.href),isActive:s,isExactActive:a,navigate:o}}const TS=Hs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Hd,setup(t,{slots:e}){const n=mi(Hd(t)),{options:r}=wr(cc),i=nr(()=>({[Wd(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Wd(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Mm("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),SS=TS;function xS(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function ES(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!ur(i)||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function Vd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Wd=(t,e,n)=>t??e??n,wS=Hs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=wr(cl),i=nr(()=>t.route||r.value),s=wr(jd,0),a=nr(()=>{let l=ft(s);const{matched:c}=i.value;let f;for(;(f=c[l])&&!f.components;)l++;return l}),o=nr(()=>i.value.matched[a.value]);Pa(jd,nr(()=>a.value+1)),Pa(_S,o),Pa(cl,i);const u=It();return ka(()=>[u.value,o.value,t.name],([l,c,f],[d,h,g])=>{c&&(c.instances[f]=l,h&&h!==c&&l&&l===d&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),l&&c&&(!h||!_i(c,h)||!d)&&(c.enterCallbacks[f]||[]).forEach(E=>E(l))},{flush:"post"}),()=>{const l=i.value,c=t.name,f=o.value,d=f&&f.components[c];if(!d)return zd(n.default,{Component:d,route:l});const h=f.props[c],g=h?h===!0?l.params:typeof h=="function"?h(l):h:null,S=Mm(d,Ue({},g,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(f.instances[c]=null)},ref:u}));return zd(n.default,{Component:S,route:l})||S}}});function zd(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const CS=wS;function AS(t){const e=eS(t.routes,t),n=t.parseQuery||vS,r=t.stringifyQuery||$d,i=t.history,s=Ji(),a=Ji(),o=Ji(),u=j_($r);let l=$r;ti&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=mu.bind(null,M=>""+M),f=mu.bind(null,gS),d=mu.bind(null,Ha);function h(M,se){let q,ce;return $m(M)?(q=e.getRecordMatcher(M),ce=se):ce=M,e.addRoute(ce,q)}function g(M){const se=e.getRecordMatcher(M);se&&e.removeRoute(se)}function E(){return e.getRoutes().map(M=>M.record)}function S(M){return!!e.getRecordMatcher(M)}function x(M,se){if(se=Ue({},se||u.value),typeof M=="string"){const P=gu(n,M,se.path),N=e.resolve({path:P.path},se),j=i.createHref(P.fullPath);return Ue(P,N,{params:d(N.params),hash:Ha(P.hash),redirectedFrom:void 0,href:j})}let q;if("path"in M)q=Ue({},M,{path:gu(n,M.path,se.path).path});else{const P=Ue({},M.params);for(const N in P)P[N]==null&&delete P[N];q=Ue({},M,{params:f(P)}),se.params=f(se.params)}const ce=e.resolve(q,se),Re=M.hash||"";ce.params=c(d(ce.params));const b=kT(r,Ue({},M,{hash:hS(Re),path:ce.path})),w=i.createHref(b);return Ue({fullPath:b,hash:Re,query:r===$d?yS(M.query):M.query||{}},ce,{redirectedFrom:void 0,href:w})}function D(M){return typeof M=="string"?gu(n,M,u.value.path):Ue({},M)}function $(M,se){if(l!==M)return bi(8,{from:se,to:M})}function U(M){return Z(M)}function _e(M){return U(Ue(D(M),{replace:!0}))}function re(M){const se=M.matched[M.matched.length-1];if(se&&se.redirect){const{redirect:q}=se;let ce=typeof q=="function"?q(M):q;return typeof ce=="string"&&(ce=ce.includes("?")||ce.includes("#")?ce=D(ce):{path:ce},ce.params={}),Ue({query:M.query,hash:M.hash,params:"path"in ce?{}:M.params},ce)}}function Z(M,se){const q=l=x(M),ce=u.value,Re=M.state,b=M.force,w=M.replace===!0,P=re(q);if(P)return Z(Ue(D(P),{state:typeof P=="object"?Ue({},Re,P.state):Re,force:b,replace:w}),se||q);const N=q;N.redirectedFrom=se;let j;return!b&&PT(r,ce,q)&&(j=bi(16,{to:N,from:ce}),$e(ce,ce,!0,!1)),(j?Promise.resolve(j):ie(N,ce)).catch(W=>Tr(W)?Tr(W,2)?W:Be(W):be(W,N,ce)).then(W=>{if(W){if(Tr(W,2))return Z(Ue({replace:w},D(W.to),{state:typeof W.to=="object"?Ue({},Re,W.to.state):Re,force:b}),se||N)}else W=de(N,ce,!0,w,Re);return me(N,ce,W),W})}function H(M,se){const q=$(M,se);return q?Promise.reject(q):Promise.resolve()}function z(M){const se=lt.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext(M):M()}function ie(M,se){let q;const[ce,Re,b]=IS(M,se);q=vu(ce.reverse(),"beforeRouteLeave",M,se);for(const P of ce)P.leaveGuards.forEach(N=>{q.push(Wr(N,M,se))});const w=H.bind(null,M,se);return q.push(w),qe(q).then(()=>{q=[];for(const P of s.list())q.push(Wr(P,M,se));return q.push(w),qe(q)}).then(()=>{q=vu(Re,"beforeRouteUpdate",M,se);for(const P of Re)P.updateGuards.forEach(N=>{q.push(Wr(N,M,se))});return q.push(w),qe(q)}).then(()=>{q=[];for(const P of b)if(P.beforeEnter)if(ur(P.beforeEnter))for(const N of P.beforeEnter)q.push(Wr(N,M,se));else q.push(Wr(P.beforeEnter,M,se));return q.push(w),qe(q)}).then(()=>(M.matched.forEach(P=>P.enterCallbacks={}),q=vu(b,"beforeRouteEnter",M,se),q.push(w),qe(q))).then(()=>{q=[];for(const P of a.list())q.push(Wr(P,M,se));return q.push(w),qe(q)}).catch(P=>Tr(P,8)?P:Promise.reject(P))}function me(M,se,q){o.list().forEach(ce=>z(()=>ce(M,se,q)))}function de(M,se,q,ce,Re){const b=$(M,se);if(b)return b;const w=se===$r,P=ti?history.state:{};q&&(ce||w?i.replace(M.fullPath,Ue({scroll:w&&P&&P.scroll},Re)):i.push(M.fullPath,Re)),u.value=M,$e(M,se,q,w),Be()}let V;function J(){V||(V=i.listen((M,se,q)=>{if(!Mt.listening)return;const ce=x(M),Re=re(ce);if(Re){Z(Ue(Re,{replace:!0}),ce).catch(gs);return}l=ce;const b=u.value;ti&&FT(Rd(b.fullPath,q.delta),Co()),ie(ce,b).catch(w=>Tr(w,12)?w:Tr(w,2)?(Z(w.to,ce).then(P=>{Tr(P,20)&&!q.delta&&q.type===Ps.pop&&i.go(-1,!1)}).catch(gs),Promise.reject()):(q.delta&&i.go(-q.delta,!1),be(w,ce,b))).then(w=>{w=w||de(ce,b,!1),w&&(q.delta&&!Tr(w,8)?i.go(-q.delta,!1):q.type===Ps.pop&&Tr(w,20)&&i.go(-1,!1)),me(ce,b,w)}).catch(gs)}))}let Te=Ji(),he=Ji(),pe;function be(M,se,q){Be(M);const ce=he.list();return ce.length?ce.forEach(Re=>Re(M,se,q)):console.error(M),Promise.reject(M)}function ze(){return pe&&u.value!==$r?Promise.resolve():new Promise((M,se)=>{Te.add([M,se])})}function Be(M){return pe||(pe=!M,J(),Te.list().forEach(([se,q])=>M?q(M):se()),Te.reset()),M}function $e(M,se,q,ce){const{scrollBehavior:Re}=t;if(!ti||!Re)return Promise.resolve();const b=!q&&BT(Rd(M.fullPath,0))||(ce||!q)&&history.state&&history.state.scroll||null;return fm().then(()=>Re(M,se,b)).then(w=>w&&UT(w)).catch(w=>be(w,M,se))}const we=M=>i.go(M);let tt;const lt=new Set,Mt={currentRoute:u,listening:!0,addRoute:h,removeRoute:g,hasRoute:S,getRoutes:E,resolve:x,options:t,push:U,replace:_e,go:we,back:()=>we(-1),forward:()=>we(1),beforeEach:s.add,beforeResolve:a.add,afterEach:o.add,onError:he.add,isReady:ze,install(M){const se=this;M.component("RouterLink",SS),M.component("RouterView",CS),M.config.globalProperties.$router=se,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>ft(u)}),ti&&!tt&&u.value===$r&&(tt=!0,U(i.location).catch(Re=>{}));const q={};for(const Re in $r)Object.defineProperty(q,Re,{get:()=>u.value[Re],enumerable:!0});M.provide(cc,se),M.provide(Xm,rm(q)),M.provide(cl,u);const ce=M.unmount;lt.add(M),M.unmount=function(){lt.delete(M),lt.size<1&&(l=$r,V&&V(),V=null,u.value=$r,tt=!1,pe=!1),ce()}}};function qe(M){return M.reduce((se,q)=>se.then(()=>z(q)),Promise.resolve())}return Mt}function IS(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let a=0;a<s;a++){const o=e.matched[a];o&&(t.matched.find(l=>_i(l,o))?r.push(o):n.push(o));const u=t.matched[a];u&&(e.matched.find(l=>_i(l,u))||i.push(u))}return[n,r,i]}const kS="/assets/start-ff8a399b.mp3",PS="/assets/stop-afe9b102.mp3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},OS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Ym={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=s>>2,f=(s&3)<<4|o>>4;let d=(o&15)<<2|l>>6,h=l&63;u||(h=64,a||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Km(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||l==null||f==null)throw new RS;const d=s<<2|o>>4;if(r.push(d),l!==64){const h=o<<4&240|l>>2;if(r.push(h),f!==64){const g=l<<6&192|f;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DS=function(t){const e=Km(t);return Ym.encodeByteArray(e,!0)},Va=function(t){return DS(t).replace(/\./g,"")},LS=function(t){try{return Ym.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=()=>NS().__FIREBASE_DEFAULTS__,US=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LS(t[1]);return e&&JSON.parse(e)},fc=()=>{try{return MS()||US()||FS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BS=t=>{var e,n;return(n=(e=fc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$S=t=>{const e=BS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Jm=()=>{var t;return(t=fc())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),o="";return[Va(JSON.stringify(n)),Va(JSON.stringify(a)),o].join(".")}function VS(){var t;const e=(t=fc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Qm(){try{return typeof indexedDB=="object"}catch{return!1}}function Zm(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function zS(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="FirebaseError";class ln extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qS,Object.setPrototypeOf(this,ln.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ao.prototype.create)}}class Ao{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?GS(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new ln(i,o,r)}}function GS(t,e){return t.replace(XS,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const XS=/\{\$([^}]+)}/g;function Wa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(qd(s)&&qd(a)){if(!Wa(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function qd(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=1e3,YS=2,JS=4*60*60*1e3,QS=.5;function Gd(t,e=KS,n=YS){const r=e*Math.pow(n,t),i=Math.round(QS*r*(Math.random()-.5)*2);return Math.min(JS,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(t){return t&&t._delegate?t._delegate:t}let Pr=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tx(e))try{this.getOrInitializeService({instanceIdentifier:vn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=vn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vn){return this.instances.has(e)}getOptions(e=vn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ex(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vn){return this.component?this.component.multipleInstances?e:vn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ex(t){return t===vn?void 0:t}function tx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(je||(je={}));const nx={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},ix=je.INFO,sx={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},ax=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=sx[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class eg{constructor(e){this.name=e,this._logLevel=ix,this._logHandler=ax,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const ox=(t,e)=>e.some(n=>t instanceof n);let Xd,Kd;function ux(){return Xd||(Xd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lx(){return Kd||(Kd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tg=new WeakMap,fl=new WeakMap,rg=new WeakMap,yu=new WeakMap,dc=new WeakMap;function cx(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Kr(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&tg.set(n,t)}).catch(()=>{}),dc.set(e,t),e}function fx(t){if(fl.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});fl.set(t,e)}let dl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dx(t){dl=t(dl)}function hx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_u(this),e,...n);return rg.set(r,e.sort?e.sort():[e]),Kr(r)}:lx().includes(t)?function(...e){return t.apply(_u(this),e),Kr(tg.get(this))}:function(...e){return Kr(t.apply(_u(this),e))}}function px(t){return typeof t=="function"?hx(t):(t instanceof IDBTransaction&&fx(t),ox(t,ux())?new Proxy(t,dl):t)}function Kr(t){if(t instanceof IDBRequest)return cx(t);if(yu.has(t))return yu.get(t);const e=px(t);return e!==t&&(yu.set(t,e),dc.set(e,t)),e}const _u=t=>dc.get(t);function mx(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=Kr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Kr(a.result),u.oldVersion,u.newVersion,Kr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),o.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const gx=["get","getKey","getAll","getAllKeys","count"],vx=["put","add","delete","clear"],bu=new Map;function Yd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bu.get(e))return bu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=vx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gx.includes(n)))return;const s=async function(a,...o){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(o.shift())),(await Promise.all([l[n](...o),i&&u.done]))[0]};return bu.set(e,s),s}dx(t=>({...t,get:(e,n,r)=>Yd(e,n)||t.get(e,n,r),has:(e,n)=>!!Yd(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_x(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _x(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hl="@firebase/app",Jd="0.9.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn=new eg("@firebase/app"),bx="@firebase/app-compat",Tx="@firebase/analytics-compat",Sx="@firebase/analytics",xx="@firebase/app-check-compat",Ex="@firebase/app-check",wx="@firebase/auth",Cx="@firebase/auth-compat",Ax="@firebase/database",Ix="@firebase/database-compat",kx="@firebase/functions",Px="@firebase/functions-compat",Ox="@firebase/installations",Rx="@firebase/installations-compat",Dx="@firebase/messaging",Lx="@firebase/messaging-compat",Nx="@firebase/performance",Mx="@firebase/performance-compat",Ux="@firebase/remote-config",Fx="@firebase/remote-config-compat",Bx="@firebase/storage",$x="@firebase/storage-compat",jx="@firebase/firestore",Hx="@firebase/firestore-compat",Vx="firebase",Wx="10.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl="[DEFAULT]",zx={[hl]:"fire-core",[bx]:"fire-core-compat",[Sx]:"fire-analytics",[Tx]:"fire-analytics-compat",[Ex]:"fire-app-check",[xx]:"fire-app-check-compat",[wx]:"fire-auth",[Cx]:"fire-auth-compat",[Ax]:"fire-rtdb",[Ix]:"fire-rtdb-compat",[kx]:"fire-fn",[Px]:"fire-fn-compat",[Ox]:"fire-iid",[Rx]:"fire-iid-compat",[Dx]:"fire-fcm",[Lx]:"fire-fcm-compat",[Nx]:"fire-perf",[Mx]:"fire-perf-compat",[Ux]:"fire-rc",[Fx]:"fire-rc-compat",[Bx]:"fire-gcs",[$x]:"fire-gcs-compat",[jx]:"fire-fst",[Hx]:"fire-fst-compat","fire-js":"fire-js",[Vx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=new Map,ml=new Map;function qx(t,e){try{t.container.addComponent(e)}catch(n){Dn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nn(t){const e=t.name;if(ml.has(e))return Dn.debug(`There were multiple attempts to register component ${e}.`),!1;ml.set(e,t);for(const n of za.values())qx(n,t);return!0}function Vs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Yr=new Ao("app","Firebase",Gx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=Wx;function ng(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:pl,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Yr.create("bad-app-name",{appName:String(i)});if(n||(n=Jm()),!n)throw Yr.create("no-options");const s=za.get(i);if(s){if(Wa(n,s.options)&&Wa(r,s.config))return s;throw Yr.create("duplicate-app",{appName:i})}const a=new rx(i);for(const u of ml.values())a.addComponent(u);const o=new Xx(n,r,a);return za.set(i,o),o}function ig(t=pl){const e=za.get(t);if(!e&&t===pl&&Jm())return ng();if(!e)throw Yr.create("no-app",{appName:t});return e}function gr(t,e,n){var r;let i=(r=zx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dn.warn(o.join(" "));return}nn(new Pr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="firebase-heartbeat-database",Jx=1,Os="firebase-heartbeat-store";let Tu=null;function sg(){return Tu||(Tu=mx(Yx,Jx,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Os)}}}).catch(t=>{throw Yr.create("idb-open",{originalErrorMessage:t.message})})),Tu}async function Qx(t){try{return await(await sg()).transaction(Os).objectStore(Os).get(ag(t))}catch(e){if(e instanceof ln)Dn.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dn.warn(n.message)}}}async function Qd(t,e){try{const r=(await sg()).transaction(Os,"readwrite");await r.objectStore(Os).put(e,ag(t)),await r.done}catch(n){if(n instanceof ln)Dn.warn(n.message);else{const r=Yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dn.warn(r.message)}}}function ag(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=1024,eE=30*24*60*60*1e3;class tE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Zd();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=eE}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Zd(),{heartbeatsToSend:n,unsentEntries:r}=rE(this._heartbeatsCache.heartbeats),i=Va(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Zd(){return new Date().toISOString().substring(0,10)}function rE(t,e=Zx){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),eh(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),eh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class nE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qm()?Zm().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Qx(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function eh(t){return Va(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t){nn(new Pr("platform-logger",e=>new yx(e),"PRIVATE")),nn(new Pr("heartbeat",e=>new tE(e),"PRIVATE")),gr(hl,Jd,t),gr(hl,Jd,"esm2017"),gr("fire-js","")}iE("");var sE="firebase",aE="10.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(sE,aE,"app");const oE=(t,e)=>e.some(n=>t instanceof n);let th,rh;function uE(){return th||(th=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lE(){return rh||(rh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const og=new WeakMap,gl=new WeakMap,ug=new WeakMap,Su=new WeakMap,hc=new WeakMap;function cE(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Jr(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&og.set(n,t)}).catch(()=>{}),hc.set(e,t),e}function fE(t){if(gl.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});gl.set(t,e)}let vl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ug.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dE(t){vl=t(vl)}function hE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xu(this),e,...n);return ug.set(r,e.sort?e.sort():[e]),Jr(r)}:lE().includes(t)?function(...e){return t.apply(xu(this),e),Jr(og.get(this))}:function(...e){return Jr(t.apply(xu(this),e))}}function pE(t){return typeof t=="function"?hE(t):(t instanceof IDBTransaction&&fE(t),oE(t,uE())?new Proxy(t,vl):t)}function Jr(t){if(t instanceof IDBRequest)return cE(t);if(Su.has(t))return Su.get(t);const e=pE(t);return e!==t&&(Su.set(t,e),hc.set(e,t)),e}const xu=t=>hc.get(t);function mE(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=Jr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Jr(a.result),u.oldVersion,u.newVersion,Jr(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),o.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),o}const gE=["get","getKey","getAll","getAllKeys","count"],vE=["put","add","delete","clear"],Eu=new Map;function nh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Eu.get(e))return Eu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=vE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gE.includes(n)))return;const s=async function(a,...o){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(o.shift())),(await Promise.all([l[n](...o),i&&u.done]))[0]};return Eu.set(e,s),s}dE(t=>({...t,get:(e,n,r)=>nh(e,n)||t.get(e,n,r),has:(e,n)=>!!nh(e,n)||t.has(e,n)}));const lg="@firebase/installations",pc="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg=1e4,fg=`w:${pc}`,dg="FIS_v2",yE="https://firebaseinstallations.googleapis.com/v1",_E=60*60*1e3,bE="installations",TE="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ln=new Ao(bE,TE,SE);function hg(t){return t instanceof ln&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg({projectId:t}){return`${yE}/projects/${t}/installations`}function mg(t){return{token:t.token,requestStatus:2,expiresIn:EE(t.expiresIn),creationTime:Date.now()}}async function gg(t,e){const r=(await e.json()).error;return Ln.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function vg({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function xE(t,{refreshToken:e}){const n=vg(t);return n.append("Authorization",wE(e)),n}async function yg(t){const e=await t();return e.status>=500&&e.status<600?t():e}function EE(t){return Number(t.replace("s","000"))}function wE(t){return`${dg} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CE({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=pg(t),i=vg(t),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={fid:n,authVersion:dg,appId:t.appId,sdkVersion:fg},o={method:"POST",headers:i,body:JSON.stringify(a)},u=await yg(()=>fetch(r,o));if(u.ok){const l=await u.json();return{fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:mg(l.authToken)}}else throw await gg("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=/^[cdef][\w-]{21}$/,yl="";function kE(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=PE(t);return IE.test(n)?n:yl}catch{return yl}}function PE(t){return AE(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=new Map;function Tg(t,e){const n=Io(t);Sg(n,e),OE(n,e)}function Sg(t,e){const n=bg.get(t);if(n)for(const r of n)r(e)}function OE(t,e){const n=RE();n&&n.postMessage({key:t,fid:e}),DE()}let xn=null;function RE(){return!xn&&"BroadcastChannel"in self&&(xn=new BroadcastChannel("[Firebase] FID Change"),xn.onmessage=t=>{Sg(t.data.key,t.data.fid)}),xn}function DE(){bg.size===0&&xn&&(xn.close(),xn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="firebase-installations-database",NE=1,Nn="firebase-installations-store";let wu=null;function mc(){return wu||(wu=mE(LE,NE,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Nn)}}})),wu}async function qa(t,e){const n=Io(t),i=(await mc()).transaction(Nn,"readwrite"),s=i.objectStore(Nn),a=await s.get(n);return await s.put(e,n),await i.done,(!a||a.fid!==e.fid)&&Tg(t,e.fid),e}async function xg(t){const e=Io(t),r=(await mc()).transaction(Nn,"readwrite");await r.objectStore(Nn).delete(e),await r.done}async function ko(t,e){const n=Io(t),i=(await mc()).transaction(Nn,"readwrite"),s=i.objectStore(Nn),a=await s.get(n),o=e(a);return o===void 0?await s.delete(n):await s.put(o,n),await i.done,o&&(!a||a.fid!==o.fid)&&Tg(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(t){let e;const n=await ko(t.appConfig,r=>{const i=ME(r),s=UE(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===yl?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function ME(t){const e=t||{fid:kE(),registrationStatus:0};return Eg(e)}function UE(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ln.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=FE(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:BE(t)}:{installationEntry:e}}async function FE(t,e){try{const n=await CE(t,e);return qa(t.appConfig,n)}catch(n){throw hg(n)&&n.customData.serverCode===409?await xg(t.appConfig):await qa(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function BE(t){let e=await ih(t.appConfig);for(;e.registrationStatus===1;)await _g(100),e=await ih(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await gc(t);return r||n}return e}function ih(t){return ko(t,e=>{if(!e)throw Ln.create("installation-not-found");return Eg(e)})}function Eg(t){return $E(t)?{fid:t.fid,registrationStatus:0}:t}function $E(t){return t.registrationStatus===1&&t.registrationTime+cg<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jE({appConfig:t,heartbeatServiceProvider:e},n){const r=HE(t,n),i=xE(t,n),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={installation:{sdkVersion:fg,appId:t.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},u=await yg(()=>fetch(r,o));if(u.ok){const l=await u.json();return mg(l)}else throw await gg("Generate Auth Token",u)}function HE(t,{fid:e}){return`${pg(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(t,e=!1){let n;const r=await ko(t.appConfig,s=>{if(!wg(s))throw Ln.create("not-registered");const a=s.authToken;if(!e&&zE(a))return s;if(a.requestStatus===1)return n=VE(t,e),s;{if(!navigator.onLine)throw Ln.create("app-offline");const o=GE(s);return n=WE(t,o),o}});return n?await n:r.authToken}async function VE(t,e){let n=await sh(t.appConfig);for(;n.authToken.requestStatus===1;)await _g(100),n=await sh(t.appConfig);const r=n.authToken;return r.requestStatus===0?vc(t,e):r}function sh(t){return ko(t,e=>{if(!wg(e))throw Ln.create("not-registered");const n=e.authToken;return XE(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function WE(t,e){try{const n=await jE(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await qa(t.appConfig,r),n}catch(n){if(hg(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await xg(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await qa(t.appConfig,r)}throw n}}function wg(t){return t!==void 0&&t.registrationStatus===2}function zE(t){return t.requestStatus===2&&!qE(t)}function qE(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+_E}function GE(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function XE(t){return t.requestStatus===1&&t.requestTime+cg<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KE(t){const e=t,{installationEntry:n,registrationPromise:r}=await gc(e);return r?r.catch(console.error):vc(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YE(t,e=!1){const n=t;return await JE(n),(await vc(n,e)).token}async function JE(t){const{registrationPromise:e}=await gc(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(t){if(!t||!t.options)throw Cu("App Configuration");if(!t.name)throw Cu("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Cu(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Cu(t){return Ln.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="installations",ZE="installations-internal",e1=t=>{const e=t.getProvider("app").getImmediate(),n=QE(e),r=Vs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},t1=t=>{const e=t.getProvider("app").getImmediate(),n=Vs(e,Cg).getImmediate();return{getId:()=>KE(n),getToken:i=>YE(n,i)}};function r1(){nn(new Pr(Cg,e1,"PUBLIC")),nn(new Pr(ZE,t1,"PRIVATE"))}r1();gr(lg,pc);gr(lg,pc,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga="analytics",n1="firebase_id",i1="origin",s1=60*1e3,a1="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yc="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot=new eg("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ht=new Ao("analytics","Analytics",o1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){if(!t.startsWith(yc)){const e=Ht.create("invalid-gtag-resource",{gtagURL:t});return Ot.warn(e.message),""}return t}function Ag(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function l1(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function c1(t,e){const n=l1("firebase-js-sdk-policy",{createScriptURL:u1}),r=document.createElement("script"),i=`${yc}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function f1(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function d1(t,e,n,r,i,s){const a=r[i];try{if(a)await e[a];else{const u=(await Ag(n)).find(l=>l.measurementId===i);u&&await e[u.appId]}}catch(o){Ot.error(o)}t("config",i,s)}async function h1(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const o=await Ag(n);for(const u of a){const l=o.find(f=>f.measurementId===u),c=l&&e[l.appId];if(c)s.push(c);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Ot.error(s)}}function p1(t,e,n,r){async function i(s,...a){try{if(s==="event"){const[o,u]=a;await h1(t,e,n,o,u)}else if(s==="config"){const[o,u]=a;await d1(t,e,n,r,o,u)}else if(s==="consent"){const[o]=a;t("consent","update",o)}else if(s==="get"){const[o,u,l]=a;t("get",o,u,l)}else if(s==="set"){const[o]=a;t("set",o)}else t(s,...a)}catch(o){Ot.error(o)}}return i}function m1(t,e,n,r,i){let s=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=p1(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function g1(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(yc)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=30,y1=1e3;class _1{constructor(e={},n=y1){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Ig=new _1;function b1(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function T1(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:b1(r)},s=a1.replace("{app-id}",n),a=await fetch(s,i);if(a.status!==200&&a.status!==304){let o="";try{const u=await a.json();!((e=u.error)===null||e===void 0)&&e.message&&(o=u.error.message)}catch{}throw Ht.create("config-fetch-failed",{httpStatus:a.status,responseMessage:o})}return a.json()}async function S1(t,e=Ig,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Ht.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ht.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new w1;return setTimeout(async()=>{o.abort()},n!==void 0?n:s1),kg({appId:r,apiKey:i,measurementId:s},a,o,e)}async function kg(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=Ig){var s;const{appId:a,measurementId:o}=t;try{await x1(r,e)}catch(u){if(o)return Ot.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:o};throw u}try{const u=await T1(t);return i.deleteThrottleMetadata(a),u}catch(u){const l=u;if(!E1(l)){if(i.deleteThrottleMetadata(a),o)return Ot.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:a,measurementId:o};throw u}const c=Number((s=l==null?void 0:l.customData)===null||s===void 0?void 0:s.httpStatus)===503?Gd(n,i.intervalMillis,v1):Gd(n,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(a,f),Ot.debug(`Calling attemptFetch again in ${c} millis`),kg(t,f,r,i)}}function x1(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Ht.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function E1(t){if(!(t instanceof ln)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class w1{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function C1(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,a=Object.assign(Object.assign({},r),{send_to:s});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(){if(Qm())try{await Zm()}catch(t){return Ot.warn(Ht.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ot.warn(Ht.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function I1(t,e,n,r,i,s,a){var o;const u=S1(t);u.then(h=>{n[h.measurementId]=h.appId,t.options.measurementId&&h.measurementId!==t.options.measurementId&&Ot.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>Ot.error(h)),e.push(u);const l=A1().then(h=>{if(h)return r.getId()}),[c,f]=await Promise.all([u,l]);g1(s)||c1(s,c.measurementId),i("js",new Date);const d=(o=a==null?void 0:a.config)!==null&&o!==void 0?o:{};return d[i1]="firebase",d.update=!0,f!=null&&(d[n1]=f),i("config",c.measurementId,d),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.app=e}_delete(){return delete ys[this.app.options.appId],Promise.resolve()}}let ys={},ah=[];const oh={};let Au="dataLayer",P1="gtag",uh,Pg,lh=!1;function O1(){const t=[];if(WS()&&t.push("This is a browser extension environment."),zS()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Ht.create("invalid-analytics-context",{errorInfo:e});Ot.warn(n.message)}}function R1(t,e,n){O1();const r=t.options.appId;if(!r)throw Ht.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ot.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ht.create("no-api-key");if(ys[r]!=null)throw Ht.create("already-exists",{id:r});if(!lh){f1(Au);const{wrappedGtag:s,gtagCore:a}=m1(ys,ah,oh,Au,P1);Pg=s,uh=a,lh=!0}return ys[r]=I1(t,ah,oh,e,uh,Au,n),new k1(t)}function D1(t=ig()){t=Ni(t);const e=Vs(t,Ga);return e.isInitialized()?e.getImmediate():L1(t)}function L1(t,e={}){const n=Vs(t,Ga);if(n.isInitialized()){const i=n.getImmediate();if(Wa(e,n.getOptions()))return i;throw Ht.create("already-initialized")}return n.initialize({options:e})}function N1(t,e,n,r){t=Ni(t),C1(Pg,ys[t.app.options.appId],e,n,r).catch(i=>Ot.error(i))}const ch="@firebase/analytics",fh="0.10.0";function M1(){nn(new Pr(Ga,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return R1(r,i,n)},"PUBLIC")),nn(new Pr("analytics-internal",t,"PRIVATE")),gr(ch,fh),gr(ch,fh,"esm2017");function t(e){try{const n=e.getProvider(Ga).getImmediate();return{logEvent:(r,i,s)=>N1(n,r,i,s)}}catch(n){throw Ht.create("interop-component-reg-failed",{reason:n})}}}M1();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="firebasestorage.googleapis.com",Rg="storageBucket",U1=2*60*1e3,F1=10*60*1e3,B1=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je extends ln{constructor(e,n,r=0){super(Iu(e),`Firebase Storage: ${n} (${Iu(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Iu(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var We;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(We||(We={}));function Iu(t){return"storage/"+t}function _c(){const t="An unknown error occurred, please check the error payload for server response.";return new Je(We.UNKNOWN,t)}function $1(t){return new Je(We.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function j1(t){return new Je(We.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function H1(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Je(We.UNAUTHENTICATED,t)}function V1(){return new Je(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function W1(t){return new Je(We.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Dg(){return new Je(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Lg(){return new Je(We.CANCELED,"User canceled the upload/download.")}function z1(t){return new Je(We.INVALID_URL,"Invalid URL '"+t+"'.")}function q1(t){return new Je(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function G1(){return new Je(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Rg+"' property when initializing the app?")}function Ng(){return new Je(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function X1(){return new Je(We.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function K1(){return new Je(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Y1(t){return new Je(We.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _l(t){return new Je(We.INVALID_ARGUMENT,t)}function Mg(){return new Je(We.APP_DELETED,"The Firebase app was deleted.")}function J1(t){return new Je(We.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _s(t,e){return new Je(We.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Qi(t){throw new Je(We.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=$t.makeFromUrl(e,n)}catch{return new $t(e,"")}if(r.path==="")return r;throw q1(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),u={bucket:1,path:3};function l(U){U.path_=decodeURIComponent(U.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),g={bucket:1,path:3},E=n===Og?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",x=new RegExp(`^https?://${E}/${i}/${S}`,"i"),$=[{regex:o,indices:u,postModify:s},{regex:h,indices:g,postModify:l},{regex:x,indices:{bucket:1,path:2},postModify:l}];for(let U=0;U<$.length;U++){const _e=$[U],re=_e.regex.exec(e);if(re){const Z=re[_e.indices.bucket];let H=re[_e.indices.path];H||(H=""),r=new $t(Z,H),_e.postModify(r);break}}if(r==null)throw z1(e);return r}}class Q1{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t,e,n){let r=1,i=null,s=null,a=!1,o=0;function u(){return o===2}let l=!1;function c(...S){l||(l=!0,e.apply(null,S))}function f(S){i=setTimeout(()=>{i=null,t(h,u())},S)}function d(){s&&clearTimeout(s)}function h(S,...x){if(l){d();return}if(S){d(),c.call(null,S,...x);return}if(u()||a){d(),c.call(null,S,...x);return}r<64&&(r*=2);let $;o===1?(o=2,$=0):$=(r+Math.random())*1e3,f($)}let g=!1;function E(S){g||(g=!0,d(),!l&&(i!==null?(S||(o=2),clearTimeout(i),f(0)):S||(o=1)))}return f(0),s=setTimeout(()=>{a=!0,E(!0)},n),E}function ew(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t){return t!==void 0}function rw(t){return typeof t=="function"}function nw(t){return typeof t=="object"&&!Array.isArray(t)}function Po(t){return typeof t=="string"||t instanceof String}function dh(t){return bc()&&t instanceof Blob}function bc(){return typeof Blob<"u"&&!VS()}function hh(t,e,n,r){if(r<e)throw _l(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw _l(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Ug(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(kn||(kn={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n,r,i,s,a,o,u,l,c,f,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,g)=>{this.resolve_=h,this.reject_=g,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ya(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const u=o.loaded,l=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===kn.NO_ERROR,u=s.getStatus();if(!o||Fg(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===kn.ABORT;r(!1,new ya(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new ya(l,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(o,o.getResponse());tw(u)?s(u):s()}catch(u){a(u)}else if(o!==null){const u=_c();u.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,u)):a(u)}else if(i.canceled){const u=this.appDelete_?Mg():Lg();a(u)}else{const u=Dg();a(u)}};this.canceled_?n(!1,new ya(!1,null,!0)):this.backoffId_=Z1(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ew(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ya{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function sw(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function aw(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ow(t,e){e&&(t["X-Firebase-GMPID"]=e)}function uw(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function lw(t,e,n,r,i,s,a=!0){const o=Ug(t.urlParams),u=t.url+o,l=Object.assign({},t.headers);return ow(l,e),sw(l,n),aw(l,s),uw(l,r),new iw(u,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fw(...t){const e=cw();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(bc())return new Blob(t);throw new Je(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function dw(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t){if(typeof atob>"u")throw Y1("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ku{constructor(e,n){this.data=e,this.contentType=n||null}}function pw(t,e){switch(t){case pr.RAW:return new ku(Bg(e));case pr.BASE64:case pr.BASE64URL:return new ku($g(t,e));case pr.DATA_URL:return new ku(gw(e),vw(e))}throw _c()}function Bg(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=t.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function mw(t){let e;try{e=decodeURIComponent(t)}catch{throw _s(pr.DATA_URL,"Malformed data URL.")}return Bg(e)}function $g(t,e){switch(t){case pr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw _s(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case pr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw _s(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=hw(e)}catch(i){throw i.message.includes("polyfill")?i:_s(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class jg{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw _s(pr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=yw(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function gw(t){const e=new jg(t);return e.base64?$g(pr.BASE64,e.rest):mw(e.rest)}function vw(t){return new jg(t).contentType}function yw(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){let r=0,i="";dh(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(dh(this.data_)){const r=this.data_,i=dw(r,e,n);return i===null?null:new qr(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new qr(r,!0)}}static getBlob(...e){if(bc()){const n=e.map(r=>r instanceof qr?r.data_:r);return new qr(fw.apply(null,n))}else{const n=e.map(a=>Po(a)?pw(pr.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)i[s++]=a[o]}),new qr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t){let e;try{e=JSON.parse(t)}catch{return null}return nw(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function bw(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Vg(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t,e){return e}class yt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Tw}}let _a=null;function Sw(t){return!Po(t)||t.length<2?t:Vg(t)}function Wg(){if(_a)return _a;const t=[];t.push(new yt("bucket")),t.push(new yt("generation")),t.push(new yt("metageneration")),t.push(new yt("name","fullPath",!0));function e(s,a){return Sw(a)}const n=new yt("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new yt("size");return i.xform=r,t.push(i),t.push(new yt("timeCreated")),t.push(new yt("updated")),t.push(new yt("md5Hash",null,!0)),t.push(new yt("cacheControl",null,!0)),t.push(new yt("contentDisposition",null,!0)),t.push(new yt("contentEncoding",null,!0)),t.push(new yt("contentLanguage",null,!0)),t.push(new yt("contentType",null,!0)),t.push(new yt("metadata","customMetadata",!0)),_a=t,_a}function xw(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new $t(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Ew(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return xw(r,t),r}function zg(t,e,n){const r=Hg(e);return r===null?null:Ew(t,r,n)}function ww(t,e,n,r){const i=Hg(e);if(i===null||!Po(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(l=>{const c=t.bucket,f=t.fullPath,d="/b/"+a(c)+"/o/"+a(f),h=Ws(d,n,r),g=Ug({alt:"media",token:l});return h+g})[0]}function qg(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Mi{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t){if(!t)throw _c()}function Tc(t,e){function n(r,i){const s=zg(t,i,e);return Cr(s!==null),s}return n}function Cw(t,e){function n(r,i){const s=zg(t,i,e);return Cr(s!==null),ww(s,i,t.host,t._protocol)}return n}function zs(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=V1():i=H1():n.getStatus()===402?i=j1(t.bucket):n.getStatus()===403?i=W1(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Gg(t){const e=zs(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=$1(t.path)),s.serverResponse=i.serverResponse,s}return n}function Aw(t,e,n){const r=e.fullServerUrl(),i=Ws(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new Mi(i,s,Tc(t,n),a);return o.errorHandler=Gg(e),o}function Iw(t,e,n){const r=e.fullServerUrl(),i=Ws(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new Mi(i,s,Cw(t,n),a);return o.errorHandler=Gg(e),o}function kw(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Xg(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=kw(null,e)),r}function Pw(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let $="";for(let U=0;U<2;U++)$=$+Math.random().toString().slice(2);return $}const u=o();a["Content-Type"]="multipart/related; boundary="+u;const l=Xg(e,r,i),c=qg(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=qr.getBlob(f,r,d);if(h===null)throw Ng();const g={name:l.fullPath},E=Ws(s,t.host,t._protocol),S="POST",x=t.maxUploadRetryTime,D=new Mi(E,S,Tc(t,n),x);return D.urlParams=g,D.headers=a,D.body=h.uploadData(),D.errorHandler=zs(e),D}class Xa{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Sc(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Cr(!1)}return Cr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Ow(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a=Xg(e,r,i),o={name:a.fullPath},u=Ws(s,t.host,t._protocol),l="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},f=qg(a,n),d=t.maxUploadRetryTime;function h(E){Sc(E);let S;try{S=E.getResponseHeader("X-Goog-Upload-URL")}catch{Cr(!1)}return Cr(Po(S)),S}const g=new Mi(u,l,h,d);return g.urlParams=o,g.headers=c,g.body=f,g.errorHandler=zs(e),g}function Rw(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(l){const c=Sc(l,["active","final"]);let f=null;try{f=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Cr(!1)}f||Cr(!1);const d=Number(f);return Cr(!isNaN(d)),new Xa(d,r.size(),c==="final")}const a="POST",o=t.maxUploadRetryTime,u=new Mi(n,a,s,o);return u.headers=i,u.errorHandler=zs(e),u}const ph=256*1024;function Dw(t,e,n,r,i,s,a,o){const u=new Xa(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw X1();const l=u.total-u.current;let c=l;i>0&&(c=Math.min(c,i));const f=u.current,d=f+c;let h="";c===0?h="finalize":l===c?h="upload, finalize":h="upload";const g={"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":`${u.current}`},E=r.slice(f,d);if(E===null)throw Ng();function S(U,_e){const re=Sc(U,["active","final"]),Z=u.current+c,H=r.size();let z;return re==="final"?z=Tc(e,s)(U,_e):z=null,new Xa(Z,H,re==="final",z)}const x="POST",D=e.maxUploadRetryTime,$=new Mi(n,x,S,D);return $.headers=g,$.body=E.uploadData(),$.progressCallback=o||null,$.errorHandler=zs(t),$}const Pt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Pu(t){switch(t){case"running":case"pausing":case"canceling":return Pt.RUNNING;case"paused":return Pt.PAUSED;case"success":return Pt.SUCCESS;case"canceled":return Pt.CANCELED;case"error":return Pt.ERROR;default:return Pt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n,r){if(rw(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Nw{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=kn.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=kn.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=kn.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Qi("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qi("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qi("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qi("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qi("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Mw extends Nw{initXhr(){this.xhr_.responseType="text"}}function ri(){return new Mw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Wg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(We.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Fg(i.status,[]))if(s)i=Dg();else{this.sleepTime=Math.max(this.sleepTime*2,B1),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(We.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Ow(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ri,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=Rw(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,ri,n,r);this._request=s,s.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=ph*this._chunkMultiplier,n=new Xa(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let a;try{a=Dw(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const o=this._ref.storage._makeRequest(a,ri,i,s,!1);this._request=o,o.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){ph*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Aw(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ri,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Pw(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ri,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Lg(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Pu(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new Lw(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Pu(this._state)){case Pt.SUCCESS:Gn(this._resolve.bind(null,this.snapshot))();break;case Pt.CANCELED:case Pt.ERROR:const n=this._reject;Gn(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Pu(this._state)){case Pt.RUNNING:case Pt.PAUSED:e.next&&Gn(e.next.bind(e,this.snapshot))();break;case Pt.SUCCESS:e.complete&&Gn(e.complete.bind(e))();break;case Pt.CANCELED:case Pt.ERROR:e.error&&Gn(e.error.bind(e,this._error))();break;default:e.error&&Gn(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){this._service=e,n instanceof $t?this._location=n:this._location=$t.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Mn(e,n)}get root(){const e=new $t(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Vg(this._location.path)}get storage(){return this._service}get parent(){const e=_w(this._location.path);if(e===null)return null;const n=new $t(this._location.bucket,e);return new Mn(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw J1(e)}}function Fw(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Uw(t,new qr(e),n)}function Bw(t){t._throwIfRoot("getDownloadURL");const e=Iw(t.storage,t._location,Wg());return t.storage.makeRequestWithTokens(e,ri).then(n=>{if(n===null)throw K1();return n})}function $w(t,e){const n=bw(t._location.path,e),r=new $t(t._location.bucket,n);return new Mn(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t){return/^[A-Za-z]+:\/\//.test(t)}function Hw(t,e){return new Mn(t,e)}function Kg(t,e){if(t instanceof xc){const n=t;if(n._bucket==null)throw G1();const r=new Mn(n,n._bucket);return e!=null?Kg(r,e):r}else return e!==void 0?$w(t,e):t}function Vw(t,e){if(e&&jw(e)){if(t instanceof xc)return Hw(t,e);throw _l("To use ref(service, url), the first argument must be a Storage instance.")}else return Kg(t,e)}function mh(t,e){const n=e==null?void 0:e[Rg];return n==null?null:$t.makeFromBucketSpec(n,t)}function Ww(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:HS(i,t.app.options.projectId))}class xc{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Og,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=U1,this._maxUploadRetryTime=F1,this._requests=new Set,i!=null?this._bucket=$t.makeFromBucketSpec(i,this._host):this._bucket=mh(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$t.makeFromBucketSpec(this._url,e):this._bucket=mh(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hh("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hh("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mn(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Q1(Mg());{const a=lw(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const gh="@firebase/storage",vh="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="storage";function zw(t,e,n){return t=Ni(t),Fw(t,e,n)}function qw(t){return t=Ni(t),Bw(t)}function Gw(t,e){return t=Ni(t),Vw(t,e)}function Xw(t=ig(),e){t=Ni(t);const r=Vs(t,Yg).getImmediate({identifier:e}),i=$S("storage");return i&&Kw(r,...i),r}function Kw(t,e,n,r={}){Ww(t,e,n,r)}function Yw(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new xc(n,r,i,e,Kx)}function Jw(){nn(new Pr(Yg,Yw,"PUBLIC").setMultipleInstances(!0)),gr(gh,vh,""),gr(gh,vh,"esm2017")}Jw();const Qw={apiKey:"AIzaSyDuDQ0DP-sR_pryjy7sDRYdkO2JvLh7VuY",authDomain:"vue-webcam-recorder.firebaseapp.com",projectId:"vue-webcam-recorder",storageBucket:"vue-webcam-recorder.appspot.com",messagingSenderId:"939233469597",appId:"1:939233469597:web:73ed17aa4027f4167b6074",measurementId:"G-Y2HK6BEPWB"},Jg=ng(Qw);D1(Jg);const Zw=Xw(Jg),eC=["aria-valuenow"],tC={class:"flex items-center h-full"},rC=Hs({__name:"progressbar",props:{color:String,percentage:Number,rounded:Boolean,indeterminate:Boolean},setup(t){return(e,n)=>(Ut(),Sr("div",{class:Es(["w-full bg-gray-200 h-4 relative overflow-hidden",[{"rounded-full":t.rounded},{indeterminate:t.indeterminate}]])},[ke("div",{class:Es(["h-full progressbar",[`bg-${t.color}-500`,{"absolute top-0":t.indeterminate},{"rounded-full":t.rounded}]]),role:"progressbar",style:vo({width:`${t.percentage}%`}),"aria-valuenow":t.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[ke("span",tC,[Tb(e.$slots,"default",{},void 0,!0)])],14,eC)],2))}});const nC=Um(rC,[["__scopeId","data-v-4d7d7689"]]);var sn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Oo(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var ls;typeof window<"u"?ls=window:typeof sn<"u"?ls=sn:typeof self<"u"?ls=self:ls={};var Ui=ls;const Qg=qs(Ui),iC={},sC=Object.freeze(Object.defineProperty({__proto__:null,default:iC},Symbol.toStringTag,{value:"Module"})),aC=Oo(sC);var yh=typeof sn<"u"?sn:typeof window<"u"?window:{},oC=aC,cs;typeof document<"u"?cs=document:(cs=yh["__GLOBAL_DOCUMENT_CACHE@4"],cs||(cs=yh["__GLOBAL_DOCUMENT_CACHE@4"]=oC));var uC=cs;function lC(t){return t.replace(/\n\r?\s*/g,"")}var cC=function(e){for(var n="",r=0;r<arguments.length;r++)n+=lC(e[r])+(arguments[r+1]||"");return n},fC=hC,dC=Object.prototype.toString;function hC(t){if(!t)return!1;var e=dC.call(t);return e==="[object Function]"||typeof t=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}var Ou=function(t){return t.replace(/^\s+|\s+$/g,"")},pC=function(t){return Object.prototype.toString.call(t)==="[object Array]"},mC=function(t){if(!t)return{};for(var e={},n=Ou(t).split(`
`),r=0;r<n.length;r++){var i=n[r],s=i.indexOf(":"),a=Ou(i.slice(0,s)).toLowerCase(),o=Ou(i.slice(s+1));typeof e[a]>"u"?e[a]=o:pC(e[a])?e[a].push(o):e[a]=[e[a],o]}return e},gC=yC,vC=Object.prototype.hasOwnProperty;function yC(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)vC.call(n,r)&&(t[r]=n[r])}return t}var Zg=Ui,_C=fC,bC=mC,TC=gC,SC=Qr;Qr.XMLHttpRequest=Zg.XMLHttpRequest||CC;Qr.XDomainRequest="withCredentials"in new Qr.XMLHttpRequest?Qr.XMLHttpRequest:Zg.XDomainRequest;xC(["get","put","post","patch","head","delete"],function(t){Qr[t==="delete"?"del":t]=function(e,n,r){return n=ev(e,n,r),n.method=t.toUpperCase(),tv(n)}});function xC(t,e){for(var n=0;n<t.length;n++)e(t[n])}function EC(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function ev(t,e,n){var r=t;return _C(e)?(n=e,typeof t=="string"&&(r={uri:t})):r=TC(e,{uri:t}),r.callback=n,r}function Qr(t,e,n){return e=ev(t,e,n),tv(e)}function tv(t){if(typeof t.callback>"u")throw new Error("callback argument missing");var e=!1,n=function($,U,_e){e||(e=!0,t.callback($,U,_e))};function r(){o.readyState===4&&setTimeout(a,0)}function i(){var D=void 0;if(o.response?D=o.response:D=o.responseText||wC(o),E)try{D=JSON.parse(D)}catch{}return D}function s(D){return clearTimeout(S),D instanceof Error||(D=new Error(""+(D||"Unknown XMLHttpRequest Error"))),D.statusCode=0,n(D,x)}function a(){if(!l){var D;clearTimeout(S),t.useXDR&&o.status===void 0?D=200:D=o.status===1223?204:o.status;var $=x,U=null;return D!==0?($={body:i(),statusCode:D,method:f,headers:{},url:c,rawRequest:o},o.getAllResponseHeaders&&($.headers=bC(o.getAllResponseHeaders()))):U=new Error("Internal XMLHttpRequest Error"),n(U,$,$.body)}}var o=t.xhr||null;o||(t.cors||t.useXDR?o=new Qr.XDomainRequest:o=new Qr.XMLHttpRequest);var u,l,c=o.url=t.uri||t.url,f=o.method=t.method||"GET",d=t.body||t.data,h=o.headers=t.headers||{},g=!!t.sync,E=!1,S,x={body:void 0,headers:{},statusCode:0,method:f,url:c,rawRequest:o};if("json"in t&&t.json!==!1&&(E=!0,h.accept||h.Accept||(h.Accept="application/json"),f!=="GET"&&f!=="HEAD"&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),d=JSON.stringify(t.json===!0?d:t.json))),o.onreadystatechange=r,o.onload=a,o.onerror=s,o.onprogress=function(){},o.onabort=function(){l=!0},o.ontimeout=s,o.open(f,c,!g,t.username,t.password),g||(o.withCredentials=!!t.withCredentials),!g&&t.timeout>0&&(S=setTimeout(function(){if(!l){l=!0,o.abort("timeout");var D=new Error("XMLHttpRequest timeout");D.code="ETIMEDOUT",s(D)}},t.timeout)),o.setRequestHeader)for(u in h)h.hasOwnProperty(u)&&o.setRequestHeader(u,h[u]);else if(t.headers&&!EC(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(o.responseType=t.responseType),"beforeSend"in t&&typeof t.beforeSend=="function"&&t.beforeSend(o),o.send(d||null),o}function wC(t){if(t.responseType==="document")return t.responseXML;var e=t.responseXML&&t.responseXML.documentElement.nodeName==="parsererror";return t.responseType===""&&!e?t.responseXML:null}function CC(){}var rv={exports:{}},Ec=Object.create||function(){function t(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function Ft(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}Ft.prototype=Ec(Error.prototype);Ft.prototype.constructor=Ft;Ft.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function wc(t){function e(r,i,s,a){return(r|0)*3600+(i|0)*60+(s|0)+(a|0)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function bs(){this.values=Ec(null)}bs.prototype={set:function(t,e){!this.get(t)&&e!==""&&(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var r=0;r<n.length;++r)if(e===n[r]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(t,e),!0):!1}};function fs(t,e,n,r){var i=r?t.split(r):[t];for(var s in i)if(typeof i[s]=="string"){var a=i[s].split(n);if(a.length===2){var o=a[0],u=a[1];e(o,u)}}}function AC(t,e,n){var r=t;function i(){var o=wc(t);if(o===null)throw new Ft(Ft.Errors.BadTimeStamp,"Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function s(o,u){var l=new bs;fs(o,function(c,f){switch(c){case"region":for(var d=n.length-1;d>=0;d--)if(n[d].id===f){l.set(c,n[d].region);break}break;case"vertical":l.alt(c,f,["rl","lr"]);break;case"line":var h=f.split(","),g=h[0];l.integer(c,g),l.percent(c,g)&&l.set("snapToLines",!1),l.alt(c,g,["auto"]),h.length===2&&l.alt("lineAlign",h[1],["start","middle","end"]);break;case"position":h=f.split(","),l.percent(c,h[0]),h.length===2&&l.alt("positionAlign",h[1],["start","middle","end"]);break;case"size":l.percent(c,f);break;case"align":l.alt(c,f,["start","middle","end","left","right"]);break}},/:/,/\s/),u.region=l.get("region",null),u.vertical=l.get("vertical",""),u.line=l.get("line","auto"),u.lineAlign=l.get("lineAlign","start"),u.snapToLines=l.get("snapToLines",!0),u.size=l.get("size",100),u.align=l.get("align","middle"),u.position=l.get("position",{start:0,left:0,middle:50,end:100,right:100},u.align),u.positionAlign=l.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},u.align)}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),t.substr(0,3)!=="-->")throw new Ft(Ft.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+r);t=t.substr(3),a(),e.endTime=i(),a(),s(t,e)}var IC={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},kC={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},PC={v:"title",lang:"lang"},_h={rt:"ruby"};function nv(t,e){function n(){if(!e)return null;function g(S){return e=e.substr(S.length),S}var E=e.match(/^([^<]*)(<[^>]*>?)?/);return g(E[1]?E[1]:E[2])}function r(g){return IC[g]}function i(g){for(;h=g.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)g=g.replace(h[0],r);return g}function s(g,E){return!_h[E.localName]||_h[E.localName]===g.localName}function a(g,E){var S=kC[g];if(!S)return null;var x=t.document.createElement(S);x.localName=S;var D=PC[g];return D&&E&&(x[D]=E.trim()),x}for(var o=t.document.createElement("div"),u=o,l,c=[];(l=n())!==null;){if(l[0]==="<"){if(l[1]==="/"){c.length&&c[c.length-1]===l.substr(2).replace(">","")&&(c.pop(),u=u.parentNode);continue}var f=wc(l.substr(1,l.length-2)),d;if(f){d=t.document.createProcessingInstruction("timestamp",f),u.appendChild(d);continue}var h=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h||(d=a(h[1],h[3]),!d)||!s(u,d))continue;h[2]&&(d.className=h[2].substr(1).replace("."," ")),c.push(h[1]),u.appendChild(d),u=d;continue}u.appendChild(t.document.createTextNode(i(l)))}return o}var bh=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function OC(t){for(var e=0;e<bh.length;e++){var n=bh[e];if(t>=n[0]&&t<=n[1])return!0}return!1}function RC(t){var e=[],n="",r;if(!t||!t.childNodes)return"ltr";function i(o,u){for(var l=u.childNodes.length-1;l>=0;l--)o.push(u.childNodes[l])}function s(o){if(!o||!o.length)return null;var u=o.pop(),l=u.textContent||u.innerText;if(l){var c=l.match(/^.*(\n|\r)/);return c?(o.length=0,c[0]):l}if(u.tagName==="ruby")return s(o);if(u.childNodes)return i(o,u),s(o)}for(i(e,t);n=s(e);)for(var a=0;a<n.length;a++)if(r=n.charCodeAt(a),OC(r))return"rtl";return"ltr"}function DC(t){if(typeof t.line=="number"&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,n=e.textTrackList,r=0,i=0;i<n.length&&n[i]!==e;i++)n[i].mode==="showing"&&r++;return++r*-1}function Ro(){}Ro.prototype.applyStyles=function(t,e){e=e||this.div;for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])};Ro.prototype.formatStyle=function(t,e){return t===0?0:t+e};function Ka(t,e,n){Ro.call(this),this.cue=e,this.cueDiv=nv(t,e.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=t.document.createElement("div"),r={direction:RC(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var i=0;switch(e.positionAlign){case"start":i=e.position;break;case"middle":i=e.position-e.size/2;break;case"end":i=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(s){this.applyStyles({top:this.formatStyle(s.top,"px"),bottom:this.formatStyle(s.bottom,"px"),left:this.formatStyle(s.left,"px"),right:this.formatStyle(s.right,"px"),height:this.formatStyle(s.height,"px"),width:this.formatStyle(s.width,"px")})}}Ka.prototype=Ec(Ro.prototype);Ka.prototype.constructor=Ka;function xt(t){var e,n,r,i;if(t.div){n=t.div.offsetHeight,r=t.div.offsetWidth,i=t.div.offsetTop;var s=(s=t.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();t=t.div.getBoundingClientRect(),e=s?Math.max(s[0]&&s[0].height||0,t.height/s.length):0}this.left=t.left,this.right=t.right,this.top=t.top||i,this.height=t.height||n,this.bottom=t.bottom||i+(t.height||n),this.width=t.width||r,this.lineHeight=e!==void 0?e:t.lineHeight}xt.prototype.move=function(t,e){switch(e=e!==void 0?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};xt.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top};xt.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1};xt.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right};xt.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}};xt.prototype.intersectPercentage=function(t){var e=Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left)),n=Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top)),r=e*n;return r/(this.height*this.width)};xt.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}};xt.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,n=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,r=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t;var i={left:t.left,right:t.right,top:t.top||r,height:t.height||e,bottom:t.bottom||r+(t.height||e),width:t.width||n};return i};function LC(t,e,n,r){function i(S,x){for(var D,$=new xt(S),U=1,_e=0;_e<x.length;_e++){for(;S.overlapsOppositeAxis(n,x[_e])||S.within(n)&&S.overlapsAny(r);)S.move(x[_e]);if(S.within(n))return S;var re=S.intersectPercentage(n);U>re&&(D=new xt(S),U=re),S=new xt($)}return D||$}var s=new xt(e),a=e.cue,o=DC(a),u=[];if(a.snapToLines){var l;switch(a.vertical){case"":u=["+y","-y"],l="height";break;case"rl":u=["+x","-x"],l="width";break;case"lr":u=["-x","+x"],l="width";break}var c=s.lineHeight,f=c*Math.round(o),d=n[l]+c,h=u[0];Math.abs(f)>d&&(f=f<0?-1:1,f*=Math.ceil(d/c)*c),o<0&&(f+=a.vertical===""?n.height:n.width,u=u.reverse()),s.move(h,f)}else{var g=s.lineHeight/n.height*100;switch(a.lineAlign){case"middle":o-=g/2;break;case"end":o-=g;break}switch(a.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}u=["+y","-x","+x","-y"],s=new xt(e)}var E=i(s,u);e.move(E.toCSSCompatValues(n))}function Fi(){}Fi.StringDecoder=function(){return{decode:function(t){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};Fi.convertCueToDOMTree=function(t,e){return!t||!e?null:nv(t,e)};var NC=.05,MC="sans-serif",UC="1.5%";Fi.processCues=function(t,e,n){if(!t||!e||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=t.document.createElement("div");r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin=UC,n.appendChild(r);function i(c){for(var f=0;f<c.length;f++)if(c[f].hasBeenReset||!c[f].displayState)return!0;return!1}if(!i(e)){for(var s=0;s<e.length;s++)r.appendChild(e[s].displayState);return}var a=[],o=xt.getSimpleBoxPosition(r),u=Math.round(o.height*NC*100)/100,l={font:u+"px "+MC};(function(){for(var c,f,d=0;d<e.length;d++)f=e[d],c=new Ka(t,f,l),r.appendChild(c.div),LC(t,c,o,a),f.displayState=c.div,a.push(xt.getSimpleBoxPosition(c))})()};Fi.Parser=function(t,e,n){n||(n=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]};Fi.Parser.prototype={reportOrThrowError:function(t){if(t instanceof Ft)this.onparsingerror&&this.onparsingerror(t);else throw t},parse:function(t){var e=this;t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));function n(){for(var c=e.buffer,f=0;f<c.length&&c[f]!=="\r"&&c[f]!==`
`;)++f;var d=c.substr(0,f);return c[f]==="\r"&&++f,c[f]===`
`&&++f,e.buffer=c.substr(f),d}function r(c){var f=new bs;if(fs(c,function(h,g){switch(h){case"id":f.set(h,g);break;case"width":f.percent(h,g);break;case"lines":f.integer(h,g);break;case"regionanchor":case"viewportanchor":var E=g.split(",");if(E.length!==2)break;var S=new bs;if(S.percent("x",E[0]),S.percent("y",E[1]),!S.has("x")||!S.has("y"))break;f.set(h+"X",S.get("x")),f.set(h+"Y",S.get("y"));break;case"scroll":f.alt(h,g,["up"]);break}},/=/,/\s/),f.has("id")){var d=new(e.vttjs.VTTRegion||e.window.VTTRegion);d.width=f.get("width",100),d.lines=f.get("lines",3),d.regionAnchorX=f.get("regionanchorX",0),d.regionAnchorY=f.get("regionanchorY",100),d.viewportAnchorX=f.get("viewportanchorX",0),d.viewportAnchorY=f.get("viewportanchorY",100),d.scroll=f.get("scroll",""),e.onregion&&e.onregion(d),e.regionList.push({id:f.get("id"),region:d})}}function i(c){var f=new bs;fs(c,function(d,h){switch(d){case"MPEGT":f.integer(d+"S",h);break;case"LOCA":f.set(d+"L",wc(h));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:f.get("MPEGTS"),LOCAL:f.get("LOCAL")})}function s(c){c.match(/X-TIMESTAMP-MAP/)?fs(c,function(f,d){switch(f){case"X-TIMESTAMP-MAP":i(d);break}},/=/):fs(c,function(f,d){switch(f){case"Region":r(d);break}},/:/)}try{var a;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;a=n();var o=a.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Ft(Ft.Errors.BadSignature);e.state="HEADER"}for(var u=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(u?u=!1:a=n(),e.state){case"HEADER":/:/.test(a)?s(a):a||(e.state="ID");continue;case"NOTE":a||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){e.state="NOTE";break}if(!a)continue;if(e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,""),e.state="CUE",a.indexOf("-->")===-1){e.cue.id=a;continue}case"CUE":try{AC(a,e.cue,e.regionList)}catch(c){e.reportOrThrowError(c),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var l=a.indexOf("-->")!==-1;if(!a||l&&(u=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=a;continue;case"BADCUE":a||(e.state="ID");continue}}}catch(c){e.reportOrThrowError(c),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL")throw new Ft(Ft.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var FC=Fi,BC="auto",$C={"":1,lr:1,rl:1},jC={start:1,middle:1,end:1,left:1,right:1};function HC(t){if(typeof t!="string")return!1;var e=$C[t.toLowerCase()];return e?t.toLowerCase():!1}function Ru(t){if(typeof t!="string")return!1;var e=jC[t.toLowerCase()];return e?t.toLowerCase():!1}function iv(t,e,n){this.hasBeenReset=!1;var r="",i=!1,s=t,a=e,o=n,u=null,l="",c=!0,f="auto",d="start",h=50,g="middle",E=50,S="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(x){r=""+x}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(x){i=!!x}},startTime:{enumerable:!0,get:function(){return s},set:function(x){if(typeof x!="number")throw new TypeError("Start time must be set to a number.");s=x,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(x){if(typeof x!="number")throw new TypeError("End time must be set to a number.");a=x,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(x){o=""+x,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(x){u=x,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(x){var D=HC(x);if(D===!1)throw new SyntaxError("An invalid or illegal string was specified.");l=D,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(x){c=!!x,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return f},set:function(x){if(typeof x!="number"&&x!==BC)throw new SyntaxError("An invalid number or illegal string was specified.");f=x,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return d},set:function(x){var D=Ru(x);if(!D)throw new SyntaxError("An invalid or illegal string was specified.");d=D,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return h},set:function(x){if(x<0||x>100)throw new Error("Position must be between 0 and 100.");h=x,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return g},set:function(x){var D=Ru(x);if(!D)throw new SyntaxError("An invalid or illegal string was specified.");g=D,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return E},set:function(x){if(x<0||x>100)throw new Error("Size must be between 0 and 100.");E=x,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return S},set:function(x){var D=Ru(x);if(!D)throw new SyntaxError("An invalid or illegal string was specified.");S=D,this.hasBeenReset=!0}}}),this.displayState=void 0}iv.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var VC=iv,WC={"":!0,up:!0};function zC(t){if(typeof t!="string")return!1;var e=WC[t.toLowerCase()];return e?t.toLowerCase():!1}function Zi(t){return typeof t=="number"&&t>=0&&t<=100}function qC(){var t=100,e=3,n=0,r=100,i=0,s=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(o){if(!Zi(o))throw new Error("Width must be between 0 and 100.");t=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(o){if(!Zi(o))throw new Error("RegionAnchorX must be between 0 and 100.");r=o}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(o){if(!Zi(o))throw new Error("RegionAnchorY must be between 0 and 100.");n=o}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(o){if(!Zi(o))throw new Error("ViewportAnchorY must be between 0 and 100.");s=o}},viewportAnchorX:{enumerable:!0,get:function(){return i},set:function(o){if(!Zi(o))throw new Error("ViewportAnchorX must be between 0 and 100.");i=o}},scroll:{enumerable:!0,get:function(){return a},set:function(o){var u=zC(o);if(u===!1)throw new SyntaxError("An invalid or illegal string was specified.");a=u}}})}var GC=qC,Or=Ui,Un=rv.exports={WebVTT:FC,VTTCue:VC,VTTRegion:GC};Or.vttjs=Un;Or.WebVTT=Un.WebVTT;var XC=Un.VTTCue,KC=Un.VTTRegion,YC=Or.VTTCue,JC=Or.VTTRegion;Un.shim=function(){Or.VTTCue=XC,Or.VTTRegion=KC};Un.restore=function(){Or.VTTCue=YC,Or.VTTRegion=JC};Or.VTTCue||Un.shim();var QC=rv.exports,ZC=eA;function eA(t,e){var n,r=null;try{n=JSON.parse(t,e)}catch(i){r=i}return[r,n]}var sv={exports:{}};(function(t,e){(function(n){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(u,l,c){if(c=c||{},u=u.trim(),l=l.trim(),!l){if(!c.alwaysNormalize)return u;var f=o.parseURL(u);if(!f)throw new Error("Error trying to parse base URL.");return f.path=o.normalizePath(f.path),o.buildURLFromParts(f)}var d=o.parseURL(l);if(!d)throw new Error("Error trying to parse relative URL.");if(d.scheme)return c.alwaysNormalize?(d.path=o.normalizePath(d.path),o.buildURLFromParts(d)):l;var h=o.parseURL(u);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&h.path[0]!=="/"){var g=i.exec(h.path);h.netLoc=g[1],h.path=g[2]}h.netLoc&&!h.path&&(h.path="/");var E={scheme:h.scheme,netLoc:d.netLoc,path:null,params:d.params,query:d.query,fragment:d.fragment};if(!d.netLoc&&(E.netLoc=h.netLoc,d.path[0]!=="/"))if(!d.path)E.path=h.path,d.params||(E.params=h.params,d.query||(E.query=h.query));else{var S=h.path,x=S.substring(0,S.lastIndexOf("/")+1)+d.path;E.path=o.normalizePath(x)}return E.path===null&&(E.path=c.alwaysNormalize?o.normalizePath(d.path):d.path),o.buildURLFromParts(E)},parseURL:function(u){var l=r.exec(u);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(s,"");u.length!==(u=u.replace(a,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};t.exports=o})()})(sv);var av=sv.exports;/*! @name m3u8-parser @version 4.4.0 @license Apache-2.0 */function bl(){return bl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bl.apply(this,arguments)}function Cc(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function tA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Ac=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(r,i){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(i)},e.off=function(r,i){if(!this.listeners[r])return!1;var s=this.listeners[r].indexOf(i);return this.listeners[r].splice(s,1),s>-1},e.trigger=function(r){var i=this.listeners[r],s,a,o;if(i)if(arguments.length===2)for(a=i.length,s=0;s<a;++s)i[s].call(this,arguments[1]);else for(o=Array.prototype.slice.call(arguments,1),a=i.length,s=0;s<a;++s)i[s].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(r){this.on("data",function(i){r.push(i)})},t}(),ov=function(t){Cc(e,t);function e(){var r;return r=t.call(this)||this,r.buffer="",r}var n=e.prototype;return n.push=function(i){var s;for(this.buffer+=i,s=this.buffer.indexOf(`
`);s>-1;s=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,s)),this.buffer=this.buffer.substring(s+1)},e}(Ac),rA=function(){var e="[^=]*",n='"[^"]*"|[^,]*',r="(?:"+e+")=(?:"+n+")";return new RegExp("(?:^|,)("+r+")")},es=function(e){for(var n=e.split(rA()),r={},i=n.length,s;i--;)n[i]!==""&&(s=/([^=]*)=(.*)/.exec(n[i]).slice(1),s[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),r[s[0]]=s[1]);return r},uv=function(t){Cc(e,t);function e(){var r;return r=t.call(this)||this,r.customParsers=[],r.tagMappers=[],r}var n=e.prototype;return n.push=function(i){var s=this,a,o;if(i=i.trim(),i.length!==0){if(i[0]!=="#"){this.trigger("data",{type:"uri",uri:i});return}var u=this.tagMappers.reduce(function(l,c){var f=c(i);return f===i?l:l.concat([f])},[i]);u.forEach(function(l){for(var c=0;c<s.customParsers.length;c++)if(s.customParsers[c].call(s,l))return;if(l.indexOf("#EXT")!==0){s.trigger("data",{type:"comment",text:l.slice(1)});return}if(l=l.replace("\r",""),a=/^#EXTM3U/.exec(l),a){s.trigger("data",{type:"tag",tagType:"m3u"});return}if(a=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(l),a){o={type:"tag",tagType:"inf"},a[1]&&(o.duration=parseFloat(a[1])),a[2]&&(o.title=a[2]),s.trigger("data",o);return}if(a=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(l),a){o={type:"tag",tagType:"targetduration"},a[1]&&(o.duration=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(l),a){o={type:"tag",tagType:"totalduration"},a[1]&&(o.duration=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(l),a){o={type:"tag",tagType:"version"},a[1]&&(o.version=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(l),a){o={type:"tag",tagType:"media-sequence"},a[1]&&(o.number=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(l),a){o={type:"tag",tagType:"discontinuity-sequence"},a[1]&&(o.number=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(l),a){o={type:"tag",tagType:"playlist-type"},a[1]&&(o.playlistType=a[1]),s.trigger("data",o);return}if(a=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(l),a){o={type:"tag",tagType:"byterange"},a[1]&&(o.length=parseInt(a[1],10)),a[2]&&(o.offset=parseInt(a[2],10)),s.trigger("data",o);return}if(a=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(l),a){o={type:"tag",tagType:"allow-cache"},a[1]&&(o.allowed=!/NO/.test(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-MAP:?(.*)$/.exec(l),a){if(o={type:"tag",tagType:"map"},a[1]){var f=es(a[1]);if(f.URI&&(o.uri=f.URI),f.BYTERANGE){var d=f.BYTERANGE.split("@"),h=d[0],g=d[1];o.byterange={},h&&(o.byterange.length=parseInt(h,10)),g&&(o.byterange.offset=parseInt(g,10))}}s.trigger("data",o);return}if(a=/^#EXT-X-STREAM-INF:?(.*)$/.exec(l),a){if(o={type:"tag",tagType:"stream-inf"},a[1]){if(o.attributes=es(a[1]),o.attributes.RESOLUTION){var E=o.attributes.RESOLUTION.split("x"),S={};E[0]&&(S.width=parseInt(E[0],10)),E[1]&&(S.height=parseInt(E[1],10)),o.attributes.RESOLUTION=S}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}s.trigger("data",o);return}if(a=/^#EXT-X-MEDIA:?(.*)$/.exec(l),a){o={type:"tag",tagType:"media"},a[1]&&(o.attributes=es(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-ENDLIST/.exec(l),a){s.trigger("data",{type:"tag",tagType:"endlist"});return}if(a=/^#EXT-X-DISCONTINUITY/.exec(l),a){s.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(a=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(l),a){o={type:"tag",tagType:"program-date-time"},a[1]&&(o.dateTimeString=a[1],o.dateTimeObject=new Date(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-KEY:?(.*)$/.exec(l),a){o={type:"tag",tagType:"key"},a[1]&&(o.attributes=es(a[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),s.trigger("data",o);return}if(a=/^#EXT-X-START:?(.*)$/.exec(l),a){o={type:"tag",tagType:"start"},a[1]&&(o.attributes=es(a[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),s.trigger("data",o);return}if(a=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(l),a){o={type:"tag",tagType:"cue-out-cont"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}if(a=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(l),a){o={type:"tag",tagType:"cue-out"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}if(a=/^#EXT-X-CUE-IN:?(.*)?$/.exec(l),a){o={type:"tag",tagType:"cue-in"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}s.trigger("data",{type:"tag",data:l.slice(4)})})}},n.addParser=function(i){var s=this,a=i.expression,o=i.customType,u=i.dataParser,l=i.segment;typeof u!="function"&&(u=function(f){return f}),this.customParsers.push(function(c){var f=a.exec(c);if(f)return s.trigger("data",{type:"custom",data:u(c),customType:o,segment:l}),!0})},n.addTagMapper=function(i){var s=i.expression,a=i.map,o=function(l){return s.test(l)?a(l):l};this.tagMappers.push(o)},e}(Ac);function nA(t){for(var e=Qg.atob(t||""),n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var iA=function(t){Cc(e,t);function e(){var r;r=t.call(this)||this,r.lineStream=new ov,r.parseStream=new uv,r.lineStream.pipe(r.parseStream);var i=tA(r),s=[],a={},o,u,l=function(){},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},f="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",d=0;return r.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},r.parseStream.on("data",function(h){var g,E;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=h.allowed,"allowed"in h||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var D={};"length"in h&&(a.byterange=D,D.length=h.length,"offset"in h||(this.trigger("info",{message:"defaulting offset to zero"}),h.offset=0)),"offset"in h&&(a.byterange=D,D.offset=h.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),h.duration>0&&(a.duration=h.duration),h.duration===0&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(!h.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(h.attributes.METHOD==="NONE"){u=null;return}if(!h.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(h.attributes.KEYFORMAT===f){var D=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(D.indexOf(h.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(h.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),h.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(h.attributes.KEYID&&h.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:h.attributes.KEYFORMAT,keyId:h.attributes.KEYID.substring(2)},pssh:nA(h.attributes.URI.split(",")[1])}};return}h.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),u={method:h.attributes.METHOD||"AES-128",uri:h.attributes.URI},typeof h.attributes.IV<"u"&&(u.iv=h.attributes.IV)},"media-sequence":function(){if(!isFinite(h.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+h.number});return}this.manifest.mediaSequence=h.number},"discontinuity-sequence":function(){if(!isFinite(h.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+h.number});return}this.manifest.discontinuitySequence=h.number,d=h.number},"playlist-type":function(){if(!/VOD|EVENT/.test(h.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+h.playlist});return}this.manifest.playlistType=h.playlistType},map:function(){o={},h.uri&&(o.uri=h.uri),h.byterange&&(o.byterange=h.byterange)},"stream-inf":function(){if(this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||c,!h.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}a.attributes||(a.attributes={}),bl(a.attributes,h.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,!(h.attributes&&h.attributes.TYPE&&h.attributes["GROUP-ID"]&&h.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var D=this.manifest.mediaGroups[h.attributes.TYPE];D[h.attributes["GROUP-ID"]]=D[h.attributes["GROUP-ID"]]||{},g=D[h.attributes["GROUP-ID"]],E={default:/yes/i.test(h.attributes.DEFAULT)},E.default?E.autoselect=!0:E.autoselect=/yes/i.test(h.attributes.AUTOSELECT),h.attributes.LANGUAGE&&(E.language=h.attributes.LANGUAGE),h.attributes.URI&&(E.uri=h.attributes.URI),h.attributes["INSTREAM-ID"]&&(E.instreamId=h.attributes["INSTREAM-ID"]),h.attributes.CHARACTERISTICS&&(E.characteristics=h.attributes.CHARACTERISTICS),h.attributes.FORCED&&(E.forced=/yes/i.test(h.attributes.FORCED)),g[h.attributes.NAME]=E},discontinuity:function(){d+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=h.dateTimeString,this.manifest.dateTimeObject=h.dateTimeObject),a.dateTimeString=h.dateTimeString,a.dateTimeObject=h.dateTimeObject},targetduration:function(){if(!isFinite(h.duration)||h.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+h.duration});return}this.manifest.targetDuration=h.duration},totalduration:function(){if(!isFinite(h.duration)||h.duration<0){this.trigger("warn",{message:"ignoring invalid total duration: "+h.duration});return}this.manifest.totalDuration=h.duration},start:function(){if(!h.attributes||isNaN(h.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:h.attributes["TIME-OFFSET"],precise:h.attributes.PRECISE}},"cue-out":function(){a.cueOut=h.data},"cue-out-cont":function(){a.cueOutCont=h.data},"cue-in":function(){a.cueIn=h.data}}[h.tagType]||l).call(i)},uri:function(){a.uri=h.uri,s.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),u&&(a.key=u),a.timeline=d,o&&(a.map=o),a={}},comment:function(){},custom:function(){h.segment?(a.custom=a.custom||{},a.custom[h.customType]=h.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[h.customType]=h.data)}})[h.type].call(i)}),r}var n=e.prototype;return n.push=function(i){this.lineStream.push(i)},n.end=function(){this.lineStream.push(`
`)},n.addParser=function(i){this.parseStream.addParser(i)},n.addTagMapper=function(i){this.parseStream.addTagMapper(i)},e}(Ac);const sA=Object.freeze(Object.defineProperty({__proto__:null,LineStream:ov,ParseStream:uv,Parser:iA},Symbol.toStringTag,{value:"Module"})),aA=Oo(sA);/*! @name @videojs/vhs-utils @version 1.3.0 @license MIT */function lv(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var Th=lv(av),Sh=lv(Ui),oA=function(e,n){return/^[a-z]+:/i.test(n)?n:(/\/\//i.test(e)||(e=Th.buildAbsoluteURL(Sh.location&&Sh.location.href||"",e)),Th.buildAbsoluteURL(e,n))},uA=oA;const Ic=qs(uA);/*! @name @videojs/vhs-utils @version 1.3.0 @license MIT */function lA(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var xh=lA(Ui),cA=function(e){return xh.atob?xh.atob(e):Buffer.from(e,"base64").toString("binary")};function fA(t){for(var e=cA(t),n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var dA=fA;const hA=qs(dA);var cv={},Tl=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Eh=new RegExp("[\\-\\.0-9"+Tl.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),wh=new RegExp("^"+Tl.source+Eh.source+"*(?::"+Tl.source+Eh.source+"*)?$"),ts=0,jr=1,Xn=2,rs=3,Kn=4,Yn=5,ns=6,ba=7;function fv(){}fv.prototype={parse:function(t,e,n){var r=this.domBuilder;r.startDocument(),dv(e,e={}),pA(t,e,n,r,this.errorHandler),r.endDocument()}};function pA(t,e,n,r,i){function s(he){if(he>65535){he-=65536;var pe=55296+(he>>10),be=56320+(he&1023);return String.fromCharCode(pe,be)}else return String.fromCharCode(he)}function a(he){var pe=he.slice(1,-1);return pe in n?n[pe]:pe.charAt(0)==="#"?s(parseInt(pe.substr(1).replace("x","0x"))):(i.error("entity not found:"+he),he)}function o(he){if(he>E){var pe=t.substring(E,he).replace(/&#?\w+;/g,a);d&&u(E),r.characters(pe,0,he-E),E=he}}function u(he,pe){for(;he>=c&&(pe=f.exec(t));)l=pe.index,c=l+pe[0].length,d.lineNumber++;d.columnNumber=he-l+1}for(var l=0,c=0,f=/.*(?:\r\n?|\n)|.*$/g,d=r.locator,h=[{currentNSMap:e}],g={},E=0;;){try{var S=t.indexOf("<",E);if(S<0){if(!t.substr(E).match(/^\s*$/)){var x=r.doc,D=x.createTextNode(t.substr(E));x.appendChild(D),r.currentElement=D}return}switch(S>E&&o(S),t.charAt(S+1)){case"/":var me=t.indexOf(">",S+3),$=t.substring(S+2,me),U=h.pop();me<0?($=t.substring(S+2).replace(/[\s<].*/,""),i.error("end tag name: "+$+" is not complete:"+U.tagName),me=S+1+$.length):$.match(/\s</)&&($=$.replace(/[\s<].*/,""),i.error("end tag name: "+$+" maybe not complete"),me=S+1+$.length);var _e=U.localNSMap,re=U.tagName==$,Z=re||U.tagName&&U.tagName.toLowerCase()==$.toLowerCase();if(Z){if(r.endElement(U.uri,U.localName,$),_e)for(var H in _e)r.endPrefixMapping(H);re||i.fatalError("end tag name: "+$+" is not match the current start tagName:"+U.tagName)}else h.push(U);me++;break;case"?":d&&u(S),me=_A(t,S,r);break;case"!":d&&u(S),me=yA(t,S,r,i);break;default:d&&u(S);var z=new hv,ie=h[h.length-1].currentNSMap,me=mA(t,S,z,ie,a,i),de=z.length;if(!z.closed&&vA(t,me,z.tagName,g)&&(z.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),d&&de){for(var V=Ch(d,{}),J=0;J<de;J++){var Te=z[J];u(Te.offset),Te.locator=Ch(d,{})}r.locator=V,Ah(z,r,ie)&&h.push(z),r.locator=d}else Ah(z,r,ie)&&h.push(z);z.uri==="http://www.w3.org/1999/xhtml"&&!z.closed?me=gA(t,me,z.tagName,a,r):me++}}catch(he){i.error("element parse error: "+he),me=-1}me>E?E=me:o(Math.max(S,E)+1)}}function Ch(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function mA(t,e,n,r,i,s){for(var a,o,u=++e,l=ts;;){var c=t.charAt(u);switch(c){case"=":if(l===jr)a=t.slice(e,u),l=rs;else if(l===Xn)l=rs;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(l===rs||l===jr)if(l===jr&&(s.warning('attribute value must after "="'),a=t.slice(e,u)),e=u+1,u=t.indexOf(c,e),u>0)o=t.slice(e,u).replace(/&#?\w+;/g,i),n.add(a,o,e-1),l=Yn;else throw new Error("attribute value no end '"+c+"' match");else if(l==Kn)o=t.slice(e,u).replace(/&#?\w+;/g,i),n.add(a,o,e),s.warning('attribute "'+a+'" missed start quot('+c+")!!"),e=u+1,l=Yn;else throw new Error('attribute value must after "="');break;case"/":switch(l){case ts:n.setTagName(t.slice(e,u));case Yn:case ns:case ba:l=ba,n.closed=!0;case Kn:case jr:case Xn:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),l==ts&&n.setTagName(t.slice(e,u)),u;case">":switch(l){case ts:n.setTagName(t.slice(e,u));case Yn:case ns:case ba:break;case Kn:case jr:o=t.slice(e,u),o.slice(-1)==="/"&&(n.closed=!0,o=o.slice(0,-1));case Xn:l===Xn&&(o=a),l==Kn?(s.warning('attribute "'+o+'" missed quot(")!!'),n.add(a,o.replace(/&#?\w+;/g,i),e)):((r[""]!=="http://www.w3.org/1999/xhtml"||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead!!'),n.add(o,o,e));break;case rs:throw new Error("attribute value missed!!")}return u;case"":c=" ";default:if(c<=" ")switch(l){case ts:n.setTagName(t.slice(e,u)),l=ns;break;case jr:a=t.slice(e,u),l=Xn;break;case Kn:var o=t.slice(e,u).replace(/&#?\w+;/g,i);s.warning('attribute "'+o+'" missed quot(")!!'),n.add(a,o,e);case Yn:l=ns;break}else switch(l){case Xn:n.tagName,(r[""]!=="http://www.w3.org/1999/xhtml"||!a.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),n.add(a,a,e),e=u,l=jr;break;case Yn:s.warning('attribute space is required"'+a+'"!!');case ns:l=jr,e=u;break;case rs:l=Kn,e=u;break;case ba:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function Ah(t,e,n){for(var r=t.tagName,i=null,f=t.length;f--;){var s=t[f],a=s.qName,o=s.value,d=a.indexOf(":");if(d>0)var u=s.prefix=a.slice(0,d),l=a.slice(d+1),c=u==="xmlns"&&l;else l=a,u=null,c=a==="xmlns"&&"";s.localName=l,c!==!1&&(i==null&&(i={},dv(n,n={})),n[c]=i[c]=o,s.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(c,o))}for(var f=t.length;f--;){s=t[f];var u=s.prefix;u&&(u==="xml"&&(s.uri="http://www.w3.org/XML/1998/namespace"),u!=="xmlns"&&(s.uri=n[u||""]))}var d=r.indexOf(":");d>0?(u=t.prefix=r.slice(0,d),l=t.localName=r.slice(d+1)):(u=null,l=t.localName=r);var h=t.uri=n[u||""];if(e.startElement(h,l,r,t),t.closed){if(e.endElement(h,l,r),i)for(u in i)e.endPrefixMapping(u)}else return t.currentNSMap=n,t.localNSMap=i,!0}function gA(t,e,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var s=t.indexOf("</"+n+">",e),a=t.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(n)?(i.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,r),i.characters(a,0,a.length),s)}return e+1}function vA(t,e,n,r){var i=r[n];return i==null&&(i=t.lastIndexOf("</"+n+">"),i<e&&(i=t.lastIndexOf("</"+n)),r[n]=i),i<e}function dv(t,e){for(var n in t)e[n]=t[n]}function yA(t,e,n,r){var i=t.charAt(e+2);switch(i){case"-":if(t.charAt(e+3)==="-"){var s=t.indexOf("-->",e+4);return s>e?(n.comment(t,e+4,s-e-4),s+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var s=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,s-e-9),n.endCDATA(),s+3}var a=bA(t,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var u=a[1][0],l=o>3&&/^public$/i.test(a[2][0])&&a[3][0],c=o>4&&a[4][0],f=a[o-1];return n.startDTD(u,l&&l.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),f.index+f[0].length}}return-1}function _A(t,e,n){var r=t.indexOf("?>",e);if(r){var i=t.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function hv(t){}hv.prototype={setTagName:function(t){if(!wh.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},add:function(t,e,n){if(!wh.test(t))throw new Error("invalid attribute:"+t);this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function Ta(t,e){return t.__proto__=e,t}Ta({},Ta.prototype)instanceof Ta||(Ta=function(t,e){function n(){}n.prototype=e,n=new n;for(e in t)n[e]=t[e];return n});function bA(t,e){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(t);n=i.exec(t);)if(r.push(n),n[1])return r}cv.XMLReader=fv;var kc={};function Gs(t,e){for(var n in t)e[n]=t[n]}function Lt(t,e){var n=t.prototype;if(Object.create){var r=Object.create(e.prototype);n.__proto__=r}if(!(n instanceof e)){let s=function(){};var i=s;s.prototype=e.prototype,s=new s,Gs(n,s),t.prototype=n=s}n.constructor!=t&&(typeof t!="function"&&console.error("unknow Class:"+t),n.constructor=t)}var TA="http://www.w3.org/1999/xhtml",Nt={},vr=Nt.ELEMENT_NODE=1,Ti=Nt.ATTRIBUTE_NODE=2,Ya=Nt.TEXT_NODE=3,pv=Nt.CDATA_SECTION_NODE=4,mv=Nt.ENTITY_REFERENCE_NODE=5,SA=Nt.ENTITY_NODE=6,gv=Nt.PROCESSING_INSTRUCTION_NODE=7,vv=Nt.COMMENT_NODE=8,yv=Nt.DOCUMENT_NODE=9,_v=Nt.DOCUMENT_TYPE_NODE=10,Rr=Nt.DOCUMENT_FRAGMENT_NODE=11,xA=Nt.NOTATION_NODE=12,gt={},ot={};gt.INDEX_SIZE_ERR=(ot[1]="Index size error",1);gt.DOMSTRING_SIZE_ERR=(ot[2]="DOMString size error",2);var EA=gt.HIERARCHY_REQUEST_ERR=(ot[3]="Hierarchy request error",3);gt.WRONG_DOCUMENT_ERR=(ot[4]="Wrong document",4);gt.INVALID_CHARACTER_ERR=(ot[5]="Invalid character",5);gt.NO_DATA_ALLOWED_ERR=(ot[6]="No data allowed",6);gt.NO_MODIFICATION_ALLOWED_ERR=(ot[7]="No modification allowed",7);var wA=gt.NOT_FOUND_ERR=(ot[8]="Not found",8);gt.NOT_SUPPORTED_ERR=(ot[9]="Not supported",9);var Ih=gt.INUSE_ATTRIBUTE_ERR=(ot[10]="Attribute in use",10);gt.INVALID_STATE_ERR=(ot[11]="Invalid state",11);gt.SYNTAX_ERR=(ot[12]="Syntax error",12);gt.INVALID_MODIFICATION_ERR=(ot[13]="Invalid modification",13);gt.NAMESPACE_ERR=(ot[14]="Invalid namespace",14);gt.INVALID_ACCESS_ERR=(ot[15]="Invalid access",15);function Si(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,ot[t]),this.message=ot[t],Error.captureStackTrace&&Error.captureStackTrace(this,Si);return n.code=t,e&&(this.message=this.message+": "+e),n}Si.prototype=Error.prototype;Gs(gt,Si);function Zr(){}Zr.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var n=[],r=0;r<this.length;r++)ii(this[r],n,t,e);return n.join("")}};function Rs(t,e){this._node=t,this._refresh=e,Pc(this)}function Pc(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var n=t._refresh(t._node);Pv(t,"length",n.length),Gs(n,t),t._inc=e}}Rs.prototype.item=function(t){return Pc(this),this[t]};Lt(Rs,Zr);function Ja(){}function bv(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function kh(t,e,n,r){if(r?e[bv(e,r)]=n:e[e.length++]=n,t){n.ownerElement=t;var i=t.ownerDocument;i&&(r&&Sv(i,t,r),CA(i,t,n))}}function Ph(t,e,n){var r=bv(e,n);if(r>=0){for(var i=e.length-1;r<i;)e[r]=e[++r];if(e.length=i,t){var s=t.ownerDocument;s&&(Sv(s,t,n),n.ownerElement=null)}}else throw Si(wA,new Error(t.tagName+"@"+n))}Ja.prototype={length:0,item:Zr.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new Si(Ih);var n=this.getNamedItem(t.nodeName);return kh(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e=t.ownerElement,n;if(e&&e!=this._ownerElement)throw new Si(Ih);return n=this.getNamedItemNS(t.namespaceURI,t.localName),kh(this._ownerElement,this,t,n),n},removeNamedItem:function(t){var e=this.getNamedItem(t);return Ph(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return Ph(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var r=this[n];if(r.localName==e&&r.namespaceURI==t)return r}return null}};function Tv(t){if(this._features={},t)for(var e in t)this._features=t[e]}Tv.prototype={hasFeature:function(t,e){var n=this._features[t.toLowerCase()];return!!(n&&(!e||e in n))},createDocument:function(t,e,n){var r=new Xs;if(r.implementation=this,r.childNodes=new Zr,r.doctype=n,n&&r.appendChild(n),e){var i=r.createElementNS(t,e);r.appendChild(i)}return r},createDocumentType:function(t,e,n){var r=new Nc;return r.name=t,r.nodeName=t,r.publicId=e,r.systemId=n,r}};function At(){}At.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return Ev(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return xv(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return Sl(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==Ya&&t.nodeType==Ya?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n){for(var r in n)if(n[r]==t)return r}e=e.nodeType==Ti?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&t in n)return n[t];e=e.nodeType==Ti?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function Oh(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}Gs(Nt,At);Gs(Nt,At.prototype);function Qa(t,e){if(e(t))return!0;if(t=t.firstChild)do if(Qa(t,e))return!0;while(t=t.nextSibling)}function Xs(){}function CA(t,e,n){t&&t._inc++;var r=n.namespaceURI;r=="http://www.w3.org/2000/xmlns/"&&(e._nsMap[n.prefix?n.localName:""]=n.value)}function Sv(t,e,n,r){t&&t._inc++;var i=n.namespaceURI;i=="http://www.w3.org/2000/xmlns/"&&delete e._nsMap[n.prefix?n.localName:""]}function Oc(t,e,n){if(t&&t._inc){t._inc++;var r=e.childNodes;if(n)r[r.length++]=n;else{for(var i=e.firstChild,s=0;i;)r[s++]=i,i=i.nextSibling;r.length=s}}}function xv(t,e){var n=e.previousSibling,r=e.nextSibling;return n?n.nextSibling=r:t.firstChild=r,r?r.previousSibling=n:t.lastChild=n,Oc(t.ownerDocument,t),e}function Ev(t,e,n){var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===Rr){var i=e.firstChild;if(i==null)return e;var s=e.lastChild}else i=s=e;var a=n?n.previousSibling:t.lastChild;i.previousSibling=a,s.nextSibling=n,a?a.nextSibling=i:t.firstChild=i,n==null?t.lastChild=s:n.previousSibling=s;do i.parentNode=t;while(i!==s&&(i=i.nextSibling));return Oc(t.ownerDocument||t,t),e.nodeType==Rr&&(e.firstChild=e.lastChild=null),e}function AA(t,e){var n=e.parentNode;if(n){var r=t.lastChild;n.removeChild(e);var r=t.lastChild}var r=t.lastChild;return e.parentNode=t,e.previousSibling=r,e.nextSibling=null,r?r.nextSibling=e:t.firstChild=e,t.lastChild=e,Oc(t.ownerDocument,t,e),e}Xs.prototype={nodeName:"#document",nodeType:yv,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==Rr){for(var n=t.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,e),n=r}return t}return this.documentElement==null&&t.nodeType==vr&&(this.documentElement=t),Ev(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),xv(this,t)},importNode:function(t,e){return kv(this,t,e)},getElementById:function(t){var e=null;return Qa(this.documentElement,function(n){if(n.nodeType==vr&&n.getAttribute("id")==t)return e=n,!0}),e},createElement:function(t){var e=new xi;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.childNodes=new Zr;var n=e.attributes=new Ja;return n._ownerElement=e,e},createDocumentFragment:function(){var t=new Do;return t.ownerDocument=this,t.childNodes=new Zr,t},createTextNode:function(t){var e=new Rc;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new Dc;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new Lc;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new Uc;return n.ownerDocument=this,n.tagName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new Za;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new Mc;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new xi,r=e.split(":"),i=n.attributes=new Ja;return n.childNodes=new Zr,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,r.length==2?(n.prefix=r[0],n.localName=r[1]):n.localName=e,i._ownerElement=n,n},createAttributeNS:function(t,e){var n=new Za,r=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,r.length==2?(n.prefix=r[0],n.localName=r[1]):n.localName=e,n}};Lt(Xs,At);function xi(){this._nsMap={}}xi.prototype={nodeType:vr,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===Rr?this.insertBefore(t,null):AA(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var r=this.ownerDocument.createAttributeNS(t,e);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new Rs(this,function(e){var n=[];return Qa(e,function(r){r!==e&&r.nodeType==vr&&(t==="*"||r.tagName==t)&&n.push(r)}),n})},getElementsByTagNameNS:function(t,e){return new Rs(this,function(n){var r=[];return Qa(n,function(i){i!==n&&i.nodeType===vr&&(t==="*"||i.namespaceURI===t)&&(e==="*"||i.localName==e)&&r.push(i)}),r})}};Xs.prototype.getElementsByTagName=xi.prototype.getElementsByTagName;Xs.prototype.getElementsByTagNameNS=xi.prototype.getElementsByTagNameNS;Lt(xi,At);function Za(){}Za.prototype.nodeType=Ti;Lt(Za,At);function Ks(){}Ks.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(ot[EA])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){var r=this.data.substring(0,t),i=this.data.substring(t+e);n=r+n+i,this.nodeValue=this.data=n,this.length=n.length}};Lt(Ks,At);function Rc(){}Rc.prototype={nodeName:"#text",nodeType:Ya,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};Lt(Rc,Ks);function Dc(){}Dc.prototype={nodeName:"#comment",nodeType:vv};Lt(Dc,Ks);function Lc(){}Lc.prototype={nodeName:"#cdata-section",nodeType:pv};Lt(Lc,Ks);function Nc(){}Nc.prototype.nodeType=_v;Lt(Nc,At);function wv(){}wv.prototype.nodeType=xA;Lt(wv,At);function Cv(){}Cv.prototype.nodeType=SA;Lt(Cv,At);function Mc(){}Mc.prototype.nodeType=mv;Lt(Mc,At);function Do(){}Do.prototype.nodeName="#document-fragment";Do.prototype.nodeType=Rr;Lt(Do,At);function Uc(){}Uc.prototype.nodeType=gv;Lt(Uc,At);function Av(){}Av.prototype.serializeToString=function(t,e,n){return Iv.call(t,e,n)};At.prototype.toString=Iv;function Iv(t,e){var n=[],r=this.nodeType==9?this.documentElement:this,i=r.prefix,s=r.namespaceURI;if(s&&i==null){var i=r.lookupPrefix(s);if(i==null)var a=[{namespace:s,prefix:null}]}return ii(this,n,t,e,a),n.join("")}function Rh(t,e,n){var r=t.prefix||"",i=t.namespaceURI;if(!r&&!i||r==="xml"&&i==="http://www.w3.org/XML/1998/namespace"||i=="http://www.w3.org/2000/xmlns/")return!1;for(var s=n.length;s--;){var a=n[s];if(a.prefix==r)return a.namespace!=i}return!0}function ii(t,e,n,r,i){if(r)if(t=r(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case vr:i||(i=[]),i.length;var s=t.attributes,a=s.length,h=t.firstChild,o=t.tagName;n=TA===t.namespaceURI||n,e.push("<",o);for(var u=0;u<a;u++){var l=s.item(u);l.prefix=="xmlns"?i.push({prefix:l.localName,namespace:l.value}):l.nodeName=="xmlns"&&i.push({prefix:"",namespace:l.value})}for(var u=0;u<a;u++){var l=s.item(u);if(Rh(l,n,i)){var c=l.prefix||"",f=l.namespaceURI,d=c?" xmlns:"+c:" xmlns";e.push(d,'="',f,'"'),i.push({prefix:c,namespace:f})}ii(l,e,n,r,i)}if(Rh(t,n,i)){var c=t.prefix||"",f=t.namespaceURI,d=c?" xmlns:"+c:" xmlns";e.push(d,'="',f,'"'),i.push({prefix:c,namespace:f})}if(h||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),n&&/^script$/i.test(o))for(;h;)h.data?e.push(h.data):ii(h,e,n,r,i),h=h.nextSibling;else for(;h;)ii(h,e,n,r,i),h=h.nextSibling;e.push("</",o,">")}else e.push("/>");return;case yv:case Rr:for(var h=t.firstChild;h;)ii(h,e,n,r,i),h=h.nextSibling;return;case Ti:return e.push(" ",t.name,'="',t.value.replace(/[<&"]/g,Oh),'"');case Ya:return e.push(t.data.replace(/[<&]/g,Oh));case pv:return e.push("<![CDATA[",t.data,"]]>");case vv:return e.push("<!--",t.data,"-->");case _v:var g=t.publicId,E=t.systemId;if(e.push("<!DOCTYPE ",t.name),g)e.push(' PUBLIC "',g),E&&E!="."&&e.push('" "',E),e.push('">');else if(E&&E!=".")e.push(' SYSTEM "',E,'">');else{var S=t.internalSubset;S&&e.push(" [",S,"]"),e.push(">")}return;case gv:return e.push("<?",t.target," ",t.data,"?>");case mv:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function kv(t,e,n){var r;switch(e.nodeType){case vr:r=e.cloneNode(!1),r.ownerDocument=t;case Rr:break;case Ti:n=!0;break}if(r||(r=e.cloneNode(!1)),r.ownerDocument=t,r.parentNode=null,n)for(var i=e.firstChild;i;)r.appendChild(kv(t,i,n)),i=i.nextSibling;return r}function Sl(t,e,n){var r=new e.constructor;for(var i in e){var s=e[i];typeof s!="object"&&s!=r[i]&&(r[i]=s)}switch(e.childNodes&&(r.childNodes=new Zr),r.ownerDocument=t,r.nodeType){case vr:var a=e.attributes,o=r.attributes=new Ja,u=a.length;o._ownerElement=r;for(var l=0;l<u;l++)r.setAttributeNode(Sl(t,a.item(l),!0));break;case Ti:n=!0}if(n)for(var c=e.firstChild;c;)r.appendChild(Sl(t,c,n)),c=c.nextSibling;return r}function Pv(t,e,n){t[e]=n}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case vr:case Rr:var n=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}};var JR=t;Object.defineProperty(Rs.prototype,"length",{get:function(){return Pc(this),this.$$length}}),Object.defineProperty(At.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case vr:case Rr:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Pv=function(e,n,r){e["$$"+n]=r}}}catch{}kc.DOMImplementation=Tv;kc.XMLSerializer=Av;function Ov(t){this.options=t||{locator:{}}}Ov.prototype.parseFromString=function(t,e){var n=this.options,r=new kA,i=n.domBuilder||new Lo,s=n.errorHandler,a=n.locator,o=n.xmlns||{},u={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&i.setDocumentLocator(a),r.errorHandler=IA(s,i,a),r.domBuilder=n.domBuilder||i,/\/x?html?$/.test(e)&&(u.nbsp=" ",u.copy="©",o[""]="http://www.w3.org/1999/xhtml"),o.xml=o.xml||"http://www.w3.org/XML/1998/namespace",t?r.parse(t,o,u):r.errorHandler.error("invalid doc source"),i.doc};function IA(t,e,n){if(!t){if(e instanceof Lo)return e;t=e}var r={},i=t instanceof Function;n=n||{};function s(a){var o=t[a];!o&&i&&(o=t.length==2?function(u){t(a,u)}:t),r[a]=o&&function(u){o("[xmldom "+a+"]	"+u+Ra(n))}||function(){}}return s("warning"),s("error"),s("fatalError"),r}function Lo(){this.cdata=!1}function Jn(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}Lo.prototype={startDocument:function(){this.doc=new PA().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var i=this.doc,s=i.createElementNS(t,n||e),a=r.length;Sa(this,s),this.currentElement=s,this.locator&&Jn(this.locator,s);for(var o=0;o<a;o++){var t=r.getURI(o),u=r.getValue(o),n=r.getQName(o),l=i.createAttributeNS(t,n);this.locator&&Jn(r.getLocator(o),l),l.value=l.nodeValue=u,s.setAttributeNode(l)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&Jn(this.locator,n),Sa(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=Dh.apply(this,arguments),t){if(this.cdata)var r=this.doc.createCDATASection(t);else var r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&Jn(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=Dh.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&Jn(this.locator,r),Sa(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(t,e,n);this.locator&&Jn(this.locator,i),Sa(this,i)}},warning:function(t){console.warn("[xmldom warning]	"+t,Ra(this.locator))},error:function(t){console.error("[xmldom error]	"+t,Ra(this.locator))},fatalError:function(t){throw console.error("[xmldom fatalError]	"+t,Ra(this.locator)),t}};function Ra(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function Dh(t,e,n){return typeof t=="string"?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){Lo.prototype[t]=function(){return null}});function Sa(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}var kA=cv.XMLReader,PA=kc.DOMImplementation,OA=Ov;/*! @name mpd-parser @version 0.10.0 @license Apache-2.0 */var RA="0.10.0",Lh=function(e){return!!e&&typeof e=="object"},Vt=function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.reduce(function(i,s){return Object.keys(s).forEach(function(a){Array.isArray(i[a])&&Array.isArray(s[a])?i[a]=i[a].concat(s[a]):Lh(i[a])&&Lh(s[a])?i[a]=t(i[a],s[a]):i[a]=s[a]}),i},{})},DA=function(e){return Object.keys(e).map(function(n){return e[n]})},LA=function(e,n){for(var r=[],i=e;i<n;i++)r.push(i);return r},No=function(e){return e.reduce(function(n,r){return n.concat(r)},[])},Rv=function(e){if(!e.length)return[];for(var n=[],r=0;r<e.length;r++)n.push(e[r]);return n},NA=function(e,n){return e.reduce(function(r,i,s){return i[n]&&r.push(s),r},[])},Ei={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},Ds=function(e){var n=e.baseUrl,r=n===void 0?"":n,i=e.source,s=i===void 0?"":i,a=e.range,o=a===void 0?"":a,u=e.indexRange,l=u===void 0?"":u,c={uri:s,resolvedUri:Ic(r||"",s)};if(o||l){var f=o||l,d=f.split("-"),h=parseInt(d[0],10),g=parseInt(d[1],10);c.byterange={length:g-h+1,offset:h}}return c},MA=function(e){var n=e.offset+e.length-1;return e.offset+"-"+n},UA={static:function(e){var n=e.duration,r=e.timescale,i=r===void 0?1:r,s=e.sourceDuration;return{start:0,end:Math.ceil(s/(n/i))}},dynamic:function(e){var n=e.NOW,r=e.clientOffset,i=e.availabilityStartTime,s=e.timescale,a=s===void 0?1:s,o=e.duration,u=e.start,l=u===void 0?0:u,c=e.minimumUpdatePeriod,f=c===void 0?0:c,d=e.timeShiftBufferDepth,h=d===void 0?1/0:d,g=(n+r)/1e3,E=i+l,S=g+f,x=S-E,D=Math.ceil(x*a/o),$=Math.floor((g-E-h)*a/o),U=Math.floor((g-E)*a/o);return{start:Math.max(0,$),end:Math.min(D,U)}}},FA=function(e){return function(n,r){var i=e.duration,s=e.timescale,a=s===void 0?1:s,o=e.periodIndex,u=e.startNumber,l=u===void 0?1:u;return{number:l+n,duration:i/a,timeline:o,time:r*i}}},Fc=function(e){var n=e.type,r=n===void 0?"static":n,i=e.duration,s=e.timescale,a=s===void 0?1:s,o=e.sourceDuration,u=UA[r](e),l=u.start,c=u.end,f=LA(l,c).map(FA(e));if(r==="static"){var d=f.length-1;f[d].duration=o-i/a*d}return f},Dv=function(e){var n=e.baseUrl,r=e.initialization,i=r===void 0?{}:r,s=e.sourceDuration,a=e.timescale,o=a===void 0?1:a,u=e.indexRange,l=u===void 0?"":u,c=e.duration;if(!n)throw new Error(Ei.NO_BASE_URL);var f=Ds({baseUrl:n,source:i.sourceURL,range:i.range}),d=Ds({baseUrl:n,source:n,indexRange:l});if(d.map=f,c){var h=Fc(e);h.length&&(d.duration=h[0].duration,d.timeline=h[0].timeline)}else s&&(d.duration=s/o,d.timeline=0);return d.number=0,[d]},BA=function(e,n,r){for(var i=e.sidx.map?e.sidx.map:null,s=e.sidx.duration,a=e.timeline||0,o=e.sidx.byterange,u=o.offset+o.length,l=n.timescale,c=n.references.filter(function(_e){return _e.referenceType!==1}),f=[],d=u+n.firstOffset,h=0;h<c.length;h++){var g=n.references[h],E=g.referencedSize,S=g.subsegmentDuration,x=d+E-1,D=d+"-"+x,$={baseUrl:r,timescale:l,timeline:a,periodIndex:a,duration:S,sourceDuration:s,indexRange:D},U=Dv($)[0];i&&(U.map=i),f.push(U),d+=E}return e.segments=f,e},Nh=function(e){var n=DA(e.reduce(function(r,i){var s=i.attributes.id+(i.attributes.lang||"");if(r[s]){var a;i.segments[0]&&(i.segments[0].discontinuity=!0),(a=r[s].segments).push.apply(a,i.segments),i.attributes.contentProtection&&(r[s].attributes.contentProtection=i.attributes.contentProtection)}else r[s]=i;return r},{}));return n.map(function(r){return r.discontinuityStarts=NA(r.segments,"discontinuity"),r})},Bc=function(e,n){if(n===void 0&&(n={}),!Object.keys(n).length)return e;for(var r in e){var i=e[r];if(i.sidx){var s=i.sidx.uri+"-"+MA(i.sidx.byterange),a=n[s]&&n[s].sidx;i.sidx&&a&&BA(i,a,i.sidx.resolvedUri)}}return e},$A=function(e){var n,r=e.attributes,i=e.segments,s=e.sidx,a={attributes:(n={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:(r.type||"static")==="static",timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:i,mediaSequence:i.length?i[0].number:1};return r.contentProtection&&(a.contentProtection=r.contentProtection),s&&(a.sidx=s),a},jA=function(e){var n,r=e.attributes,i=e.segments;return typeof i>"u"&&(i=[{uri:r.baseUrl,timeline:r.periodIndex,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration),{attributes:(n={NAME:r.id,BANDWIDTH:r.bandwidth},n["PROGRAM-ID"]=1,n),uri:"",endList:(r.type||"static")==="static",timeline:r.periodIndex,resolvedUri:r.baseUrl||"",targetDuration:r.duration,segments:i,mediaSequence:i.length?i[0].number:1}},HA=function(e,n){n===void 0&&(n={});var r,i=e.reduce(function(a,o){var u=o.attributes.role&&o.attributes.role.value||"",l=o.attributes.lang||"",c="main";if(l){var f=u?" ("+u+")":"";c=""+o.attributes.lang+f}return a[c]&&a[c].playlists[0].attributes.BANDWIDTH>o.attributes.bandwidth||(a[c]={language:l,autoselect:!0,default:u==="main",playlists:Bc([$A(o)],n),uri:""},typeof r>"u"&&u==="main"&&(r=o,r.default=!0)),a},{});if(!r){var s=Object.keys(i)[0];i[s].default=!0}return i},VA=function(e,n){return n===void 0&&(n={}),e.reduce(function(r,i){var s=i.attributes.lang||"text";return r[s]||(r[s]={language:s,default:!1,autoselect:!1,playlists:Bc([jA(i)],n),uri:""}),r},{})},WA=function(e){var n,r=e.attributes,i=e.segments,s=e.sidx,a={attributes:(n={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth},n["PROGRAM-ID"]=1,n),uri:"",endList:(r.type||"static")==="static",timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:i,mediaSequence:i.length?i[0].number:1};return r.contentProtection&&(a.contentProtection=r.contentProtection),s&&(a.sidx=s),a},Lv=function(e,n){var r;if(n===void 0&&(n={}),!e.length)return{};var i=e[0].attributes,s=i.sourceDuration,a=i.type,o=a===void 0?"static":a,u=i.suggestedPresentationDelay,l=i.minimumUpdatePeriod,c=l===void 0?0:l,f=function($){var U=$.attributes;return U.mimeType==="video/mp4"||U.contentType==="video"},d=function($){var U=$.attributes;return U.mimeType==="audio/mp4"||U.contentType==="audio"},h=function($){var U=$.attributes;return U.mimeType==="text/vtt"||U.contentType==="text"},g=Nh(e.filter(f)).map(WA),E=Nh(e.filter(d)),S=e.filter(h),x={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(r={AUDIO:{},VIDEO:{}},r["CLOSED-CAPTIONS"]={},r.SUBTITLES={},r),uri:"",duration:s,playlists:Bc(g,n),minimumUpdatePeriod:c*1e3};return o==="dynamic"&&(x.suggestedPresentationDelay=u),E.length&&(x.mediaGroups.AUDIO.audio=HA(E,n)),S.length&&(x.mediaGroups.SUBTITLES.subs=VA(S,n)),x},zA=function(e,n,r){var i=e.NOW,s=e.clientOffset,a=e.availabilityStartTime,o=e.timescale,u=o===void 0?1:o,l=e.start,c=l===void 0?0:l,f=e.minimumUpdatePeriod,d=f===void 0?0:f,h=(i+s)/1e3,g=a+c,E=h+d,S=E-g;return Math.ceil((S*u-n)/r)},Nv=function(e,n){for(var r=e.type,i=r===void 0?"static":r,s=e.minimumUpdatePeriod,a=s===void 0?0:s,o=e.media,u=o===void 0?"":o,l=e.sourceDuration,c=e.timescale,f=c===void 0?1:c,d=e.startNumber,h=d===void 0?1:d,g=e.periodIndex,E=[],S=-1,x=0;x<n.length;x++){var D=n[x],$=D.d,U=D.r||0,_e=D.t||0;S<0&&(S=_e),_e&&_e>S&&(S=_e);var re=void 0;if(U<0){var Z=x+1;Z===n.length?i==="dynamic"&&a>0&&u.indexOf("$Number$")>0?re=zA(e,S,$):re=(l*f-S)/$:re=(n[Z].t-S)/$}else re=U+1;for(var H=h+E.length+re,z=h+E.length;z<H;)E.push({number:z,duration:$/f,time:S,timeline:g}),S+=$,z++}return E},qA=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,GA=function(e){return function(n,r,i,s){if(n==="$$")return"$";if(typeof e[r]>"u")return n;var a=""+e[r];return r==="RepresentationID"||(i?s=parseInt(s,10):s=1,a.length>=s)?a:""+new Array(s-a.length+1).join("0")+a}},Mh=function(e,n){return e.replace(qA,GA(n))},XA=function(e,n){return!e.duration&&!n?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]:e.duration?Fc(e):Nv(e,n)},KA=function(e,n){var r={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=e.initialization,s=i===void 0?{sourceURL:"",range:""}:i,a=Ds({baseUrl:e.baseUrl,source:Mh(s.sourceURL,r),range:s.range}),o=XA(e,n);return o.map(function(u){r.Number=u.number,r.Time=u.time;var l=Mh(e.media||"",r);return{uri:l,timeline:u.timeline,duration:u.duration,resolvedUri:Ic(e.baseUrl||"",l),map:a,number:u.number}})},YA=function(e,n){var r=e.baseUrl,i=e.initialization,s=i===void 0?{}:i,a=Ds({baseUrl:r,source:s.sourceURL,range:s.range}),o=Ds({baseUrl:r,source:n.media,range:n.mediaRange});return o.map=a,o},JA=function(e,n){var r=e.duration,i=e.segmentUrls,s=i===void 0?[]:i;if(!r&&!n||r&&n)throw new Error(Ei.SEGMENT_TIME_UNSPECIFIED);var a=s.map(function(l){return YA(e,l)}),o;r&&(o=Fc(e)),n&&(o=Nv(e,n));var u=o.map(function(l,c){if(a[c]){var f=a[c];return f.timeline=l.timeline,f.duration=l.duration,f.number=l.number,f}}).filter(function(l){return l});return u},QA=function(e){var n=e.attributes,r=e.segmentInfo,i,s;r.template?(s=KA,i=Vt(n,r.template)):r.base?(s=Dv,i=Vt(n,r.base)):r.list&&(s=JA,i=Vt(n,r.list));var a={attributes:n};if(!s)return a;var o=s(i,r.timeline);if(i.duration){var u=i,l=u.duration,c=u.timescale,f=c===void 0?1:c;i.duration=l/f}else o.length?i.duration=o.reduce(function(d,h){return Math.max(d,Math.ceil(h.duration))},0):i.duration=0;return a.attributes=i,a.segments=o,r.base&&i.indexRange&&(a.sidx=o[0],a.segments=[]),a},Mv=function(e){return e.map(QA)},rt=function(e,n){return Rv(e.childNodes).filter(function(r){var i=r.tagName;return i===n})},Uv=function(e){return e.textContent.trim()},Qn=function(e){var n=31536e3,r=30*24*60*60,i=24*60*60,s=60*60,a=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,u=o.exec(e);if(!u)return 0;var l=u.slice(1),c=l[0],f=l[1],d=l[2],h=l[3],g=l[4],E=l[5];return parseFloat(c||0)*n+parseFloat(f||0)*r+parseFloat(d||0)*i+parseFloat(h||0)*s+parseFloat(g||0)*a+parseFloat(E||0)},ZA=function(e){var n=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return n.test(e)&&(e+="Z"),Date.parse(e)},Uh={mediaPresentationDuration:function(e){return Qn(e)},availabilityStartTime:function(e){return ZA(e)/1e3},minimumUpdatePeriod:function(e){return Qn(e)},suggestedPresentationDelay:function(e){return Qn(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return Qn(e)},start:function(e){return Qn(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var n=parseInt(e,10);return isNaN(n)?Qn(e):n},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Tt=function(e){return e&&e.attributes?Rv(e.attributes).reduce(function(n,r){var i=Uh[r.name]||Uh.DEFAULT;return n[r.name]=i(r.value),n},{}):{}},eI={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Mo=function(e,n){return n.length?No(e.map(function(r){return n.map(function(i){return Ic(r,Uv(i))})})):e},$c=function(e){var n=rt(e,"SegmentTemplate")[0],r=rt(e,"SegmentList")[0],i=r&&rt(r,"SegmentURL").map(function(d){return Vt({tag:"SegmentURL"},Tt(d))}),s=rt(e,"SegmentBase")[0],a=r||n,o=a&&rt(a,"SegmentTimeline")[0],u=r||s||n,l=u&&rt(u,"Initialization")[0],c=n&&Tt(n);c&&l?c.initialization=l&&Tt(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var f={template:c,timeline:o&&rt(o,"S").map(function(d){return Tt(d)}),list:r&&Vt(Tt(r),{segmentUrls:i,initialization:Tt(l)}),base:s&&Vt(Tt(s),{initialization:Tt(l)})};return Object.keys(f).forEach(function(d){f[d]||delete f[d]}),f},tI=function(e,n,r){return function(i){var s=rt(i,"BaseURL"),a=Mo(n,s),o=Vt(e,Tt(i)),u=$c(i);return a.map(function(l){return{segmentInfo:Vt(r,u),attributes:Vt(o,{baseUrl:l})}})}},rI=function(e){return e.reduce(function(n,r){var i=Tt(r),s=eI[i.schemeIdUri];if(s){n[s]={attributes:i};var a=rt(r,"cenc:pssh")[0];if(a){var o=Uv(a),u=o&&hA(o);n[s].pssh=u}}return n},{})},nI=function(e,n,r){return function(i){var s=Tt(i),a=Mo(n,rt(i,"BaseURL")),o=rt(i,"Role")[0],u={role:Tt(o)},l=Vt(e,s,u),c=rI(rt(i,"ContentProtection"));Object.keys(c).length&&(l=Vt(l,{contentProtection:c}));var f=$c(i),d=rt(i,"Representation"),h=Vt(r,f);return No(d.map(tI(l,a,h)))}},iI=function(e,n){return function(r,i){var s=Mo(n,rt(r,"BaseURL")),a=Tt(r),o=parseInt(a.id,10),u=Qg.isNaN(o)?i:o,l=Vt(e,{periodIndex:u}),c=rt(r,"AdaptationSet"),f=$c(r);return No(c.map(nI(l,s,f)))}},Fv=function(e,n){n===void 0&&(n={});var r=n,i=r.manifestUri,s=i===void 0?"":i,a=r.NOW,o=a===void 0?Date.now():a,u=r.clientOffset,l=u===void 0?0:u,c=rt(e,"Period");if(!c.length)throw new Error(Ei.INVALID_NUMBER_OF_PERIOD);var f=Tt(e),d=Mo([s],rt(e,"BaseURL"));return f.sourceDuration=f.mediaPresentationDuration||0,f.NOW=o,f.clientOffset=l,No(c.map(iI(f,d)))},jc=function(e){if(e==="")throw new Error(Ei.DASH_EMPTY_MANIFEST);var n=new OA,r=n.parseFromString(e,"application/xml"),i=r&&r.documentElement.tagName==="MPD"?r.documentElement:null;if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(Ei.DASH_INVALID_XML);return i},sI=function(e){var n=rt(e,"UTCTiming")[0];if(!n)return null;var r=Tt(n);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT",r.value=Date.parse(r.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Ei.UNSUPPORTED_UTC_TIMING_SCHEME)}return r},aI=RA,oI=function(e,n){return n===void 0&&(n={}),Lv(Mv(Fv(jc(e),n)),n.sidxMapping)},uI=function(e){return sI(jc(e))};const lI=Object.freeze(Object.defineProperty({__proto__:null,VERSION:aI,inheritAttributes:Fv,parse:oI,parseUTCTiming:uI,stringToMpdXml:jc,toM3u8:Lv,toPlaylists:Mv},Symbol.toStringTag,{value:"Module"})),cI=Oo(lI);var fI=function(t){return t>>>0},dI=function(t){return("00"+t.toString(16)).slice(-2)},Hc={toUnsigned:fI,toHexString:dI},bt,xl,El=Hc.toUnsigned,Gt=function(t){return new Date(t*1e3-20828448e5)},Fh=function(t){return{isLeading:(t[0]&12)>>>2,dependsOn:t[0]&3,isDependedOn:(t[1]&192)>>>6,hasRedundancy:(t[1]&48)>>>4,paddingValue:(t[1]&14)>>>1,isNonSyncSample:t[1]&1,degradationPriority:t[2]<<8|t[3]}},ci=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),e+=String.fromCharCode(t[2]),e+=String.fromCharCode(t[3]),e},Bv=function(t,e){var n=[],r,i,s,a,o;if(!e.length)return null;for(r=0;r<t.byteLength;)i=El(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]),s=ci(t.subarray(r+4,r+8)),a=i>1?r+i:t.byteLength,s===e[0]&&(e.length===1?n.push(t.subarray(r+8,a)):(o=Bv(t.subarray(r+8,a),e.slice(1)),o.length&&(n=n.concat(o)))),r=a;return n},hI=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=[],r,i;for(r=0;r+4<t.length;r+=i){if(i=e.getUint32(r),r+=4,i<=0){n.push("<span style='color:red;'>MALFORMED DATA</span>");continue}switch(t[r]&31){case 1:n.push("slice_layer_without_partitioning_rbsp");break;case 5:n.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:n.push("sei_rbsp");break;case 7:n.push("seq_parameter_set_rbsp");break;case 8:n.push("pic_parameter_set_rbsp");break;case 9:n.push("access_unit_delimiter_rbsp");break;default:n.push("UNKNOWN NAL - "+t[r]&31);break}}return n},zr={avc1:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:e.getUint16(6),width:e.getUint16(24),height:e.getUint16(26),horizresolution:e.getUint16(28)+e.getUint16(30)/16,vertresolution:e.getUint16(32)+e.getUint16(34)/16,frameCount:e.getUint16(40),depth:e.getUint16(74),config:bt(t.subarray(78,t.byteLength))}},avcC:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={configurationVersion:t[0],avcProfileIndication:t[1],profileCompatibility:t[2],avcLevelIndication:t[3],lengthSizeMinusOne:t[4]&3,sps:[],pps:[]},r=t[5]&31,i,s,a,o;for(a=6,o=0;o<r;o++)s=e.getUint16(a),a+=2,n.sps.push(new Uint8Array(t.subarray(a,a+s))),a+=s;for(i=t[a],a++,o=0;o<i;o++)s=e.getUint16(a),a+=2,n.pps.push(new Uint8Array(t.subarray(a,a+s))),a+=s;return n},btrt:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{bufferSizeDB:e.getUint32(0),maxBitrate:e.getUint32(4),avgBitrate:e.getUint32(8)}},esds:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),esId:t[6]<<8|t[7],streamPriority:t[8]&31,decoderConfig:{objectProfileIndication:t[11],streamType:t[12]>>>2&63,bufferSize:t[13]<<16|t[14]<<8|t[15],maxBitrate:t[16]<<24|t[17]<<16|t[18]<<8|t[19],avgBitrate:t[20]<<24|t[21]<<16|t[22]<<8|t[23],decoderConfigDescriptor:{tag:t[24],length:t[25],audioObjectType:t[26]>>>3&31,samplingFrequencyIndex:(t[26]&7)<<1|t[27]>>>7&1,channelConfiguration:t[27]>>>3&15}}}},ftyp:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={majorBrand:ci(t.subarray(0,4)),minorVersion:e.getUint32(4),compatibleBrands:[]},r=8;r<t.byteLength;)n.compatibleBrands.push(ci(t.subarray(r,r+4))),r+=4;return n},dinf:function(t){return{boxes:bt(t)}},dref:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:bt(t.subarray(8))}},hdlr:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:ci(t.subarray(8,12)),name:""},r=8;for(r=24;r<t.byteLength;r++){if(t[r]===0){r++;break}n.name+=String.fromCharCode(t[r])}return n.name=decodeURIComponent(escape(n.name)),n},mdat:function(t){return{byteLength:t.byteLength,nals:hI(t)}},mdhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,r,i={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:""};return i.version===1?(n+=4,i.creationTime=Gt(e.getUint32(n)),n+=8,i.modificationTime=Gt(e.getUint32(n)),n+=4,i.timescale=e.getUint32(n),n+=8,i.duration=e.getUint32(n)):(i.creationTime=Gt(e.getUint32(n)),n+=4,i.modificationTime=Gt(e.getUint32(n)),n+=4,i.timescale=e.getUint32(n),n+=4,i.duration=e.getUint32(n)),n+=4,r=e.getUint16(n),i.language+=String.fromCharCode((r>>10)+96),i.language+=String.fromCharCode(((r&992)>>5)+96),i.language+=String.fromCharCode((r&31)+96),i},mdia:function(t){return{boxes:bt(t)}},mfhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sequenceNumber:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},minf:function(t){return{boxes:bt(t)}},mp4a:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={dataReferenceIndex:e.getUint16(6),channelcount:e.getUint16(16),samplesize:e.getUint16(18),samplerate:e.getUint16(24)+e.getUint16(26)/65536};return t.byteLength>28&&(n.streamDescriptor=bt(t.subarray(28))[0]),n},moof:function(t){return{boxes:bt(t)}},moov:function(t){return{boxes:bt(t)}},mvex:function(t){return{boxes:bt(t)}},mvhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,r={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return r.version===1?(n+=4,r.creationTime=Gt(e.getUint32(n)),n+=8,r.modificationTime=Gt(e.getUint32(n)),n+=4,r.timescale=e.getUint32(n),n+=8,r.duration=e.getUint32(n)):(r.creationTime=Gt(e.getUint32(n)),n+=4,r.modificationTime=Gt(e.getUint32(n)),n+=4,r.timescale=e.getUint32(n),n+=4,r.duration=e.getUint32(n)),n+=4,r.rate=e.getUint16(n)+e.getUint16(n+2)/16,n+=4,r.volume=e.getUint8(n)+e.getUint8(n+1)/8,n+=2,n+=2,n+=2*4,r.matrix=new Uint32Array(t.subarray(n,n+9*4)),n+=9*4,n+=6*4,r.nextTrackId=e.getUint32(n),r},pdin:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),rate:e.getUint32(4),initialDelay:e.getUint32(8)}},sdtp:function(t){var e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},n;for(n=4;n<t.byteLength;n++)e.samples.push({dependsOn:(t[n]&48)>>4,isDependedOn:(t[n]&12)>>2,hasRedundancy:t[n]&3});return e},sidx:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8),earliestPresentationTime:e.getUint32(12),firstOffset:e.getUint32(16)},r=e.getUint16(22),i;for(i=24;r;i+=12,r--)n.references.push({referenceType:(t[i]&128)>>>7,referencedSize:e.getUint32(i)&2147483647,subsegmentDuration:e.getUint32(i+4),startsWithSap:!!(t[i+8]&128),sapType:(t[i+8]&112)>>>4,sapDeltaTime:e.getUint32(i+8)&268435455});return n},smhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),balance:t[4]+t[5]/256}},stbl:function(t){return{boxes:bt(t)}},stco:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),chunkOffsets:[]},r=e.getUint32(4),i;for(i=8;r;i+=4,r--)n.chunkOffsets.push(e.getUint32(i));return n},stsc:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=e.getUint32(4),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleToChunks:[]},i;for(i=8;n;i+=12,n--)r.sampleToChunks.push({firstChunk:e.getUint32(i),samplesPerChunk:e.getUint32(i+4),sampleDescriptionIndex:e.getUint32(i+8)});return r},stsd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleDescriptions:bt(t.subarray(8))}},stsz:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:e.getUint32(4),entries:[]},r;for(r=12;r<t.byteLength;r+=4)n.entries.push(e.getUint32(r));return n},stts:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),timeToSamples:[]},r=e.getUint32(4),i;for(i=8;r;i+=8,r--)n.timeToSamples.push({sampleCount:e.getUint32(i),sampleDelta:e.getUint32(i+4)});return n},styp:function(t){return zr.ftyp(t)},tfdt:function(t){var e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:El(t[4]<<24|t[5]<<16|t[6]<<8|t[7])};return e.version===1&&(e.baseMediaDecodeTime*=Math.pow(2,32),e.baseMediaDecodeTime+=El(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),e},tfhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:e.getUint32(4)},r=n.flags[2]&1,i=n.flags[2]&2,s=n.flags[2]&8,a=n.flags[2]&16,o=n.flags[2]&32,u=n.flags[0]&65536,l=n.flags[0]&131072,c;return c=8,r&&(c+=4,n.baseDataOffset=e.getUint32(12),c+=4),i&&(n.sampleDescriptionIndex=e.getUint32(c),c+=4),s&&(n.defaultSampleDuration=e.getUint32(c),c+=4),a&&(n.defaultSampleSize=e.getUint32(c),c+=4),o&&(n.defaultSampleFlags=e.getUint32(c)),u&&(n.durationIsEmpty=!0),!r&&l&&(n.baseDataOffsetIsMoof=!0),n},tkhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,r={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return r.version===1?(n+=4,r.creationTime=Gt(e.getUint32(n)),n+=8,r.modificationTime=Gt(e.getUint32(n)),n+=4,r.trackId=e.getUint32(n),n+=4,n+=8,r.duration=e.getUint32(n)):(r.creationTime=Gt(e.getUint32(n)),n+=4,r.modificationTime=Gt(e.getUint32(n)),n+=4,r.trackId=e.getUint32(n),n+=4,n+=4,r.duration=e.getUint32(n)),n+=4,n+=2*4,r.layer=e.getUint16(n),n+=2,r.alternateGroup=e.getUint16(n),n+=2,r.volume=e.getUint8(n)+e.getUint8(n+1)/8,n+=2,n+=2,r.matrix=new Uint32Array(t.subarray(n,n+9*4)),n+=9*4,r.width=e.getUint16(n)+e.getUint16(n+2)/65536,n+=4,r.height=e.getUint16(n)+e.getUint16(n+2)/65536,r},traf:function(t){return{boxes:bt(t)}},trak:function(t){return{boxes:bt(t)}},trex:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:e.getUint32(4),defaultSampleDescriptionIndex:e.getUint32(8),defaultSampleDuration:e.getUint32(12),defaultSampleSize:e.getUint32(16),sampleDependsOn:t[20]&3,sampleIsDependedOn:(t[21]&192)>>6,sampleHasRedundancy:(t[21]&48)>>4,samplePaddingValue:(t[21]&14)>>1,sampleIsDifferenceSample:!!(t[21]&1),sampleDegradationPriority:e.getUint16(22)}},trun:function(t){var e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=e.flags[2]&1,i=e.flags[2]&4,s=e.flags[1]&1,a=e.flags[1]&2,o=e.flags[1]&4,u=e.flags[1]&8,l=n.getUint32(4),c=8,f;for(r&&(e.dataOffset=n.getInt32(c),c+=4),i&&l&&(f={flags:Fh(t.subarray(c,c+4))},c+=4,s&&(f.duration=n.getUint32(c),c+=4),a&&(f.size=n.getUint32(c),c+=4),u&&(f.compositionTimeOffset=n.getUint32(c),c+=4),e.samples.push(f),l--);l--;)f={},s&&(f.duration=n.getUint32(c),c+=4),a&&(f.size=n.getUint32(c),c+=4),o&&(f.flags=Fh(t.subarray(c,c+4)),c+=4),u&&(f.compositionTimeOffset=n.getUint32(c),c+=4),e.samples.push(f);return e},"url ":function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}},vmhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),graphicsmode:e.getUint16(4),opcolor:new Uint16Array([e.getUint16(6),e.getUint16(8),e.getUint16(10)])}}};bt=function(t){for(var e=0,n=[],r,i,s,a,o,u=new ArrayBuffer(t.length),l=new Uint8Array(u),c=0;c<t.length;++c)l[c]=t[c];for(r=new DataView(u);e<t.byteLength;)i=r.getUint32(e),s=ci(t.subarray(e+4,e+8)),a=i>1?e+i:t.byteLength,o=(zr[s]||function(f){return{data:f}})(t.subarray(e+8,a)),o.size=i,o.type=s,n.push(o),e=a;return n};xl=function(t,e){var n;return e=e||0,n=new Array(e*2+1).join(" "),t.map(function(r,i){return n+r.type+`
`+Object.keys(r).filter(function(s){return s!=="type"&&s!=="boxes"}).map(function(s){var a=n+"  "+s+": ",o=r[s];if(o instanceof Uint8Array||o instanceof Uint32Array){var u=Array.prototype.slice.call(new Uint8Array(o.buffer,o.byteOffset,o.byteLength)).map(function(l){return" "+("00"+l.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return u?u.length===1?a+"<"+u.join("").slice(1)+">":a+`<
`+u.map(function(l){return n+"  "+l}).join(`
`)+`
`+n+"  >":a+"<>"}return a+JSON.stringify(o,null,2).split(`
`).map(function(l,c){return c===0?l:n+"  "+l}).join(`
`)}).join(`
`)+(r.boxes?`
`+xl(r.boxes,e+1):"")}).join(`
`)};var pI={inspect:bt,textify:xl,parseType:ci,findBox:Bv,parseTraf:zr.traf,parseTfdt:zr.tfdt,parseHdlr:zr.hdlr,parseTfhd:zr.tfhd,parseTrun:zr.trun,parseSidx:zr.sidx},fi=Hc.toUnsigned,is=Hc.toHexString,Ge=pI,$v,jv,Hv,Vv,Wv;$v=function(t){var e={},n=Ge.findBox(t,["moov","trak"]);return n.reduce(function(r,i){var s,a,o,u,l;return s=Ge.findBox(i,["tkhd"])[0],!s||(a=s[0],o=a===0?12:20,u=fi(s[o]<<24|s[o+1]<<16|s[o+2]<<8|s[o+3]),l=Ge.findBox(i,["mdia","mdhd"])[0],!l)?null:(a=l[0],o=a===0?12:20,r[u]=fi(l[o]<<24|l[o+1]<<16|l[o+2]<<8|l[o+3]),r)},e)};jv=function(t,e){var n,r,i;return n=Ge.findBox(e,["moof","traf"]),r=[].concat.apply([],n.map(function(s){return Ge.findBox(s,["tfhd"]).map(function(a){var o,u,l;return o=fi(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),u=t[o]||9e4,l=Ge.findBox(s,["tfdt"]).map(function(c){var f,d;return f=c[0],d=fi(c[4]<<24|c[5]<<16|c[6]<<8|c[7]),f===1&&(d*=Math.pow(2,32),d+=fi(c[8]<<24|c[9]<<16|c[10]<<8|c[11])),d})[0],l=l||1/0,l/u})})),i=Math.min.apply(null,r),isFinite(i)?i:0};Hv=function(t,e){var n=Ge.findBox(e,["moof","traf"]),r=0,i=0,s;if(n&&n.length)for(var a=Ge.parseTraf(n[0]),o=0;o<a.boxes.length;o++)a.boxes[o].type==="tfhd"?s=a.boxes[o].trackId:a.boxes[o].type==="tfdt"?r=a.boxes[o].baseMediaDecodeTime:a.boxes[o].type==="trun"&&a.boxes[o].samples.length&&(i=a.boxes[o].samples[0].compositionTimeOffset||0);var u=t[s]||9e4;return(r+i)/u};Vv=function(t){var e=Ge.findBox(t,["moov","trak"]),n=[];return e.forEach(function(r){var i=Ge.findBox(r,["mdia","hdlr"]),s=Ge.findBox(r,["tkhd"]);i.forEach(function(a,o){var u=Ge.parseType(a.subarray(8,12)),l=s[o],c,f,d;u==="vide"&&(c=new DataView(l.buffer,l.byteOffset,l.byteLength),f=c.getUint8(0),d=f===0?c.getUint32(12):c.getUint32(20),n.push(d))})}),n};Wv=function(t){var e=Ge.findBox(t,["moov","trak"]),n=[];return e.forEach(function(r){var i={},s=Ge.findBox(r,["tkhd"])[0],a,o;s&&(a=new DataView(s.buffer,s.byteOffset,s.byteLength),o=a.getUint8(0),i.id=o===0?a.getUint32(12):a.getUint32(20));var u=Ge.findBox(r,["mdia","hdlr"])[0];if(u){var l=Ge.parseType(u.subarray(8,12));l==="vide"?i.type="video":l==="soun"?i.type="audio":i.type=l}var c=Ge.findBox(r,["mdia","minf","stbl","stsd"])[0];if(c){var f=c.subarray(8);i.codec=Ge.parseType(f.subarray(4,8));var d=Ge.findBox(f,[i.codec])[0],h,g;d&&(/^[a-z]vc[1-9]$/i.test(i.codec)?(h=d.subarray(78),g=Ge.parseType(h.subarray(4,8)),g==="avcC"&&h.length>11?(i.codec+=".",i.codec+=is(h[9]),i.codec+=is(h[10]),i.codec+=is(h[11])):i.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i.codec)&&(h=d.subarray(28),g=Ge.parseType(h.subarray(4,8)),g==="esds"&&h.length>20&&h[19]!==0?(i.codec+="."+is(h[19]),i.codec+="."+is(h[20]>>>2&63).replace(/^0/,"")):i.codec="mp4a.40.2"))}var E=Ge.findBox(r,["mdia","mdhd"])[0];if(E&&s){var S=o===0?12:20;i.timescale=fi(E[S]<<24|E[S+1]<<16|E[S+2]<<8|E[S+3])}n.push(i)}),n};var mI={findBox:Ge.findBox,parseType:Ge.parseType,timescale:$v,startTime:jv,compositionStartTime:Hv,videoTrackIds:Vv,tracks:Wv},zv={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Fn=function(){this.init=function(){var t={};this.on=function(e,n){t[e]||(t[e]=[]),t[e]=t[e].concat(n)},this.off=function(e,n){var r;return t[e]?(r=t[e].indexOf(n),t[e]=t[e].slice(),t[e].splice(r,1),r>-1):!1},this.trigger=function(e){var n,r,i,s;if(n=t[e],!!n)if(arguments.length===2)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(s=[],r=arguments.length,r=1;r<arguments.length;++r)s.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,s)}},this.dispose=function(){t={}}}};Fn.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t};Fn.prototype.push=function(t){this.trigger("data",t)};Fn.prototype.flush=function(t){this.trigger("done",t)};Fn.prototype.partialFlush=function(t){this.trigger("partialdone",t)};Fn.prototype.endTimeline=function(t){this.trigger("endedtimeline",t)};Fn.prototype.reset=function(t){this.trigger("reset",t)};var gI=Fn,vI=gI,yI=8589934592,_I=4294967296,Bh="shared",wl=function(t,e){var n=1;for(t>e&&(n=-1);Math.abs(e-t)>_I;)t+=n*yI;return t},Vc=function(t){var e,n;Vc.prototype.init.call(this),this.type_=t||Bh,this.push=function(r){this.type_!==Bh&&r.type!==this.type_||(n===void 0&&(n=r.dts),r.dts=wl(r.dts,n),r.pts=wl(r.pts,n),e=r.dts,this.trigger("data",r))},this.flush=function(){n=e,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,e=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Vc.prototype=new vI;var bI={TimestampRolloverStream:Vc,handleRollover:wl},Du=zv,qv=function(t){var e=t[1]&31;return e<<=8,e|=t[2],e},Uo=function(t){return!!(t[1]&64)},Fo=function(t){var e=0;return(t[3]&48)>>>4>1&&(e+=t[4]+1),e},TI=function(t,e){var n=qv(t);return n===0?"pat":n===e?"pmt":e?"pes":null},SI=function(t){var e=Uo(t),n=4+Fo(t);return e&&(n+=t[n]+1),(t[n+10]&31)<<8|t[n+11]},xI=function(t){var e={},n=Uo(t),r=4+Fo(t);if(n&&(r+=t[r]+1),!!(t[r+5]&1)){var i,s,a;i=(t[r+1]&15)<<8|t[r+2],s=3+i-4,a=(t[r+10]&15)<<8|t[r+11];for(var o=12+a;o<s;){var u=r+o;e[(t[u+1]&31)<<8|t[u+2]]=t[u],o+=((t[u+3]&15)<<8|t[u+4])+5}return e}},EI=function(t,e){var n=qv(t),r=e[n];switch(r){case Du.H264_STREAM_TYPE:return"video";case Du.ADTS_STREAM_TYPE:return"audio";case Du.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},wI=function(t){var e=Uo(t);if(!e)return null;var n=4+Fo(t);if(n>=t.byteLength)return null;var r=null,i;return i=t[n+7],i&192&&(r={},r.pts=(t[n+9]&14)<<27|(t[n+10]&255)<<20|(t[n+11]&254)<<12|(t[n+12]&255)<<5|(t[n+13]&254)>>>3,r.pts*=4,r.pts+=(t[n+13]&6)>>>1,r.dts=r.pts,i&64&&(r.dts=(t[n+14]&14)<<27|(t[n+15]&255)<<20|(t[n+16]&254)<<12|(t[n+17]&255)<<5|(t[n+18]&254)>>>3,r.dts*=4,r.dts+=(t[n+18]&6)>>>1)),r},Lu=function(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},CI=function(t){for(var e=4+Fo(t),n=t.subarray(e),r=0,i=0,s=!1,a;i<n.byteLength-3;i++)if(n[i+2]===1){r=i+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(n[r-1]!==0){r+=2;break}else if(n[r-2]!==0){r++;break}i+3!==r-2&&(a=Lu(n[i+3]&31),a==="slice_layer_without_partitioning_rbsp_idr"&&(s=!0));do r++;while(n[r]!==1&&r<n.length);i=r-2,r+=3;break;case 1:if(n[r-1]!==0||n[r-2]!==0){r+=3;break}a=Lu(n[i+3]&31),a==="slice_layer_without_partitioning_rbsp_idr"&&(s=!0),i=r-2,r+=3;break;default:r+=3;break}return n=n.subarray(i),r-=i,i=0,n&&n.byteLength>3&&(a=Lu(n[i+3]&31),a==="slice_layer_without_partitioning_rbsp_idr"&&(s=!0)),s},AI={parseType:TI,parsePat:SI,parsePmt:xI,parsePayloadUnitStartIndicator:Uo,parsePesType:EI,parsePesTime:wI,videoPacketContainsKeyFrame:CI},II=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],kI=function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)},$h=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},PI=function(t,e,n){var r,i="";for(r=e;r<n;r++)i+="%"+("00"+t[r].toString(16)).slice(-2);return i},OI=function(t,e,n){return unescape(PI(t,e,n))},RI=function(t,e){var n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9],r=t[e+5],i=(r&16)>>4;return i?n+20:n+10},DI=function(t,e){var n=(t[e+5]&224)>>5,r=t[e+4]<<3,i=t[e+3]&6144;return i|r|n},LI=function(t,e){return t[e]==="I".charCodeAt(0)&&t[e+1]==="D".charCodeAt(0)&&t[e+2]==="3".charCodeAt(0)?"timed-metadata":t[e]&!0&&(t[e+1]&240)===240?"audio":null},NI=function(t){for(var e=0;e+5<t.length;){if(t[e]!==255||(t[e+1]&246)!==240){e++;continue}return II[(t[e+2]&60)>>>2]}return null},MI=function(t){var e,n,r,i;e=10,t[5]&64&&(e+=4,e+=$h(t.subarray(10,14)));do{if(n=$h(t.subarray(e+4,e+8)),n<1)return null;if(i=String.fromCharCode(t[e],t[e+1],t[e+2],t[e+3]),i==="PRIV"){r=t.subarray(e+10,e+n+10);for(var s=0;s<r.byteLength;s++)if(r[s]===0){var a=OI(r,0,s);if(a==="com.apple.streaming.transportStreamTimestamp"){var o=r.subarray(s+1),u=(o[3]&1)<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return u*=4,u+=o[7]&3,u}break}}e+=10,e+=n}while(e<t.byteLength);return null},UI={isLikelyAacData:kI,parseId3TagSize:RI,parseAdtsSize:DI,parseType:LI,parseSampleRate:NI,parseAacTimestamp:MI},Wc=9e4,zc,qc,Bo,Gc,Gv,Xv,Kv;zc=function(t){return t*Wc};qc=function(t,e){return t*e};Bo=function(t){return t/Wc};Gc=function(t,e){return t/e};Gv=function(t,e){return zc(Gc(t,e))};Xv=function(t,e){return qc(Bo(t),e)};Kv=function(t,e,n){return Bo(n?t:t-e)};var FI={ONE_SECOND_IN_TS:Wc,secondsToVideoTs:zc,secondsToAudioTs:qc,videoTsToSeconds:Bo,audioTsToSeconds:Gc,audioTsToVideoTs:Gv,videoTsToAudioTs:Xv,metadataTsToSeconds:Kv},jh=zv,Zn=bI.handleRollover,Fe={};Fe.ts=AI;Fe.aac=UI;var yn=FI.ONE_SECOND_IN_TS,St=188,mr=71,BI=function(t,e){for(var n=0,r=St,i,s;r<t.byteLength;){if(t[n]===mr&&t[r]===mr){switch(i=t.subarray(n,r),s=Fe.ts.parseType(i,e.pid),s){case"pat":e.pid||(e.pid=Fe.ts.parsePat(i));break;case"pmt":e.table||(e.table=Fe.ts.parsePmt(i));break}if(e.pid&&e.table)return;n+=St,r+=St;continue}n++,r++}},Yv=function(t,e,n){for(var r=0,i=St,s,a,o,u,l,c=!1;i<=t.byteLength;){if(t[r]===mr&&(t[i]===mr||i===t.byteLength)){switch(s=t.subarray(r,i),a=Fe.ts.parseType(s,e.pid),a){case"pes":o=Fe.ts.parsePesType(s,e.table),u=Fe.ts.parsePayloadUnitStartIndicator(s),o==="audio"&&u&&(l=Fe.ts.parsePesTime(s),l&&(l.type="audio",n.audio.push(l),c=!0));break}if(c)break;r+=St,i+=St;continue}r++,i++}for(i=t.byteLength,r=i-St,c=!1;r>=0;){if(t[r]===mr&&(t[i]===mr||i===t.byteLength)){switch(s=t.subarray(r,i),a=Fe.ts.parseType(s,e.pid),a){case"pes":o=Fe.ts.parsePesType(s,e.table),u=Fe.ts.parsePayloadUnitStartIndicator(s),o==="audio"&&u&&(l=Fe.ts.parsePesTime(s),l&&(l.type="audio",n.audio.push(l),c=!0));break}if(c)break;r-=St,i-=St;continue}r--,i--}},$I=function(t,e,n){for(var r=0,i=St,s,a,o,u,l,c,f,d,h=!1,g={data:[],size:0};i<t.byteLength;){if(t[r]===mr&&t[i]===mr){switch(s=t.subarray(r,i),a=Fe.ts.parseType(s,e.pid),a){case"pes":if(o=Fe.ts.parsePesType(s,e.table),u=Fe.ts.parsePayloadUnitStartIndicator(s),o==="video"&&(u&&!h&&(l=Fe.ts.parsePesTime(s),l&&(l.type="video",n.video.push(l),h=!0)),!n.firstKeyFrame)){if(u&&g.size!==0){for(c=new Uint8Array(g.size),f=0;g.data.length;)d=g.data.shift(),c.set(d,f),f+=d.byteLength;if(Fe.ts.videoPacketContainsKeyFrame(c)){var E=Fe.ts.parsePesTime(c);E?(n.firstKeyFrame=E,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}g.size=0}g.data.push(s),g.size+=s.byteLength}break}if(h&&n.firstKeyFrame)break;r+=St,i+=St;continue}r++,i++}for(i=t.byteLength,r=i-St,h=!1;r>=0;){if(t[r]===mr&&t[i]===mr){switch(s=t.subarray(r,i),a=Fe.ts.parseType(s,e.pid),a){case"pes":o=Fe.ts.parsePesType(s,e.table),u=Fe.ts.parsePayloadUnitStartIndicator(s),o==="video"&&u&&(l=Fe.ts.parsePesTime(s),l&&(l.type="video",n.video.push(l),h=!0));break}if(h)break;r-=St,i-=St;continue}r--,i--}},jI=function(t,e){if(t.audio&&t.audio.length){var n=e;typeof n>"u"&&(n=t.audio[0].dts),t.audio.forEach(function(s){s.dts=Zn(s.dts,n),s.pts=Zn(s.pts,n),s.dtsTime=s.dts/yn,s.ptsTime=s.pts/yn})}if(t.video&&t.video.length){var r=e;if(typeof r>"u"&&(r=t.video[0].dts),t.video.forEach(function(s){s.dts=Zn(s.dts,r),s.pts=Zn(s.pts,r),s.dtsTime=s.dts/yn,s.ptsTime=s.pts/yn}),t.firstKeyFrame){var i=t.firstKeyFrame;i.dts=Zn(i.dts,r),i.pts=Zn(i.pts,r),i.dtsTime=i.dts/yn,i.ptsTime=i.dts/yn}}},HI=function(t){for(var e=!1,n=0,r=null,i=null,s=0,a=0,o;t.length-a>=3;){var u=Fe.aac.parseType(t,a);switch(u){case"timed-metadata":if(t.length-a<10){e=!0;break}if(s=Fe.aac.parseId3TagSize(t,a),s>t.length){e=!0;break}i===null&&(o=t.subarray(a,a+s),i=Fe.aac.parseAacTimestamp(o)),a+=s;break;case"audio":if(t.length-a<7){e=!0;break}if(s=Fe.aac.parseAdtsSize(t,a),s>t.length){e=!0;break}r===null&&(o=t.subarray(a,a+s),r=Fe.aac.parseSampleRate(o)),n++,a+=s;break;default:a++;break}if(e)return null}if(r===null||i===null)return null;var l=yn/r,c={audio:[{type:"audio",dts:i,pts:i},{type:"audio",dts:i+n*1024*l,pts:i+n*1024*l}]};return c},VI=function(t){var e={pid:null,table:null},n={};BI(t,e);for(var r in e.table)if(e.table.hasOwnProperty(r)){var i=e.table[r];switch(i){case jh.H264_STREAM_TYPE:n.video=[],$I(t,e,n),n.video.length===0&&delete n.video;break;case jh.ADTS_STREAM_TYPE:n.audio=[],Yv(t,e,n),n.audio.length===0&&delete n.audio;break}}return n},WI=function(t,e){var n=Fe.aac.isLikelyAacData(t),r;return n?r=HI(t):r=VI(t),!r||!r.audio&&!r.video?null:(jI(r,e),r)},zI={inspect:WI,parseAudioPes_:Yv};function Ls(t){"@babel/helpers - typeof";return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ls(t)}function qI(t,e){if(Ls(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ls(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GI(t){var e=qI(t,"string");return Ls(e)==="symbol"?e:String(e)}function Hh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GI(r.key),r)}}function XI(t,e,n){return e&&Hh(t.prototype,e),n&&Hh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cl(t,e){return Cl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Cl(t,e)}function KI(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Cl(t,e)}/*! @name @videojs/vhs-utils @version 1.3.0 @license MIT */var YI=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(r,i){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(i)},e.off=function(r,i){if(!this.listeners[r])return!1;var s=this.listeners[r].indexOf(i);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(s,1),s>-1},e.trigger=function(r){var i=this.listeners[r];if(i)if(arguments.length===2)for(var s=i.length,a=0;a<s;++a)i[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),u=i.length,l=0;l<u;++l)i[l].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(r){this.on("data",function(i){r.push(i)})},t}(),JI=YI;const Vh=qs(JI);/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function QI(t){return t.subarray(0,t.byteLength-t[t.byteLength-1])}/*! @name aes-decrypter @version 3.0.2 @license Apache-2.0 */var ZI=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],n=e[0],r=e[1],i=n[4],s=r[4],a,o,u,l=[],c=[],f,d,h,g,E,S;for(a=0;a<256;a++)c[(l[a]=a<<1^(a>>7)*283)^a]=a;for(o=u=0;!i[o];o^=f||1,u=c[u]||1)for(g=u^u<<1^u<<2^u<<3^u<<4,g=g>>8^g&255^99,i[o]=g,s[g]=o,h=l[d=l[f=l[o]]],S=h*16843009^d*65537^f*257^o*16843008,E=l[g]*257^g*16843008,a=0;a<4;a++)n[a][o]=E=E<<24^E>>>8,r[a][g]=S=S<<24^S>>>8;for(a=0;a<5;a++)n[a]=n[a].slice(0),r[a]=r[a].slice(0);return e},Xt=null,ek=function(){function t(n){Xt||(Xt=ZI()),this._tables=[[Xt[0][0].slice(),Xt[0][1].slice(),Xt[0][2].slice(),Xt[0][3].slice(),Xt[0][4].slice()],[Xt[1][0].slice(),Xt[1][1].slice(),Xt[1][2].slice(),Xt[1][3].slice(),Xt[1][4].slice()]];var r,i,s,a=this._tables[0][4],o=this._tables[1],u=n.length,l=1;if(u!==4&&u!==6&&u!==8)throw new Error("Invalid aes key size");var c=n.slice(0),f=[];for(this._key=[c,f],r=u;r<4*u+28;r++)s=c[r-1],(r%u===0||u===8&&r%u===4)&&(s=a[s>>>24]<<24^a[s>>16&255]<<16^a[s>>8&255]<<8^a[s&255],r%u===0&&(s=s<<8^s>>>24^l<<24,l=l<<1^(l>>7)*283)),c[r]=c[r-u]^s;for(i=0;r;i++,r--)s=c[i&3?r:r-4],r<=4||i<4?f[i]=s:f[i]=o[0][a[s>>>24]]^o[1][a[s>>16&255]]^o[2][a[s>>8&255]]^o[3][a[s&255]]}var e=t.prototype;return e.decrypt=function(r,i,s,a,o,u){var l=this._key[1],c=r^l[0],f=a^l[1],d=s^l[2],h=i^l[3],g,E,S,x=l.length/4-2,D,$=4,U=this._tables[1],_e=U[0],re=U[1],Z=U[2],H=U[3],z=U[4];for(D=0;D<x;D++)g=_e[c>>>24]^re[f>>16&255]^Z[d>>8&255]^H[h&255]^l[$],E=_e[f>>>24]^re[d>>16&255]^Z[h>>8&255]^H[c&255]^l[$+1],S=_e[d>>>24]^re[h>>16&255]^Z[c>>8&255]^H[f&255]^l[$+2],h=_e[h>>>24]^re[c>>16&255]^Z[f>>8&255]^H[d&255]^l[$+3],$+=4,c=g,f=E,d=S;for(D=0;D<4;D++)o[(3&-D)+u]=z[c>>>24]<<24^z[f>>16&255]<<16^z[d>>8&255]<<8^z[h&255]^l[$++],g=c,c=f,f=d,d=h,h=g},t}(),Jv=function(t){KI(e,t);function e(){var r;return r=t.call(this,Vh)||this,r.jobs=[],r.delay=1,r.timeout_=null,r}var n=e.prototype;return n.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.push=function(i){this.jobs.push(i),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},e}(Vh),Yt=function(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24},Qv=function(e,n,r){var i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),s=new ek(Array.prototype.slice.call(n)),a=new Uint8Array(e.byteLength),o=new Int32Array(a.buffer),u,l,c,f,d,h,g,E,S;for(u=r[0],l=r[1],c=r[2],f=r[3],S=0;S<i.length;S+=4)d=Yt(i[S]),h=Yt(i[S+1]),g=Yt(i[S+2]),E=Yt(i[S+3]),s.decrypt(d,h,g,E,o,S),o[S]=Yt(o[S]^u),o[S+1]=Yt(o[S+1]^l),o[S+2]=Yt(o[S+2]^c),o[S+3]=Yt(o[S+3]^f),u=d,l=h,c=g,f=E;return a},tk=function(){function t(n,r,i,s){var a=t.STEP,o=new Int32Array(n.buffer),u=new Uint8Array(n.byteLength),l=0;for(this.asyncStream_=new Jv,this.asyncStream_.push(this.decryptChunk_(o.subarray(l,l+a),r,i,u)),l=a;l<o.length;l+=a)i=new Uint32Array([Yt(o[l-4]),Yt(o[l-3]),Yt(o[l-2]),Yt(o[l-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(l,l+a),r,i,u));this.asyncStream_.push(function(){s(null,QI(u))})}var e=t.prototype;return e.decryptChunk_=function(r,i,s,a){return function(){var o=Qv(r,i,s);a.set(o,r.byteOffset)}},XI(t,null,[{key:"STEP",get:function(){return 32e3}}]),t}();const rk=Object.freeze(Object.defineProperty({__proto__:null,AsyncStream:Jv,Decrypter:tk,decrypt:Qv},Symbol.toStringTag,{value:"Module"})),nk=Oo(rk);/**
 * @license
 * Video.js 7.0.3 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */function Nr(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var R=Nr(Ui),ue=Nr(uC),Xc=Nr(cC),Zv=Nr(SC),Wh=Nr(QC),ik=Nr(ZC),zh=Nr(av),qh=aA,Gh=cI,Xh=Nr(mI),sk=Nr(zI),Nu=nk,e0="7.0.3",zt=void 0,eo="info",or=[],$o=function(e,n){var r=zt.levels[eo],i=new RegExp("^("+r+")$");if(e!=="log"&&n.unshift(e.toUpperCase()+":"),or&&or.push([].concat(n)),n.unshift("VIDEOJS:"),!!R.console){var s=R.console[e];!s&&e==="debug"&&(s=R.console.info||R.console.log),!(!s||!r||!i.test(e))&&s[Array.isArray(n)?"apply":"call"](R.console,n)}};zt=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];$o("log",n)};zt.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:eo};zt.level=function(t){if(typeof t=="string"){if(!zt.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');eo=t}return eo};zt.history=function(){return or?[].concat(or):[]};zt.history.clear=function(){or&&(or.length=0)};zt.history.disable=function(){or!==null&&(or.length=0,or=null)};zt.history.enable=function(){or===null&&(or=[])};zt.error=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return $o("error",e)};zt.warn=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return $o("warn",e)};zt.debug=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return $o("debug",e)};var Pe=zt,an=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ae=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},ne=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},Kc=function(t,e){return t.raw=e,t},ak=Object.prototype.toString,t0=function(e){return on(e)?Object.keys(e):[]};function di(t,e){t0(t).forEach(function(n){return e(t[n],n)})}function ok(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return t0(t).reduce(function(r,i){return e(r,t[i],i)},n)}function et(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Object.assign?Object.assign.apply(Object,[t].concat(n)):(n.forEach(function(i){i&&di(i,function(s,a){t[a]=s})}),t)}function on(t){return!!t&&(typeof t>"u"?"undefined":an(t))==="object"}function Ns(t){return on(t)&&ak.call(t)==="[object Object]"&&t.constructor===Object}function Al(t,e){if(!t||!e)return"";if(typeof R.getComputedStyle=="function"){var n=R.getComputedStyle(t);return n?n[e]:""}return""}var uk=Kc([`Setting attributes in the second argument of createEl()
                has been deprecated. Use the third argument instead.
                createEl(type, properties, attributes). Attempting to set `," to ","."],[`Setting attributes in the second argument of createEl()
                has been deprecated. Use the third argument instead.
                createEl(type, properties, attributes). Attempting to set `," to ","."]);function Kh(t){return typeof t=="string"&&/\S/.test(t)}function r0(t){if(/\s/.test(t))throw new Error("class has illegal whitespace characters")}function lk(t){return new RegExp("(^|\\s)"+t+"($|\\s)")}function Bi(){return ue===R.document}function Ys(t){return on(t)&&t.nodeType===1}function n0(){try{return R.parent!==R.self}catch{return!0}}function i0(t){return function(e,n){if(!Kh(e))return ue[t](null);Kh(n)&&(n=ue.querySelector(n));var r=Ys(n)?n:ue;return r[t]&&r[t](e)}}function nt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments[3],i=ue.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(s){var a=e[s];s.indexOf("aria-")!==-1||s==="role"||s==="type"?(Pe.warn(Xc(uk,s,a)),i.setAttribute(s,a)):s==="textContent"?Js(i,a):i[s]=a}),Object.getOwnPropertyNames(n).forEach(function(s){i.setAttribute(s,n[s])}),r&&Zc(i,r),i}function Js(t,e){return typeof t.textContent>"u"?t.innerText=e:t.textContent=e,t}function to(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function wi(t,e){return r0(e),t.classList?t.classList.contains(e):lk(e).test(t.className)}function Pn(t,e){return t.classList?t.classList.add(e):wi(t,e)||(t.className=(t.className+" "+e).trim()),t}function Qs(t,e){return t.classList?t.classList.remove(e):(r0(e),t.className=t.className.split(/\s+/).filter(function(n){return n!==e}).join(" ")),t}function s0(t,e,n){var r=wi(t,e);if(typeof n=="function"&&(n=n(t,e)),typeof n!="boolean"&&(n=!r),n!==r)return n?Pn(t,e):Qs(t,e),t}function a0(t,e){Object.getOwnPropertyNames(e).forEach(function(n){var r=e[n];r===null||typeof r>"u"||r===!1?t.removeAttribute(n):t.setAttribute(n,r===!0?"":r)})}function Er(t){var e={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&t.attributes.length>0)for(var r=t.attributes,i=r.length-1;i>=0;i--){var s=r[i].name,a=r[i].value;(typeof t[s]=="boolean"||n.indexOf(","+s+",")!==-1)&&(a=a!==null),e[s]=a}return e}function o0(t,e){return t.getAttribute(e)}function ro(t,e,n){t.setAttribute(e,n)}function Yc(t,e){t.removeAttribute(e)}function u0(){ue.body.focus(),ue.onselectstart=function(){return!1}}function l0(){ue.onselectstart=function(){return!0}}function Ms(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(r){e[r]!==void 0&&(n[r]=e[r])}),n.height||(n.height=parseFloat(Al(t,"height"))),n.width||(n.width=parseFloat(Al(t,"width"))),n}}function c0(t){var e=void 0;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};var n=ue.documentElement,r=ue.body,i=n.clientLeft||r.clientLeft||0,s=R.pageXOffset||r.scrollLeft,a=e.left+s-i,o=n.clientTop||r.clientTop||0,u=R.pageYOffset||r.scrollTop,l=e.top+u-o;return{left:Math.round(a),top:Math.round(l)}}function Jc(t,e){var n={},r=c0(t),i=t.offsetWidth,s=t.offsetHeight,a=r.top,o=r.left,u=e.pageY,l=e.pageX;return e.changedTouches&&(l=e.changedTouches[0].pageX,u=e.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(a-u+s)/s)),n.x=Math.max(0,Math.min(1,(l-o)/i)),n}function f0(t){return on(t)&&t.nodeType===3}function Qc(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function d0(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(function(e){if(typeof e=="function"&&(e=e()),Ys(e)||f0(e))return e;if(typeof e=="string"&&/\S/.test(e))return ue.createTextNode(e)}).filter(function(e){return e})}function Zc(t,e){return d0(e).forEach(function(n){return t.appendChild(n)}),t}function h0(t,e){return Zc(Qc(t),e)}function Ci(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0?!0:!(t.button!==0||t.buttons!==1)}var un=i0("querySelector"),p0=i0("querySelectorAll"),m0=Object.freeze({isReal:Bi,isEl:Ys,isInFrame:n0,createEl:nt,textContent:Js,prependTo:to,hasClass:wi,addClass:Pn,removeClass:Qs,toggleClass:s0,setAttributes:a0,getAttributes:Er,getAttribute:o0,setAttribute:ro,removeAttribute:Yc,blockTextSelection:u0,unblockTextSelection:l0,getBoundingClientRect:Ms,findPosition:c0,getPointerPosition:Jc,isTextNode:f0,emptyEl:Qc,normalizeContent:d0,appendContent:Zc,insertContent:h0,isSingleLeftClick:Ci,$:un,$$:p0}),ck=1;function Bn(){return ck++}var Ts={},En="vdata"+new Date().getTime();function Us(t){var e=t[En];return e||(e=t[En]=Bn()),Ts[e]||(Ts[e]={}),Ts[e]}function g0(t){var e=t[En];return e?!!Object.getOwnPropertyNames(Ts[e]).length:!1}function v0(t){var e=t[En];if(e){delete Ts[e];try{delete t[En]}catch{t.removeAttribute?t.removeAttribute(En):t[En]=null}}}function Yh(t,e){var n=Us(t);n.handlers[e].length===0&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),Object.getOwnPropertyNames(n).length===0&&v0(t)}function ef(t,e,n,r){n.forEach(function(i){t(e,i,r)})}function jo(t){function e(){return!0}function n(){return!1}if(!t||!t.isPropagationStopped){var r=t||R.event;t={};for(var i in r)i!=="layerX"&&i!=="layerY"&&i!=="keyLocation"&&i!=="webkitMovementX"&&i!=="webkitMovementY"&&(i==="returnValue"&&r.preventDefault||(t[i]=r[i]));if(t.target||(t.target=t.srcElement||ue),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){r.preventDefault&&r.preventDefault(),t.returnValue=!1,r.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),t.cancelBubble=!0,r.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=n,t.clientX!==null&&t.clientX!==void 0){var s=ue.documentElement,a=ue.body;t.pageX=t.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),t.pageY=t.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t}var y0=!1;(function(){try{var t=Object.defineProperty({},"passive",{get:function(){y0=!0}});R.addEventListener("test",null,t),R.removeEventListener("test",null,t)}catch{}})();var fk=["touchstart","touchmove"];function lr(t,e,n){if(Array.isArray(e))return ef(lr,t,e,n);var r=Us(t);if(r.handlers||(r.handlers={}),r.handlers[e]||(r.handlers[e]=[]),n.guid||(n.guid=Bn()),r.handlers[e].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(s,a){if(!r.disabled){s=jo(s);var o=r.handlers[s.type];if(o)for(var u=o.slice(0),l=0,c=u.length;l<c&&!s.isImmediatePropagationStopped();l++)try{u[l].call(t,s,a)}catch(f){Pe.error(f)}}}),r.handlers[e].length===1)if(t.addEventListener){var i=!1;y0&&fk.indexOf(e)>-1&&(i={passive:!0}),t.addEventListener(e,r.dispatcher,i)}else t.attachEvent&&t.attachEvent("on"+e,r.dispatcher)}function Wt(t,e,n){if(g0(t)){var r=Us(t);if(r.handlers){if(Array.isArray(e))return ef(Wt,t,e,n);var i=function(l,c){r.handlers[c]=[],Yh(l,c)};if(e===void 0){for(var s in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},s)&&i(t,s);return}var a=r.handlers[e];if(a){if(!n){i(t,e);return}if(n.guid)for(var o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);Yh(t,e)}}}}function $i(t,e,n){var r=g0(t)?Us(t):{},i=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=jo(e),r.dispatcher&&r.dispatcher.call(t,e,n),i&&!e.isPropagationStopped()&&e.bubbles===!0)$i.call(null,i,e,n);else if(!i&&!e.defaultPrevented){var s=Us(e.target);e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function Zs(t,e,n){if(Array.isArray(e))return ef(Zs,t,e,n);var r=function i(){Wt(t,e,i),n.apply(this,arguments)};r.guid=n.guid=n.guid||Bn(),lr(t,e,r)}var dk=Object.freeze({fixEvent:jo,on:lr,off:Wt,trigger:$i,one:Zs}),Il=!1,kl=void 0,hk=function(){if(!(!Bi()||kl.options.autoSetup===!1)){var e=Array.prototype.slice.call(ue.getElementsByTagName("video")),n=Array.prototype.slice.call(ue.getElementsByTagName("audio")),r=Array.prototype.slice.call(ue.getElementsByTagName("video-js")),i=e.concat(n,r);if(i&&i.length>0)for(var s=0,a=i.length;s<a;s++){var o=i[s];if(o&&o.getAttribute){if(o.player===void 0){var u=o.getAttribute("data-setup");u!==null&&kl(o)}}else{Pl(1);break}}else Il||Pl(1)}};function Pl(t,e){e&&(kl=e),R.setTimeout(hk,t)}Bi()&&ue.readyState==="complete"?Il=!0:Zs(R,"load",function(){Il=!0});var _0=function(e){var n=ue.createElement("style");return n.className=e,n},b0=function(e,n){e.styleSheet?e.styleSheet.cssText=n:e.textContent=n},Ae=function(e,n,r){n.guid||(n.guid=Bn());var i=function(){return n.apply(e,arguments)};return i.guid=r?r+"_"+n.guid:n.guid,i},Ai=function(e,n){var r=Date.now(),i=function(){var a=Date.now();a-r>=n&&(e.apply(void 0,arguments),r=a)};return i},pk=function(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:R,s=void 0;return function(){var a=this,o=arguments,u=function(){s=null,u=null,r||e.apply(a,o)};!s&&r&&e.apply(a,o),i.clearTimeout(s),s=i.setTimeout(u,n)}},mt=function(){};mt.prototype.allowedEvents_={};mt.prototype.on=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},lr(this,t,e),this.addEventListener=n};mt.prototype.addEventListener=mt.prototype.on;mt.prototype.off=function(t,e){Wt(this,t,e)};mt.prototype.removeEventListener=mt.prototype.off;mt.prototype.one=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},Zs(this,t,e),this.addEventListener=n};mt.prototype.trigger=function(t){var e=t.type||t;typeof t=="string"&&(t={type:e}),t=jo(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),$i(this,t)};mt.prototype.dispatchEvent=mt.prototype.trigger;var Ho=function(e){return e instanceof mt||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(n){return typeof e[n]=="function"})},T0=function(e){return typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length},tf=function(e){if(!e.nodeName&&!Ho(e))throw new Error("Invalid target; must be a DOM node or evented object.")},S0=function(e){if(!T0(e))throw new Error("Invalid event type; must be a non-empty string or array.")},x0=function(e){if(typeof e!="function")throw new Error("Invalid listener; must be a function.")},Jh=function(e,n){var r=n.length<3||n[0]===e||n[0]===e.eventBusEl_,i=void 0,s=void 0,a=void 0;return r?(i=e.eventBusEl_,n.length>=3&&n.shift(),s=n[0],a=n[1]):(i=n[0],s=n[1],a=n[2]),tf(i),S0(s),x0(a),a=Ae(e,a),{isTargetingSelf:r,target:i,type:s,listener:a}},ss=function(e,n,r,i){tf(e),e.nodeName?dk[n](e,r,i):e[n](r,i)},mk={on:function(){for(var e=this,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=Jh(this,r),a=s.isTargetingSelf,o=s.target,u=s.type,l=s.listener;if(ss(o,"on",u,l),!a){var c=function(){return e.off(o,u,l)};c.guid=l.guid;var f=function(){return e.off("dispose",c)};f.guid=l.guid,ss(this,"on","dispose",c),ss(o,"on","dispose",f)}},one:function(){for(var e=this,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=Jh(this,r),a=s.isTargetingSelf,o=s.target,u=s.type,l=s.listener;if(a)ss(o,"one",u,l);else{var c=function f(){for(var d=arguments.length,h=Array(d),g=0;g<d;g++)h[g]=arguments[g];e.off(o,u,f),l.apply(null,h)};c.guid=l.guid,ss(o,"one",u,c)}},off:function(e,n,r){if(!e||T0(e))Wt(this.eventBusEl_,e,n);else{var i=e,s=n;tf(i),S0(s),x0(r),r=Ae(this,r),this.off("dispose",r),i.nodeName?(Wt(i,s,r),Wt(i,"dispose",r)):Ho(i)&&(i.off(s,r),i.off("dispose",r))}},trigger:function(e,n){return $i(this.eventBusEl_,e,n)}};function rf(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.eventBusKey;if(n){if(!t[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');t.eventBusEl_=t[n]}else t.eventBusEl_=nt("span",{className:"vjs-event-bus"});return et(t,mk),t.on("dispose",function(){t.off(),R.setTimeout(function(){t.eventBusEl_=null},0)}),t}var gk={state:{},setState:function(e){var n=this;typeof e=="function"&&(e=e());var r=void 0;return di(e,function(i,s){n.state[s]!==i&&(r=r||{},r[s]={from:n.state[s],to:i}),n.state[s]=i}),r&&Ho(this)&&this.trigger({changes:r,type:"statechanged"}),r}};function E0(t,e){return et(t,gk),t.state=et({},t.state,e),typeof t.handleStateChanged=="function"&&Ho(t)&&t.on("statechanged",t.handleStateChanged),t}function Qe(t){return typeof t!="string"?t:t.charAt(0).toUpperCase()+t.slice(1)}function vk(t,e){return Qe(t)===Qe(e)}function Ke(){for(var t={},e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach(function(i){i&&di(i,function(s,a){if(!Ns(s)){t[a]=s;return}Ns(t[a])||(t[a]={}),t[a]=Ke(t[a],s)})}),t}var X=function(){function t(e,n,r){if(te(this,t),!e&&this.play?this.player_=e=this:this.player_=e,this.options_=Ke({},this.options_),n=this.options_=Ke(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var i=e&&e.id&&e.id()||"no_player";this.id_=i+"_component_"+Bn()}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),n.evented!==!1&&rf(this,{eventBusKey:this.el_?"el_":null}),E0(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},n.initChildren!==!1&&this.initChildren(),this.ready(r),n.reportTouchActivity!==!1&&this.enableTouchActivity()}return t.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var n=this.children_.length-1;n>=0;n--)this.children_[n].dispose&&this.children_[n].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),v0(this.el_),this.el_=null),this.player_=null},t.prototype.player=function(){return this.player_},t.prototype.options=function(n){return Pe.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),n?(this.options_=Ke(this.options_,n),this.options_):this.options_},t.prototype.el=function(){return this.el_},t.prototype.createEl=function(n,r,i){return nt(n,r,i)},t.prototype.localize=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n,s=this.player_.language&&this.player_.language(),a=this.player_.languages&&this.player_.languages(),o=a&&a[s],u=s&&s.split("-")[0],l=a&&a[u],c=i;return o&&o[n]?c=o[n]:l&&l[n]&&(c=l[n]),r&&(c=c.replace(/\{(\d+)\}/g,function(f,d){var h=r[d-1],g=h;return typeof h>"u"&&(g=f),g})),c},t.prototype.contentEl=function(){return this.contentEl_||this.el_},t.prototype.id=function(){return this.id_},t.prototype.name=function(){return this.name_},t.prototype.children=function(){return this.children_},t.prototype.getChildById=function(n){return this.childIndex_[n]},t.prototype.getChild=function(n){if(n)return n=Qe(n),this.childNameIndex_[n]},t.prototype.addChild=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.children_.length,s=void 0,a=void 0;if(typeof n=="string"){a=Qe(n);var o=r.componentClass||a;r.name=a;var u=t.getComponent(o);if(!u)throw new Error("Component "+o+" does not exist");if(typeof u!="function")return null;s=new u(this.player_||this,r)}else s=n;if(this.children_.splice(i,0,s),typeof s.id=="function"&&(this.childIndex_[s.id()]=s),a=a||s.name&&Qe(s.name()),a&&(this.childNameIndex_[a]=s),typeof s.el=="function"&&s.el()){var l=this.contentEl().children,c=l[i]||null;this.contentEl().insertBefore(s.el(),c)}return s},t.prototype.removeChild=function(n){if(typeof n=="string"&&(n=this.getChild(n)),!(!n||!this.children_)){for(var r=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===n){r=!0,this.children_.splice(i,1);break}if(r){this.childIndex_[n.id()]=null,this.childNameIndex_[n.name()]=null;var s=n.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(n.el())}}},t.prototype.initChildren=function(){var n=this,r=this.options_.children;if(r){var i=this.options_,s=function(l){var c=l.name,f=l.opts;if(i[c]!==void 0&&(f=i[c]),f!==!1){f===!0&&(f={}),f.playerOptions=n.options_.playerOptions;var d=n.addChild(c,f);d&&(n[c]=d)}},a=void 0,o=t.getComponent("Tech");Array.isArray(r)?a=r:a=Object.keys(r),a.concat(Object.keys(this.options_).filter(function(u){return!a.some(function(l){return typeof l=="string"?u===l:u===l.name})})).map(function(u){var l=void 0,c=void 0;return typeof u=="string"?(l=u,c=r[l]||n.options_[l]||{}):(l=u.name,c=u),{name:l,opts:c}}).filter(function(u){var l=t.getComponent(u.opts.componentClass||Qe(u.name));return l&&!o.isTech(l)}).forEach(s)}},t.prototype.buildCSSClass=function(){return""},t.prototype.ready=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(n);return}r?n.call(this):this.setTimeout(n,1)}},t.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var n=this.readyQueue_;this.readyQueue_=[],n&&n.length>0&&n.forEach(function(r){r.call(this)},this),this.trigger("ready")},1)},t.prototype.$=function(n,r){return un(n,r||this.contentEl())},t.prototype.$$=function(n,r){return p0(n,r||this.contentEl())},t.prototype.hasClass=function(n){return wi(this.el_,n)},t.prototype.addClass=function(n){Pn(this.el_,n)},t.prototype.removeClass=function(n){Qs(this.el_,n)},t.prototype.toggleClass=function(n,r){s0(this.el_,n,r)},t.prototype.show=function(){this.removeClass("vjs-hidden")},t.prototype.hide=function(){this.addClass("vjs-hidden")},t.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},t.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.prototype.getAttribute=function(n){return o0(this.el_,n)},t.prototype.setAttribute=function(n,r){ro(this.el_,n,r)},t.prototype.removeAttribute=function(n){Yc(this.el_,n)},t.prototype.width=function(n,r){return this.dimension("width",n,r)},t.prototype.height=function(n,r){return this.dimension("height",n,r)},t.prototype.dimensions=function(n,r){this.width(n,!0),this.height(r)},t.prototype.dimension=function(n,r,i){if(r!==void 0){(r===null||r!==r)&&(r=0),(""+r).indexOf("%")!==-1||(""+r).indexOf("px")!==-1?this.el_.style[n]=r:r==="auto"?this.el_.style[n]="":this.el_.style[n]=r+"px",i||this.trigger("componentresize");return}if(!this.el_)return 0;var s=this.el_.style[n],a=s.indexOf("px");return parseInt(a!==-1?s.slice(0,a):this.el_["offset"+Qe(n)],10)},t.prototype.currentDimension=function(n){var r=0;if(n!=="width"&&n!=="height")throw new Error("currentDimension only accepts width or height value");if(typeof R.getComputedStyle=="function"){var i=R.getComputedStyle(this.el_);r=i.getPropertyValue(n)||i[n]}if(r=parseFloat(r),r===0){var s="offset"+Qe(n);r=this.el_[s]}return r},t.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.prototype.currentWidth=function(){return this.currentDimension("width")},t.prototype.currentHeight=function(){return this.currentDimension("height")},t.prototype.focus=function(){this.el_.focus()},t.prototype.blur=function(){this.el_.blur()},t.prototype.emitTapEvents=function(){var n=0,r=null,i=10,s=200,a=void 0;this.on("touchstart",function(u){u.touches.length===1&&(r={pageX:u.touches[0].pageX,pageY:u.touches[0].pageY},n=new Date().getTime(),a=!0)}),this.on("touchmove",function(u){if(u.touches.length>1)a=!1;else if(r){var l=u.touches[0].pageX-r.pageX,c=u.touches[0].pageY-r.pageY,f=Math.sqrt(l*l+c*c);f>i&&(a=!1)}});var o=function(){a=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(u){if(r=null,a===!0){var l=new Date().getTime()-n;l<s&&(u.preventDefault(),this.trigger("tap"))}})},t.prototype.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var n=Ae(this.player(),this.player().reportUserActivity),r=void 0;this.on("touchstart",function(){n(),this.clearInterval(r),r=this.setInterval(n,250)});var i=function(a){n(),this.clearInterval(r)};this.on("touchmove",n),this.on("touchend",i),this.on("touchcancel",i)}},t.prototype.setTimeout=function(n,r){var i=this;n=Ae(this,n);var s=R.setTimeout(n,r),a=function(){return i.clearTimeout(s)};return a.guid="vjs-timeout-"+s,this.on("dispose",a),s},t.prototype.clearTimeout=function(n){R.clearTimeout(n);var r=function(){};return r.guid="vjs-timeout-"+n,this.off("dispose",r),n},t.prototype.setInterval=function(n,r){var i=this;n=Ae(this,n);var s=R.setInterval(n,r),a=function(){return i.clearInterval(s)};return a.guid="vjs-interval-"+s,this.on("dispose",a),s},t.prototype.clearInterval=function(n){R.clearInterval(n);var r=function(){};return r.guid="vjs-interval-"+n,this.off("dispose",r),n},t.prototype.requestAnimationFrame=function(n){var r=this;if(this.supportsRaf_){n=Ae(this,n);var i=R.requestAnimationFrame(n),s=function(){return r.cancelAnimationFrame(i)};return s.guid="vjs-raf-"+i,this.on("dispose",s),i}return this.setTimeout(n,1e3/60)},t.prototype.cancelAnimationFrame=function(n){if(this.supportsRaf_){R.cancelAnimationFrame(n);var r=function(){};return r.guid="vjs-raf-"+n,this.off("dispose",r),n}return this.clearTimeout(n)},t.registerComponent=function(n,r){if(typeof n!="string"||!n)throw new Error('Illegal component name, "'+n+'"; must be a non-empty string.');var i=t.getComponent("Tech"),s=i&&i.isTech(r),a=t===r||t.prototype.isPrototypeOf(r.prototype);if(s||!a){var o=void 0;throw s?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error('Illegal component, "'+n+'"; '+o+".")}n=Qe(n),t.components_||(t.components_={});var u=t.getComponent("Player");if(n==="Player"&&u&&u.players){var l=u.players,c=Object.keys(l);if(l&&c.length>0&&c.map(function(f){return l[f]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[n]=r,r},t.getComponent=function(n){if(n&&(n=Qe(n),t.components_&&t.components_[n]))return t.components_[n]},t}();X.prototype.supportsRaf_=typeof R.requestAnimationFrame=="function"&&typeof R.cancelAnimationFrame=="function";X.registerComponent("Component",X);var Ct=R.navigator&&R.navigator.userAgent||"",Qh=/AppleWebKit\/([\d.]+)/i.exec(Ct),yk=Qh?parseFloat(Qh.pop()):null,nf=/iPad/i.test(Ct),sf=/iPhone/i.test(Ct)&&!nf,w0=/iPod/i.test(Ct),$n=sf||nf||w0,_k=function(){var t=Ct.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),jn=/Android/i.test(Ct),af=function(){var t=Ct.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),n=t[2]&&parseFloat(t[2]);return e&&n?parseFloat(t[1]+"."+t[2]):e||null}(),C0=jn&&af<5&&yk<537,A0=/Firefox/i.test(Ct),of=/Edge/i.test(Ct),ea=!of&&/Chrome/i.test(Ct),I0=function(){var t=Ct.match(/Chrome\/(\d+)/);return t&&t[1]?parseFloat(t[1]):null}(),bk=function(){var t=/MSIE\s(\d+)\.\d/.exec(Ct),e=t&&parseFloat(t[1]);return!e&&/Trident\/7.0/i.test(Ct)&&/rv:11.0/.test(Ct)&&(e=11),e}(),k0=/Safari/i.test(Ct)&&!ea&&!jn&&!of,P0=k0||$n,no=Bi()&&("ontouchstart"in R||R.DocumentTouch&&R.document instanceof R.DocumentTouch),Tk=Object.freeze({IS_IPAD:nf,IS_IPHONE:sf,IS_IPOD:w0,IS_IOS:$n,IOS_VERSION:_k,IS_ANDROID:jn,ANDROID_VERSION:af,IS_NATIVE_ANDROID:C0,IS_FIREFOX:A0,IS_EDGE:of,IS_CHROME:ea,CHROME_VERSION:I0,IE_VERSION:bk,IS_SAFARI:k0,IS_ANY_SAFARI:P0,TOUCH_ENABLED:no});function Sk(t,e,n){if(typeof e!="number"||e<0||e>n)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+n+").")}function Zh(t,e,n,r){return Sk(t,r,n.length-1),n[r][e]}function Mu(t){return t===void 0||t.length===0?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:Zh.bind(null,"start",0,t),end:Zh.bind(null,"end",1,t)}}function On(t,e){return Array.isArray(t)?Mu(t):t===void 0||e===void 0?Mu():Mu([[t,e]])}function O0(t,e){var n=0,r=void 0,i=void 0;if(!e)return 0;(!t||!t.length)&&(t=On(0,0));for(var s=0;s<t.length;s++)r=t.start(s),i=t.end(s),i>e&&(i=e),n+=i-r;return n/e}var Ol={},Da=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],xk=Da[0],La=void 0;for(var xa=0;xa<Da.length;xa++)if(Da[xa][1]in ue){La=Da[xa];break}if(La)for(var Ea=0;Ea<La.length;Ea++)Ol[xk[Ea]]=La[Ea];function Et(t){if(t instanceof Et)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:on(t)&&(typeof t.code=="number"&&(this.code=t.code),et(this,t)),this.message||(this.message=Et.defaultMessages[this.code]||"")}Et.prototype.code=0;Et.prototype.message="";Et.prototype.status=null;Et.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Et.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var ei=0;ei<Et.errorTypes.length;ei++)Et[Et.errorTypes[ei]]=ei,Et.prototype[Et.errorTypes[ei]]=ei;function R0(t){return t!=null&&typeof t.then=="function"}function Rl(t){R0(t)&&t.then(null,function(e){})}var Dl=function(e){var n=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(r,i,s){return e[i]&&(r[i]=e[i]),r},{cues:e.cues&&Array.prototype.map.call(e.cues,function(r){return{startTime:r.startTime,endTime:r.endTime,text:r.text,id:r.id}})});return n},Ek=function(e){var n=e.$$("track"),r=Array.prototype.map.call(n,function(s){return s.track}),i=Array.prototype.map.call(n,function(s){var a=Dl(s.track);return s.src&&(a.src=s.src),a});return i.concat(Array.prototype.filter.call(e.textTracks(),function(s){return r.indexOf(s)===-1}).map(Dl))},wk=function(e,n){return e.forEach(function(r){var i=n.addRemoteTextTrack(r).track;!r.src&&r.cues&&r.cues.forEach(function(s){return i.addCue(s)})}),n.textTracks()},ep={textTracksToJson:Ek,jsonToTextTracks:wk,trackToJson_:Dl},Uu="vjs-modal-dialog",Ck=27,ji=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=nt("div",{className:Uu+"-content"},{role:"document"}),i.descEl_=nt("p",{className:Uu+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),Js(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}return e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},e.prototype.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,t.prototype.dispose.call(this)},e.prototype.buildCSSClass=function(){return Uu+" vjs-hidden "+t.prototype.buildCSSClass.call(this)},e.prototype.handleKeyPress=function(r){r.which===Ck&&this.closeable()&&this.close()},e.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},e.prototype.description=function(){var r=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(r+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),r},e.prototype.open=function(){if(!this.opened_){var r=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!r.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&r.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",Ae(this,this.handleKeyPress)),this.hadControls_=r.controls(),r.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},e.prototype.opened=function(r){return typeof r=="boolean"&&this[r?"open":"close"](),this.opened_},e.prototype.close=function(){if(this.opened_){var r=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&r.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",Ae(this,this.handleKeyPress)),this.hadControls_&&r.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},e.prototype.closeable=function(r){if(typeof r=="boolean"){var i=this.closeable_=!!r,s=this.getChild("closeButton");if(i&&!s){var a=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=a,this.on(s,"close",this.close)}!i&&s&&(this.off(s,"close",this.close),this.removeChild(s),s.dispose())}return this.closeable_},e.prototype.fill=function(){this.fillWith(this.content())},e.prototype.fillWith=function(r){var i=this.contentEl(),s=i.parentNode,a=i.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(i),this.empty(),h0(i,r),this.trigger("modalfill"),a?s.insertBefore(i,a):s.appendChild(i);var o=this.getChild("closeButton");o&&s.appendChild(o.el_)},e.prototype.empty=function(){this.trigger("beforemodalempty"),Qc(this.contentEl()),this.trigger("modalempty")},e.prototype.content=function(r){return typeof r<"u"&&(this.content_=r),this.content_},e.prototype.conditionalFocus_=function(){var r=ue.activeElement,i=this.player_.el_;this.previouslyActiveEl_=null,(i.contains(r)||i===r)&&(this.previouslyActiveEl_=r,this.focus(),this.on(ue,"keydown",this.handleKeyDown))},e.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(ue,"keydown",this.handleKeyDown)},e.prototype.handleKeyDown=function(r){if(r.which===9){for(var i=this.focusableEls_(),s=this.el_.querySelector(":focus"),a=void 0,o=0;o<i.length;o++)if(s===i[o]){a=o;break}ue.activeElement===this.el_&&(a=0),r.shiftKey&&a===0?(i[i.length-1].focus(),r.preventDefault()):!r.shiftKey&&a===i.length-1&&(i[0].focus(),r.preventDefault())}},e.prototype.focusableEls_=function(){var r=this.el_.querySelectorAll("*");return Array.prototype.filter.call(r,function(i){return(i instanceof R.HTMLAnchorElement||i instanceof R.HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof R.HTMLInputElement||i instanceof R.HTMLSelectElement||i instanceof R.HTMLTextAreaElement||i instanceof R.HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof R.HTMLIFrameElement||i instanceof R.HTMLObjectElement||i instanceof R.HTMLEmbedElement||i.hasAttribute("tabindex")&&i.getAttribute("tabindex")!==-1||i.hasAttribute("contenteditable")})},e}(X);ji.prototype.options_={pauseOnOpen:!0,temporary:!0};X.registerComponent("ModalDialog",ji);var Ii=function(t){ae(e,t);function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];te(this,e);var r=ne(this,t.call(this));r.tracks_=[],Object.defineProperty(r,"length",{get:function(){return this.tracks_.length}});for(var i=0;i<n.length;i++)r.addTrack(n[i]);return r}return e.prototype.addTrack=function(r){var i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.tracks_[i]}}),this.tracks_.indexOf(r)===-1&&(this.tracks_.push(r),this.trigger({track:r,type:"addtrack"}))},e.prototype.removeTrack=function(r){for(var i=void 0,s=0,a=this.length;s<a;s++)if(this[s]===r){i=this[s],i.off&&i.off(),this.tracks_.splice(s,1);break}i&&this.trigger({track:i,type:"removetrack"})},e.prototype.getTrackById=function(r){for(var i=null,s=0,a=this.length;s<a;s++){var o=this[s];if(o.id===r){i=o;break}}return i},e}(mt);Ii.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var Ak in Ii.prototype.allowedEvents_)Ii.prototype["on"+Ak]=null;var Fu=function(e,n){for(var r=0;r<e.length;r++)!Object.keys(e[r]).length||n.id===e[r].id||(e[r].enabled=!1)},Ik=function(t){ae(e,t);function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];te(this,e);for(var r=n.length-1;r>=0;r--)if(n[r].enabled){Fu(n,n[r]);break}var i=ne(this,t.call(this,n));return i.changing_=!1,i}return e.prototype.addTrack=function(r){var i=this;r.enabled&&Fu(this,r),t.prototype.addTrack.call(this,r),r.addEventListener&&r.addEventListener("enabledchange",function(){i.changing_||(i.changing_=!0,Fu(i,r),i.changing_=!1,i.trigger("change"))})},e}(Ii),Bu=function(e,n){for(var r=0;r<e.length;r++)!Object.keys(e[r]).length||n.id===e[r].id||(e[r].selected=!1)},kk=function(t){ae(e,t);function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];te(this,e);for(var r=n.length-1;r>=0;r--)if(n[r].selected){Bu(n,n[r]);break}var i=ne(this,t.call(this,n));return i.changing_=!1,Object.defineProperty(i,"selectedIndex",{get:function(){for(var a=0;a<this.length;a++)if(this[a].selected)return a;return-1},set:function(){}}),i}return e.prototype.addTrack=function(r){var i=this;r.selected&&Bu(this,r),t.prototype.addTrack.call(this,r),r.addEventListener&&r.addEventListener("selectedchange",function(){i.changing_||(i.changing_=!0,Bu(i,r),i.changing_=!1,i.trigger("change"))})},e}(Ii),D0=function(t){ae(e,t);function e(){return te(this,e),ne(this,t.apply(this,arguments))}return e.prototype.addTrack=function(r){t.prototype.addTrack.call(this,r),r.addEventListener("modechange",Ae(this,function(){this.trigger("change")}));var i=["metadata","chapters"];i.indexOf(r.kind)===-1&&r.addEventListener("modechange",Ae(this,function(){this.trigger("selectedlanguagechange")}))},e}(Ii),Pk=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];te(this,t),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var n=0,r=e.length;n<r;n++)this.addTrackElement_(e[n])}return t.prototype.addTrackElement_=function(n){var r=this.trackElements_.length;""+r in this||Object.defineProperty(this,r,{get:function(){return this.trackElements_[r]}}),this.trackElements_.indexOf(n)===-1&&this.trackElements_.push(n)},t.prototype.getTrackElementByTrack_=function(n){for(var r=void 0,i=0,s=this.trackElements_.length;i<s;i++)if(n===this.trackElements_[i].track){r=this.trackElements_[i];break}return r},t.prototype.removeTrackElement_=function(n){for(var r=0,i=this.trackElements_.length;r<i;r++)if(n===this.trackElements_[r]){this.trackElements_.splice(r,1);break}},t}(),tp=function(){function t(e){te(this,t),t.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function(){return this.length_}})}return t.prototype.setCues_=function(n){var r=this.length||0,i=0,s=n.length;this.cues_=n,this.length_=n.length;var a=function(u){""+u in this||Object.defineProperty(this,""+u,{get:function(){return this.cues_[u]}})};if(r<s)for(i=r;i<s;i++)a.call(this,i)},t.prototype.getCueById=function(n){for(var r=null,i=0,s=this.length;i<s;i++){var a=this[i];if(a.id===n){r=a;break}}return r},t}(),Ok={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Rk={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Dk={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},rp={disabled:"disabled",hidden:"hidden",showing:"showing"},uf=function(t){ae(e,t);function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};te(this,e);var r=ne(this,t.call(this)),i={id:n.id||"vjs_track_"+Bn(),kind:n.kind||"",label:n.label||"",language:n.language||""},s=function(u){Object.defineProperty(r,u,{get:function(){return i[u]},set:function(){}})};for(var a in i)s(a);return r}return e}(mt),lf=function(e){var n=["protocol","hostname","port","pathname","search","hash","host"],r=ue.createElement("a");r.href=e;var i=r.host===""&&r.protocol!=="file:",s=void 0;i&&(s=ue.createElement("div"),s.innerHTML='<a href="'+e+'"></a>',r=s.firstChild,s.setAttribute("style","display:none; position:absolute;"),ue.body.appendChild(s));for(var a={},o=0;o<n.length;o++)a[n[o]]=r[n[o]];return a.protocol==="http:"&&(a.host=a.host.replace(/:80$/,"")),a.protocol==="https:"&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=R.location.protocol),i&&ue.body.removeChild(s),a},L0=function(e){if(!e.match(/^https?:\/\//)){var n=ue.createElement("div");n.innerHTML='<a href="'+e+'">x</a>',e=n.firstChild.href}return e},cf=function(e){if(typeof e=="string"){var n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,r=n.exec(e);if(r)return r.pop().toLowerCase()}return""},Vo=function(e){var n=R.location,r=lf(e),i=r.protocol===":"?n.protocol:r.protocol,s=i+r.host!==n.protocol+n.host;return s},Lk=Object.freeze({parseUrl:lf,getAbsoluteURL:L0,getFileExtension:cf,isCrossOrigin:Vo}),np=function(e,n){var r=new R.WebVTT.Parser(R,R.vttjs,R.WebVTT.StringDecoder()),i=[];r.oncue=function(s){n.addCue(s)},r.onparsingerror=function(s){i.push(s)},r.onflush=function(){n.trigger({type:"loadeddata",target:n})},r.parse(e),i.length>0&&(R.console&&R.console.groupCollapsed&&R.console.groupCollapsed("Text Track parsing errors for "+n.src),i.forEach(function(s){return Pe.error(s)}),R.console&&R.console.groupEnd&&R.console.groupEnd()),r.flush()},Nk=function(e,n){var r={uri:e},i=Vo(e);i&&(r.cors=i),Zv(r,Ae(this,function(s,a,o){if(s)return Pe.error(s,a);if(n.loaded_=!0,typeof R.WebVTT!="function"){if(n.tech_){var u=function(){return np(o,n)};n.tech_.on("vttjsloaded",u),n.tech_.on("vttjserror",function(){Pe.error("vttjs failed to load, stopping trying to process "+n.src),n.tech_.off("vttjsloaded",u)})}}else np(o,n)}))},ta=function(t){ae(e,t);function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(te(this,e),!n.tech)throw new Error("A tech was not provided.");var r=Ke(n,{kind:Dk[n.kind]||"subtitles",language:n.language||n.srclang||""}),i=rp[r.mode]||"disabled",s=r.default;(r.kind==="metadata"||r.kind==="chapters")&&(i="hidden");var a=ne(this,t.call(this,r));a.tech_=r.tech,a.cues_=[],a.activeCues_=[];var o=new tp(a.cues_),u=new tp(a.activeCues_),l=!1,c=Ae(a,function(){this.activeCues,l&&(this.trigger("cuechange"),l=!1)});return i!=="disabled"&&a.tech_.ready(function(){a.tech_.on("timeupdate",c)},!0),Object.defineProperties(a,{default:{get:function(){return s},set:function(){}},mode:{get:function(){return i},set:function(d){var h=this;rp[d]&&(i=d,i==="showing"&&this.tech_.ready(function(){h.tech_.on("timeupdate",c)},!0),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?o:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return u;for(var d=this.tech_.currentTime(),h=[],g=0,E=this.cues.length;g<E;g++){var S=this.cues[g];(S.startTime<=d&&S.endTime>=d||S.startTime===S.endTime&&S.startTime<=d&&S.startTime+.5>=d)&&h.push(S)}if(l=!1,h.length!==this.activeCues_.length)l=!0;else for(var x=0;x<h.length;x++)this.activeCues_.indexOf(h[x])===-1&&(l=!0);return this.activeCues_=h,u.setCues_(this.activeCues_),u},set:function(){}}}),r.src?(a.src=r.src,Nk(r.src,a)):a.loaded_=!0,a}return e.prototype.addCue=function(r){var i=r;if(R.vttjs&&!(r instanceof R.vttjs.VTTCue)){i=new R.vttjs.VTTCue(r.startTime,r.endTime,r.text);for(var s in r)s in i||(i[s]=r[s]);i.id=r.id,i.originalCue_=r}for(var a=this.tech_.textTracks(),o=0;o<a.length;o++)a[o]!==this&&a[o].removeCue(i);this.cues_.push(i),this.cues.setCues_(this.cues_)},e.prototype.removeCue=function(r){for(var i=this.cues_.length;i--;){var s=this.cues_[i];if(s===r||s.originalCue_&&s.originalCue_===r){this.cues_.splice(i,1),this.cues.setCues_(this.cues_);break}}},e}(uf);ta.prototype.allowedEvents_={cuechange:"cuechange"};var N0=function(t){ae(e,t);function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};te(this,e);var r=Ke(n,{kind:Rk[n.kind]||""}),i=ne(this,t.call(this,r)),s=!1;return Object.defineProperty(i,"enabled",{get:function(){return s},set:function(o){typeof o!="boolean"||o===s||(s=o,this.trigger("enabledchange"))}}),r.enabled&&(i.enabled=r.enabled),i.loaded_=!0,i}return e}(uf),M0=function(t){ae(e,t);function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};te(this,e);var r=Ke(n,{kind:Ok[n.kind]||""}),i=ne(this,t.call(this,r)),s=!1;return Object.defineProperty(i,"selected",{get:function(){return s},set:function(o){typeof o!="boolean"||o===s||(s=o,this.trigger("selectedchange"))}}),r.selected&&(i.selected=r.selected),i}return e}(uf),U0=0,Mk=1,F0=2,Uk=3,Hi=function(t){ae(e,t);function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};te(this,e);var r=ne(this,t.call(this)),i=void 0,s=new ta(n);return r.kind=s.kind,r.src=s.src,r.srclang=s.language,r.label=s.label,r.default=s.default,Object.defineProperties(r,{readyState:{get:function(){return i}},track:{get:function(){return s}}}),i=U0,s.addEventListener("loadeddata",function(){i=F0,r.trigger({type:"load",target:r})}),r}return e}(mt);Hi.prototype.allowedEvents_={load:"load"};Hi.NONE=U0;Hi.LOADING=Mk;Hi.LOADED=F0;Hi.ERROR=Uk;var Qt={audio:{ListClass:Ik,TrackClass:N0,capitalName:"Audio"},video:{ListClass:kk,TrackClass:M0,capitalName:"Video"},text:{ListClass:D0,TrackClass:ta,capitalName:"Text"}};Object.keys(Qt).forEach(function(t){Qt[t].getterName=t+"Tracks",Qt[t].privateName=t+"Tracks_"});var Fs={remoteText:{ListClass:D0,TrackClass:ta,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Pk,TrackClass:Hi,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},jt=Ke(Qt,Fs);Fs.names=Object.keys(Fs);Qt.names=Object.keys(Qt);jt.names=[].concat(Fs.names).concat(Qt.names);function Fk(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},s=t.textTracks();i.kind=e,n&&(i.label=n),r&&(i.language=r),i.tech=t;var a=new jt.text.TrackClass(i);return s.addTrack(a),a}var Ve=function(t){ae(e,t);function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};te(this,e),n.reportTouchActivity=!1;var i=ne(this,t.call(this,null,n,r));return i.hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),jt.names.forEach(function(s){var a=jt[s];n&&n[a.getterName]&&(i[a.privateName]=n[a.getterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(s){n["native"+s+"Tracks"]===!1&&(i["featuresNative"+s+"Tracks"]=!1)}),n.nativeCaptions===!1||n.nativeTextTracks===!1?i.featuresNativeTextTracks=!1:(n.nativeCaptions===!0||n.nativeTextTracks===!0)&&(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.autoRemoteTextTracks_=new jt.text.ListClass,i.initTrackListeners(),n.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}return e.prototype.triggerSourceset=function(r){var i=this;this.isReady_||this.one("ready",function(){return i.setTimeout(function(){return i.triggerSourceset(r)},1)}),this.trigger({src:r,type:"sourceset"})},e.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},e.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},e.prototype.trackProgress=function(r){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ae(this,function(){var i=this.bufferedPercent();this.bufferedPercent_!==i&&this.trigger("progress"),this.bufferedPercent_=i,i===1&&this.stopTrackingProgress()}),500)},e.prototype.onDurationChange=function(r){this.duration_=this.duration()},e.prototype.buffered=function(){return On(0,0)},e.prototype.bufferedPercent=function(){return O0(this.buffered(),this.duration_)},e.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},e.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},e.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},e.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},e.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.prototype.dispose=function(){this.clearTracks(Qt.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},e.prototype.clearTracks=function(r){var i=this;r=[].concat(r),r.forEach(function(s){for(var a=i[s+"Tracks"]()||[],o=a.length;o--;){var u=a[o];s==="text"&&i.removeRemoteTextTrack(u),a.removeTrack(u)}})},e.prototype.cleanupAutoTextTracks=function(){for(var r=this.autoRemoteTextTracks_||[],i=r.length;i--;){var s=r[i];this.removeRemoteTextTrack(s)}},e.prototype.reset=function(){},e.prototype.error=function(r){return r!==void 0&&(this.error_=new Et(r),this.trigger("error")),this.error_},e.prototype.played=function(){return this.hasStarted_?On(0,0):On()},e.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.prototype.initTrackListeners=function(){var r=this;Qt.names.forEach(function(i){var s=Qt[i],a=function(){r.trigger(i+"trackchange")},o=r[s.getterName]();o.addEventListener("removetrack",a),o.addEventListener("addtrack",a),r.on("dispose",function(){o.removeEventListener("removetrack",a),o.removeEventListener("addtrack",a)})})},e.prototype.addWebVttScript_=function(){var r=this;if(!R.WebVTT)if(ue.body.contains(this.el())){if(!this.options_["vtt.js"]&&Ns(Wh)&&Object.keys(Wh).length>0){this.trigger("vttjsloaded");return}var i=ue.createElement("script");i.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",i.onload=function(){r.trigger("vttjsloaded")},i.onerror=function(){r.trigger("vttjserror")},this.on("dispose",function(){i.onload=null,i.onerror=null}),R.WebVTT=!0,this.el().parentNode.appendChild(i)}else this.ready(this.addWebVttScript_)},e.prototype.emulateTextTracks=function(){var r=this,i=this.textTracks(),s=this.remoteTextTracks(),a=function(f){return i.addTrack(f.track)},o=function(f){return i.removeTrack(f.track)};s.on("addtrack",a),s.on("removetrack",o),this.addWebVttScript_();var u=function(){return r.trigger("texttrackchange")},l=function(){u();for(var f=0;f<i.length;f++){var d=i[f];d.removeEventListener("cuechange",u),d.mode==="showing"&&d.addEventListener("cuechange",u)}};l(),i.addEventListener("change",l),i.addEventListener("addtrack",l),i.addEventListener("removetrack",l),this.on("dispose",function(){s.off("addtrack",a),s.off("removetrack",o),i.removeEventListener("change",l),i.removeEventListener("addtrack",l),i.removeEventListener("removetrack",l);for(var c=0;c<i.length;c++){var f=i[c];f.removeEventListener("cuechange",u)}})},e.prototype.addTextTrack=function(r,i,s){if(!r)throw new Error("TextTrack kind is required but was not provided");return Fk(this,r,i,s)},e.prototype.createRemoteTextTrack=function(r){var i=Ke(r,{tech:this});return new Fs.remoteTextEl.TrackClass(i)},e.prototype.addRemoteTextTrack=function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments[1],a=this.createRemoteTextTrack(i);return s!==!0&&s!==!1&&(Pe.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),s=!0),this.remoteTextTrackEls().addTrackElement_(a),this.remoteTextTracks().addTrack(a.track),s!==!0&&this.ready(function(){return r.autoRemoteTextTracks_.addTrack(a.track)}),a},e.prototype.removeRemoteTextTrack=function(r){var i=this.remoteTextTrackEls().getTrackElementByTrack_(r);this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack(r),this.autoRemoteTextTracks_.removeTrack(r)},e.prototype.getVideoPlaybackQuality=function(){return{}},e.prototype.setPoster=function(){},e.prototype.playsinline=function(){},e.prototype.setPlaysinline=function(){},e.prototype.overrideNativeAudioTracks=function(){},e.prototype.overrideNativeVideoTracks=function(){},e.prototype.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(r,i){return e.canPlayType(r.type)},e.isTech=function(r){return r.prototype instanceof e||r instanceof e||r===e},e.registerTech=function(r,i){if(e.techs_||(e.techs_={}),!e.isTech(i))throw new Error("Tech "+r+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return r=Qe(r),e.techs_[r]=i,r!=="Tech"&&e.defaultTechOrder_.push(r),i},e.getTech=function(r){if(r){if(r=Qe(r),e.techs_&&e.techs_[r])return e.techs_[r];if(R&&R.videojs&&R.videojs[r])return Pe.warn("The "+r+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),R.videojs[r]}},e}(X);jt.names.forEach(function(t){var e=jt[t];Ve.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Ve.prototype.featuresVolumeControl=!0;Ve.prototype.featuresFullscreenResize=!1;Ve.prototype.featuresPlaybackRate=!1;Ve.prototype.featuresProgressEvents=!1;Ve.prototype.featuresSourceset=!1;Ve.prototype.featuresTimeupdateEvents=!1;Ve.prototype.featuresNativeTextTracks=!1;Ve.withSourceHandlers=function(t){t.registerSourceHandler=function(n,r){var i=t.sourceHandlers;i||(i=t.sourceHandlers=[]),r===void 0&&(r=i.length),i.splice(r,0,n)},t.canPlayType=function(n){for(var r=t.sourceHandlers||[],i=void 0,s=0;s<r.length;s++)if(i=r[s].canPlayType(n),i)return i;return""},t.selectSourceHandler=function(n,r){for(var i=t.sourceHandlers||[],s=void 0,a=0;a<i.length;a++)if(s=i[a].canHandleSource(n,r),s)return i[a];return null},t.canPlaySource=function(n,r){var i=t.selectSourceHandler(n,r);return i?i.canHandleSource(n,r):""};var e=["seekable","seeking","duration"];e.forEach(function(n){var r=this[n];typeof r=="function"&&(this[n]=function(){return this.sourceHandler_&&this.sourceHandler_[n]?this.sourceHandler_[n].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(n){var r=t.selectSourceHandler(n,this.options_);r||(t.nativeSourceHandler?r=t.nativeSourceHandler:Pe.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),r!==t.nativeSourceHandler&&(this.currentSource_=n),this.sourceHandler_=r.handleSource(n,this,this.options_),this.on("dispose",this.disposeSourceHandler)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};X.registerComponent("Tech",Ve);Ve.registerTech("Tech",Ve);Ve.defaultTechOrder_=[];var Rn={},Ll={},io={};function Bk(t,e){Rn[t]=Rn[t]||[],Rn[t].push(e)}function $k(t,e,n){t.setTimeout(function(){return ni(e,Rn[e.type],n,t)},1)}function jk(t,e){t.forEach(function(n){return n.setTech&&n.setTech(e)})}function Hk(t,e,n){return t.reduceRight(ff(n),e[n]())}function Vk(t,e,n,r){return e[n](t.reduce(ff(n),r))}function ip(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i="call"+Qe(n),s=t.reduce(ff(i),r),a=s===io,o=a?null:e[n](s);return qk(t,n,o,a),o}var Wk={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},zk={setCurrentTime:1},sp={play:1,pause:1};function ff(t){return function(e,n){return e===io?io:n[t]?n[t](e):e}}function qk(t,e,n,r){for(var i=t.length-1;i>=0;i--){var s=t[i];s[e]&&s[e](r,n)}}function Gk(t){Ll[t.id()]=null}function Xk(t,e){var n=Ll[t.id()],r=null;if(n==null)return r=e(t),Ll[t.id()]=[[e,r]],r;for(var i=0;i<n.length;i++){var s=n[i],a=s[0],o=s[1];a===e&&(r=o)}return r===null&&(r=e(t),n.push([e,r])),r}function ni(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments[2],r=arguments[3],i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,a=e[0],o=e.slice(1);if(typeof a=="string")ni(t,Rn[a],n,r,i,s);else if(a){var u=Xk(r,a);u.setSource(et({},t),function(l,c){if(l)return ni(t,o,n,r,i,s);i.push(u),ni(c,t.type===c.type?o:Rn[c.type],n,r,i,s)})}else o.length?ni(t,o,n,r,i,s):s?n(t,i):ni(t,Rn["*"],n,r,i,!0)}var Kk={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},B0=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=cf(e),r=Kk[n.toLowerCase()];return r||""},Yk=function(e,n){if(!n)return"";if(e.cache_.source.src===n&&e.cache_.source.type)return e.cache_.source.type;var r=e.cache_.sources.filter(function(o){return o.src===n});if(r.length)return r[0].type;for(var i=e.$$("source"),s=0;s<i.length;s++){var a=i[s];if(a.type&&a.src&&a.src===n)return a.type}return B0(n)},Jk=function t(e){if(Array.isArray(e)){var n=[];e.forEach(function(r){r=t(r),Array.isArray(r)?n=n.concat(r):on(r)&&n.push(r)}),e=n}else typeof e=="string"&&e.trim()?e=[ap({src:e})]:on(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[ap(e)]:e=[];return e};function ap(t){var e=B0(t.src);return!t.type&&e&&(t.type=e),t}var Qk=function(t){ae(e,t);function e(n,r,i){te(this,e);var s=Ke({createEl:!1},r),a=ne(this,t.call(this,n,s,i));if(!r.playerOptions.sources||r.playerOptions.sources.length===0)for(var o=0,u=r.playerOptions.techOrder;o<u.length;o++){var l=Qe(u[o]),c=Ve.getTech(l);if(l||(c=X.getComponent(l)),c&&c.isSupported()){n.loadTech_(l);break}}else n.src(r.playerOptions.sources);return a}return e}(X);X.registerComponent("MediaLoader",Qk);var Wo=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.emitTapEvents(),i.enable(),i}return e.prototype.createEl=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i=et({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},i),r==="button"&&Pe.error("Creating a ClickableComponent with an HTML element of "+r+" is not supported; use a Button instead."),s=et({role:"button"},s),this.tabIndex_=i.tabIndex;var a=t.prototype.createEl.call(this,r,i,s);return this.createControlTextEl(a),a},e.prototype.dispose=function(){this.controlTextEl_=null,t.prototype.dispose.call(this)},e.prototype.createControlTextEl=function(r){return this.controlTextEl_=nt("span",{className:"vjs-control-text"},{"aria-live":"polite"}),r&&r.appendChild(this.controlTextEl_),this.controlText(this.controlText_,r),this.controlTextEl_},e.prototype.controlText=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.el();if(r===void 0)return this.controlText_||"Need Text";var s=this.localize(r);this.controlText_=r,Js(this.controlTextEl_,s),this.nonIconControl||i.setAttribute("title",s)},e.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},e.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},e.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},e.prototype.handleClick=function(r){},e.prototype.handleFocus=function(r){lr(ue,"keydown",Ae(this,this.handleKeyPress))},e.prototype.handleKeyPress=function(r){r.which===32||r.which===13?(r.preventDefault(),this.trigger("click")):t.prototype.handleKeyPress&&t.prototype.handleKeyPress.call(this,r)},e.prototype.handleBlur=function(r){Wt(ue,"keydown",Ae(this,this.handleKeyPress))},e}(X);X.registerComponent("ClickableComponent",Wo);var Zk=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.update(),n.on("posterchange",Ae(i,i.update)),i}return e.prototype.dispose=function(){this.player().off("posterchange",this.update),t.prototype.dispose.call(this)},e.prototype.createEl=function(){var r=nt("div",{className:"vjs-poster",tabIndex:-1});return r},e.prototype.update=function(r){var i=this.player().poster();this.setSrc(i),i?this.show():this.hide()},e.prototype.setSrc=function(r){var i="";r&&(i='url("'+r+'")'),this.el_.style.backgroundImage=i},e.prototype.handleClick=function(r){this.player_.controls()&&(this.player_.paused()?this.player_.play():this.player_.pause())},e}(Wo);X.registerComponent("PosterImage",Zk);var Kt="#222",op="#ccc",eP={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function $u(t,e){return"rgba("+parseInt(t[1]+t[1],16)+","+parseInt(t[2]+t[2],16)+","+parseInt(t[3]+t[3],16)+","+e+")"}function ju(t,e,n){try{t.style[e]=n}catch{return}}var tP=function(t){ae(e,t);function e(n,r,i){te(this,e);var s=ne(this,t.call(this,n,r,i));return n.on("loadstart",Ae(s,s.toggleDisplay)),n.on("texttrackchange",Ae(s,s.updateDisplay)),n.on("loadstart",Ae(s,s.preselectTrack)),n.ready(Ae(s,function(){if(n.tech_&&n.tech_.featuresNativeTextTracks){this.hide();return}n.on("fullscreenchange",Ae(this,this.updateDisplay));for(var a=this.options_.playerOptions.tracks||[],o=0;o<a.length;o++)this.player_.addRemoteTextTrack(a[o],!0);this.preselectTrack()})),s}return e.prototype.preselectTrack=function(){for(var r={captions:1,subtitles:1},i=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,a=void 0,o=void 0,u=void 0,l=0;l<i.length;l++){var c=i[l];s&&s.enabled&&s.language===c.language?c.kind===s.kind?u=c:u||(u=c):s&&!s.enabled?(u=null,a=null,o=null):c.default&&(c.kind==="descriptions"&&!a?a=c:c.kind in r&&!o&&(o=c))}u?u.mode="showing":o?o.mode="showing":a&&(a.mode="showing")},e.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},e.prototype.clearDisplay=function(){typeof R.WebVTT=="function"&&R.WebVTT.processCues(R,[],this.el_)},e.prototype.updateDisplay=function(){var r=this.player_.textTracks();this.clearDisplay();for(var i=null,s=null,a=r.length;a--;){var o=r[a];o.mode==="showing"&&(o.kind==="descriptions"?i=o:s=o)}s?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):i&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i))},e.prototype.updateForTrack=function(r){if(!(typeof R.WebVTT!="function"||!r.activeCues)){for(var i=[],s=0;s<r.activeCues.length;s++)i.push(r.activeCues[s]);if(R.WebVTT.processCues(R,i,this.el_),!!this.player_.textTrackSettings)for(var a=this.player_.textTrackSettings.getValues(),o=i.length;o--;){var u=i[o];if(u){var l=u.displayState;if(a.color&&(l.firstChild.style.color=a.color),a.textOpacity&&ju(l.firstChild,"color",$u(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(l.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&ju(l.firstChild,"backgroundColor",$u(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?ju(l,"backgroundColor",$u(a.windowColor,a.windowOpacity)):l.style.backgroundColor=a.windowColor),a.edgeStyle&&(a.edgeStyle==="dropshadow"?l.firstChild.style.textShadow="2px 2px 3px "+Kt+", 2px 2px 4px "+Kt+", 2px 2px 5px "+Kt:a.edgeStyle==="raised"?l.firstChild.style.textShadow="1px 1px "+Kt+", 2px 2px "+Kt+", 3px 3px "+Kt:a.edgeStyle==="depressed"?l.firstChild.style.textShadow="1px 1px "+op+", 0 1px "+op+", -1px -1px "+Kt+", 0 -1px "+Kt:a.edgeStyle==="uniform"&&(l.firstChild.style.textShadow="0 0 4px "+Kt+", 0 0 4px "+Kt+", 0 0 4px "+Kt+", 0 0 4px "+Kt)),a.fontPercent&&a.fontPercent!==1){var c=R.parseFloat(l.style.fontSize);l.style.fontSize=c*a.fontPercent+"px",l.style.height="auto",l.style.top="auto",l.style.bottom="2px"}a.fontFamily&&a.fontFamily!=="default"&&(a.fontFamily==="small-caps"?l.firstChild.style.fontVariant="small-caps":l.firstChild.style.fontFamily=eP[a.fontFamily])}}}},e}(X);X.registerComponent("TextTrackDisplay",tP);var rP=function(t){ae(e,t);function e(){return te(this,e),ne(this,t.apply(this,arguments))}return e.prototype.createEl=function(){var r=this.player_.isAudio(),i=this.localize(r?"Audio Player":"Video Player"),s=nt("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[i])}),a=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return a.appendChild(s),a},e}(X);X.registerComponent("LoadingSpinner",rP);var Ar=function(t){ae(e,t);function e(){return te(this,e),ne(this,t.apply(this,arguments))}return e.prototype.createEl=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r="button",i=et({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},i),s=et({type:"button"},s);var a=X.prototype.createEl.call(this,r,i,s);return this.createControlTextEl(a),a},e.prototype.addChild=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.constructor.name;return Pe.warn("Adding an actionable (user controllable) child to a Button ("+s+") is not supported; use a ClickableComponent instead."),X.prototype.addChild.call(this,r,i)},e.prototype.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},e.prototype.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},e.prototype.handleKeyPress=function(r){r.which===32||r.which===13||t.prototype.handleKeyPress.call(this,r)},e}(Wo);X.registerComponent("Button",Ar);var $0=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.mouseused_=!1,i.on("mousedown",i.handleMouseDown),i}return e.prototype.buildCSSClass=function(){return"vjs-big-play-button"},e.prototype.handleClick=function(r){var i=this.player_.play();if(!(this.mouseused_&&r.clientX&&r.clientY)){var s=this.player_.getChild("controlBar"),a=s&&s.getChild("playToggle");if(!a){this.player_.focus();return}var o=function(){return a.focus()};R0(i)?i.then(o,function(){}):this.setTimeout(o,1)}},e.prototype.handleKeyPress=function(r){this.mouseused_=!1,t.prototype.handleKeyPress.call(this,r)},e.prototype.handleMouseDown=function(r){this.mouseused_=!0},e}(Ar);$0.prototype.controlText_="Play Video";X.registerComponent("BigPlayButton",$0);var nP=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.controlText(r&&r.controlText||i.localize("Close")),i}return e.prototype.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(r){this.trigger({type:"close",bubbles:!1})},e}(Ar);X.registerComponent("CloseButton",nP);var j0=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.on(n,"play",i.handlePlay),i.on(n,"pause",i.handlePause),i.on(n,"ended",i.handleEnded),i}return e.prototype.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(r){this.player_.paused()?this.player_.play():this.player_.pause()},e.prototype.handleSeeked=function(r){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(r):this.handlePlay(r)},e.prototype.handlePlay=function(r){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},e.prototype.handlePause=function(r){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},e.prototype.handleEnded=function(r){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},e}(Ar);j0.prototype.controlText_="Play";X.registerComponent("PlayToggle",j0);var H0=function(e,n){e=e<0?0:e;var r=Math.floor(e%60),i=Math.floor(e/60%60),s=Math.floor(e/3600),a=Math.floor(n/60%60),o=Math.floor(n/3600);return(isNaN(e)||e===1/0)&&(s=i=r="-"),s=s>0||o>0?s+":":"",i=((s||a>=10)&&i<10?"0"+i:i)+":",r=r<10?"0"+r:r,s+i+r},df=H0;function iP(t){df=t}function sP(){df=H0}function ki(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return df(t,e)}var Vi=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.throttledUpdateContent=Ai(Ae(i,i.updateContent),25),i.on(n,"timeupdate",i.throttledUpdateContent),i}return e.prototype.createEl=function(r){var i=this.buildCSSClass(),s=t.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=nt("span",{className:i+"-display"},{"aria-live":"off"}),this.updateTextNode_(),s.appendChild(this.contentEl_),s},e.prototype.dispose=function(){this.contentEl_=null,this.textNode_=null,t.prototype.dispose.call(this)},e.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=ue.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},e.prototype.formatTime_=function(r){return ki(r)},e.prototype.updateFormattedTime_=function(r){var i=this.formatTime_(r);i!==this.formattedTime_&&(this.formattedTime_=i,this.requestAnimationFrame(this.updateTextNode_))},e.prototype.updateContent=function(r){},e}(X);Vi.prototype.labelText_="Time";Vi.prototype.controlText_="Time";X.registerComponent("TimeDisplay",Vi);var hf=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.on(n,"ended",i.handleEnded),i}return e.prototype.buildCSSClass=function(){return"vjs-current-time"},e.prototype.updateContent=function(r){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(i)},e.prototype.handleEnded=function(r){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},e}(Vi);hf.prototype.labelText_="Current Time";hf.prototype.controlText_="Current Time";X.registerComponent("CurrentTimeDisplay",hf);var pf=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.on(n,"durationchange",i.updateContent),i.on(n,"loadedmetadata",i.throttledUpdateContent),i}return e.prototype.buildCSSClass=function(){return"vjs-duration"},e.prototype.updateContent=function(r){var i=this.player_.duration();i&&this.duration_!==i&&(this.duration_=i,this.updateFormattedTime_(i))},e}(Vi);pf.prototype.labelText_="Duration";pf.prototype.controlText_="Duration";X.registerComponent("DurationDisplay",pf);var aP=function(t){ae(e,t);function e(){return te(this,e),ne(this,t.apply(this,arguments))}return e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},e}(X);X.registerComponent("TimeDivider",aP);var mf=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.on(n,"durationchange",i.throttledUpdateContent),i.on(n,"ended",i.handleEnded),i}return e.prototype.buildCSSClass=function(){return"vjs-remaining-time"},e.prototype.formatTime_=function(r){return"-"+t.prototype.formatTime_.call(this,r)},e.prototype.updateContent=function(r){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},e.prototype.handleEnded=function(r){this.player_.duration()&&this.updateFormattedTime_(0)},e}(Vi);mf.prototype.labelText_="Remaining Time";mf.prototype.controlText_="Remaining Time";X.registerComponent("RemainingTimeDisplay",mf);var oP=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.updateShowing(),i.on(i.player(),"durationchange",i.updateShowing),i}return e.prototype.createEl=function(){var r=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=nt("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),r.appendChild(this.contentEl_),r},e.prototype.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},e.prototype.updateShowing=function(r){this.player().duration()===1/0?this.show():this.hide()},e}(X);X.registerComponent("LiveDisplay",oP);var gf=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}return e.prototype.enabled=function(){return this.enabled_},e.prototype.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},e.prototype.disable=function(){if(this.enabled()){var r=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(r,"mousemove",this.handleMouseMove),this.off(r,"mouseup",this.handleMouseUp),this.off(r,"touchmove",this.handleMouseMove),this.off(r,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},e.prototype.createEl=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i.className=i.className+" vjs-slider",i=et({tabIndex:0},i),s=et({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},s),t.prototype.createEl.call(this,r,i,s)},e.prototype.handleMouseDown=function(r){var i=this.bar.el_.ownerDocument;r.preventDefault(),u0(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(i,"mousemove",this.handleMouseMove),this.on(i,"mouseup",this.handleMouseUp),this.on(i,"touchmove",this.handleMouseMove),this.on(i,"touchend",this.handleMouseUp),this.handleMouseMove(r)},e.prototype.handleMouseMove=function(r){},e.prototype.handleMouseUp=function(){var r=this.bar.el_.ownerDocument;l0(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(r,"mousemove",this.handleMouseMove),this.off(r,"mouseup",this.handleMouseUp),this.off(r,"touchmove",this.handleMouseMove),this.off(r,"touchend",this.handleMouseUp),this.update()},e.prototype.update=function(){if(this.el_){var r=this.getPercent(),i=this.bar;if(i){(typeof r!="number"||r!==r||r<0||r===1/0)&&(r=0);var s=(r*100).toFixed(2)+"%",a=i.el().style;return this.vertical()?a.height=s:a.width=s,r}}},e.prototype.calculateDistance=function(r){var i=Jc(this.el_,r);return this.vertical()?i.y:i.x},e.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},e.prototype.handleKeyPress=function(r){r.which===37||r.which===40?(r.preventDefault(),this.stepBack()):(r.which===38||r.which===39)&&(r.preventDefault(),this.stepForward())},e.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},e.prototype.handleClick=function(r){r.stopImmediatePropagation(),r.preventDefault()},e.prototype.vertical=function(r){if(r===void 0)return this.vertical_||!1;this.vertical_=!!r,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(X);X.registerComponent("Slider",gf);var uP=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.partEls_=[],i.on(n,"progress",i.update),i}return e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},e.prototype.dispose=function(){this.partEls_=null,t.prototype.dispose.call(this)},e.prototype.update=function(r){var i=this.player_.buffered(),s=this.player_.duration(),a=this.player_.bufferedEnd(),o=this.partEls_,u=function(E,S){var x=E/S||0;return(x>=1?1:x)*100+"%"};this.el_.style.width=u(a,s);for(var l=0;l<i.length;l++){var c=i.start(l),f=i.end(l),d=o[l];d||(d=this.el_.appendChild(nt()),o[l]=d),d.style.left=u(c,a),d.style.width=u(f-c,a)}for(var h=o.length;h>i.length;h--)this.el_.removeChild(o[h-1]);o.length=i.length},e}(X);X.registerComponent("LoadProgressBar",uP);var lP=function(t){ae(e,t);function e(){return te(this,e),ne(this,t.apply(this,arguments))}return e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},e.prototype.update=function(r,i,s){var a=Ms(this.el_),o=Ms(this.player_.el()),u=r.width*i;if(!(!o||!a)){var l=r.left-o.left+u,c=r.width-u+(o.right-r.right),f=a.width/2;l<f?f+=f-l:c<f&&(f=c),f<0?f=0:f>a.width&&(f=a.width),this.el_.style.right="-"+f+"px",Js(this.el_,s)}},e}(X);X.registerComponent("TimeTooltip",lP);var vf=function(t){ae(e,t);function e(){return te(this,e),ne(this,t.apply(this,arguments))}return e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},e.prototype.update=function(r,i){var s=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var a=s.player_.scrubbing()?s.player_.getCache().currentTime:s.player_.currentTime(),o=ki(a,s.player_.duration()),u=s.getChild("timeTooltip");u&&u.update(r,i,o)})},e}(X);vf.prototype.options_={children:[]};!$n&&!jn&&vf.prototype.options_.children.push("timeTooltip");X.registerComponent("PlayProgressBar",vf);var V0=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.update=Ai(Ae(i,i.update),25),i}return e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},e.prototype.update=function(r,i){var s=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var a=s.player_.duration(),o=ki(i*a,a);s.el_.style.left=r.width*i+"px",s.getChild("timeTooltip").update(r,i,o)})},e}(X);V0.prototype.options_={children:["timeTooltip"]};X.registerComponent("MouseTimeDisplay",V0);var up=5,lp=30,zo=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.setEventHandlers_(),i}return e.prototype.setEventHandlers_=function(){var r=this;this.update=Ai(Ae(this,this.update),lp),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],function(){r.clearInterval(r.updateInterval),r.updateInterval=r.setInterval(function(){r.requestAnimationFrame(function(){r.update()})},lp)}),this.on(this.player_,["ended","pause","waiting"],function(){r.clearInterval(r.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},e.prototype.update_=function(r,i){var s=this.player_.duration();this.el_.setAttribute("aria-valuenow",(i*100).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[ki(r,s),ki(s,s)],"{1} of {2}")),this.bar.update(Ms(this.el_),i)},e.prototype.update=function(r){var i=t.prototype.update.call(this);return this.update_(this.getCurrentTime_(),i),i},e.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},e.prototype.handleEnded=function(r){this.update_(this.player_.duration(),1)},e.prototype.getPercent=function(){var r=this.getCurrentTime_()/this.player_.duration();return r>=1?1:r||0},e.prototype.handleMouseDown=function(r){Ci(r)&&(r.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,r))},e.prototype.handleMouseMove=function(r){if(Ci(r)){var i=this.calculateDistance(r)*this.player_.duration();i===this.player_.duration()&&(i=i-.1),this.player_.currentTime(i)}},e.prototype.enable=function(){t.prototype.enable.call(this);var r=this.getChild("mouseTimeDisplay");r&&r.show()},e.prototype.disable=function(){t.prototype.disable.call(this);var r=this.getChild("mouseTimeDisplay");r&&r.hide()},e.prototype.handleMouseUp=function(r){t.prototype.handleMouseUp.call(this,r),r&&r.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Rl(this.player_.play())},e.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+up)},e.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-up)},e.prototype.handleAction=function(r){this.player_.paused()?this.player_.play():this.player_.pause()},e.prototype.handleKeyPress=function(r){r.which===32||r.which===13?(r.preventDefault(),this.handleAction(r)):t.prototype.handleKeyPress&&t.prototype.handleKeyPress.call(this,r)},e}(gf);zo.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!$n&&!jn&&zo.prototype.options_.children.splice(1,0,"mouseTimeDisplay");zo.prototype.playerEvent="timeupdate";X.registerComponent("SeekBar",zo);var W0=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.handleMouseMove=Ai(Ae(i,i.handleMouseMove),25),i.throttledHandleMouseSeek=Ai(Ae(i,i.handleMouseSeek),25),i.enable(),i}return e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},e.prototype.handleMouseMove=function(r){var i=this.getChild("seekBar");if(i){var s=i.getChild("mouseTimeDisplay"),a=i.el(),o=Ms(a),u=Jc(a,r).x;u>1?u=1:u<0&&(u=0),s&&s.update(o,u)}},e.prototype.handleMouseSeek=function(r){var i=this.getChild("seekBar");i&&i.handleMouseMove(r)},e.prototype.enabled=function(){return this.enabled_},e.prototype.disable=function(){this.children().forEach(function(r){return r.disable&&r.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},e.prototype.enable=function(){this.children().forEach(function(r){return r.enable&&r.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},e.prototype.handleMouseDown=function(r){var i=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(r),this.on(i,"mousemove",this.throttledHandleMouseSeek),this.on(i,"touchmove",this.throttledHandleMouseSeek),this.on(i,"mouseup",this.handleMouseUp),this.on(i,"touchend",this.handleMouseUp)},e.prototype.handleMouseUp=function(r){var i=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseUp(r),this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUp),this.off(i,"touchend",this.handleMouseUp)},e}(X);W0.prototype.options_={children:["seekBar"]};X.registerComponent("ProgressControl",W0);var z0=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.on(n,"fullscreenchange",i.handleFullscreenChange),i}return e.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleFullscreenChange=function(r){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},e.prototype.handleClick=function(r){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Ar);z0.prototype.controlText_="Fullscreen";X.registerComponent("FullscreenToggle",z0);var yf=function(e,n){n.tech_&&!n.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(n,"loadstart",function(){n.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},cP=function(t){ae(e,t);function e(){return te(this,e),ne(this,t.apply(this,arguments))}return e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},e}(X);X.registerComponent("VolumeLevel",cP);var _f=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.on("slideractive",i.updateLastVolume_),i.on(n,"volumechange",i.updateARIAAttributes),n.ready(function(){return i.updateARIAAttributes()}),i}return e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},e.prototype.handleMouseDown=function(r){Ci(r)&&t.prototype.handleMouseDown.call(this,r)},e.prototype.handleMouseMove=function(r){Ci(r)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(r)))},e.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},e.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},e.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},e.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},e.prototype.updateARIAAttributes=function(r){var i=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",i),this.el_.setAttribute("aria-valuetext",i+"%")},e.prototype.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},e.prototype.updateLastVolume_=function(){var r=this,i=this.player_.volume();this.one("sliderinactive",function(){r.player_.volume()===0&&r.player_.lastVolume_(i)})},e}(gf);_f.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};_f.prototype.playerEvent="volumechange";X.registerComponent("VolumeBar",_f);var q0=function(t){ae(e,t);function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};te(this,e),r.vertical=r.vertical||!1,(typeof r.volumeBar>"u"||Ns(r.volumeBar))&&(r.volumeBar=r.volumeBar||{},r.volumeBar.vertical=r.vertical);var i=ne(this,t.call(this,n,r));return yf(i,n),i.throttledHandleMouseMove=Ai(Ae(i,i.handleMouseMove),25),i.on("mousedown",i.handleMouseDown),i.on("touchstart",i.handleMouseDown),i.on(i.volumeBar,["focus","slideractive"],function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")}),i.on(i.volumeBar,["blur","sliderinactive"],function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")}),i}return e.prototype.createEl=function(){var r="vjs-volume-horizontal";return this.options_.vertical&&(r="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+r})},e.prototype.handleMouseDown=function(r){var i=this.el_.ownerDocument;this.on(i,"mousemove",this.throttledHandleMouseMove),this.on(i,"touchmove",this.throttledHandleMouseMove),this.on(i,"mouseup",this.handleMouseUp),this.on(i,"touchend",this.handleMouseUp)},e.prototype.handleMouseUp=function(r){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseMove),this.off(i,"touchmove",this.throttledHandleMouseMove),this.off(i,"mouseup",this.handleMouseUp),this.off(i,"touchend",this.handleMouseUp)},e.prototype.handleMouseMove=function(r){this.volumeBar.handleMouseMove(r)},e}(X);q0.prototype.options_={children:["volumeBar"]};X.registerComponent("VolumeControl",q0);var G0=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return yf(i,n),i.on(n,["loadstart","volumechange"],i.update),i}return e.prototype.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(r){var i=this.player_.volume(),s=this.player_.lastVolume_();if(i===0){var a=s<.1?.1:s;this.player_.volume(a),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},e.prototype.update=function(r){this.updateIcon_(),this.updateControlText_()},e.prototype.updateIcon_=function(){var r=this.player_.volume(),i=3;r===0||this.player_.muted()?i=0:r<.33?i=1:r<.67&&(i=2);for(var s=0;s<4;s++)Qs(this.el_,"vjs-vol-"+s);Pn(this.el_,"vjs-vol-"+i)},e.prototype.updateControlText_=function(){var r=this.player_.muted()||this.player_.volume()===0,i=r?"Unmute":"Mute";this.controlText()!==i&&this.controlText(i)},e}(Ar);G0.prototype.controlText_="Mute";X.registerComponent("MuteToggle",G0);var X0=function(t){ae(e,t);function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};te(this,e),typeof r.inline<"u"?r.inline=r.inline:r.inline=!0,(typeof r.volumeControl>"u"||Ns(r.volumeControl))&&(r.volumeControl=r.volumeControl||{},r.volumeControl.vertical=!r.inline);var i=ne(this,t.call(this,n,r));return yf(i,n),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}return e.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},e.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},e.prototype.createEl=function(){var r="vjs-volume-panel-horizontal";return this.options_.inline||(r="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+r})},e}(X);X0.prototype.options_={children:["muteToggle","volumeControl"]};X.registerComponent("VolumePanel",X0);var bf=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return r&&(i.menuButton_=r.menuButton),i.focusedChild_=-1,i.on("keydown",i.handleKeyPress),i}return e.prototype.addItem=function(r){this.addChild(r),r.on("click",Ae(this,function(i){this.menuButton_&&(this.menuButton_.unpressButton(),r.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus())}))},e.prototype.createEl=function(){var r=this.options_.contentElType||"ul";this.contentEl_=nt(r,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),lr(i,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),i},e.prototype.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},e.prototype.handleKeyPress=function(r){r.which===37||r.which===40?(r.preventDefault(),this.stepForward()):(r.which===38||r.which===39)&&(r.preventDefault(),this.stepBack())},e.prototype.stepForward=function(){var r=0;this.focusedChild_!==void 0&&(r=this.focusedChild_+1),this.focus(r)},e.prototype.stepBack=function(){var r=0;this.focusedChild_!==void 0&&(r=this.focusedChild_-1),this.focus(r)},e.prototype.focus=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=this.children().slice(),s=i.length&&i[0].className&&/vjs-menu-title/.test(i[0].className);s&&i.shift(),i.length>0&&(r<0?r=0:r>=i.length&&(r=i.length-1),this.focusedChild_=r,i[r].el_.focus())},e}(X);X.registerComponent("Menu",bf);var Tf=function(t){ae(e,t);function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};te(this,e);var i=ne(this,t.call(this,n,r));i.menuButton_=new Ar(n,r),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var s=Ar.prototype.buildCSSClass();return i.menuButton_.el_.className=i.buildCSSClass()+" "+s,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0,i.on(i.menuButton_,"tap",i.handleClick),i.on(i.menuButton_,"click",i.handleClick),i.on(i.menuButton_,"focus",i.handleFocus),i.on(i.menuButton_,"blur",i.handleBlur),i.on("keydown",i.handleSubmenuKeyPress),i}return e.prototype.update=function(){var r=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=r,this.addChild(r),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},e.prototype.createMenu=function(){var r=new bf(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var i=nt("li",{className:"vjs-menu-title",innerHTML:Qe(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,r.children_.unshift(i),to(i,r.contentEl())}if(this.items=this.createItems(),this.items)for(var s=0;s<this.items.length;s++)r.addItem(this.items[s]);return r},e.prototype.createItems=function(){},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},e.prototype.buildWrapperCSSClass=function(){var r="vjs-menu-button";this.options_.inline===!0?r+="-inline":r+="-popup";var i=Ar.prototype.buildCSSClass();return"vjs-menu-button "+r+" "+i+" "+t.prototype.buildCSSClass.call(this)},e.prototype.buildCSSClass=function(){var r="vjs-menu-button";return this.options_.inline===!0?r+="-inline":r+="-popup","vjs-menu-button "+r+" "+t.prototype.buildCSSClass.call(this)},e.prototype.controlText=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(r,i)},e.prototype.handleClick=function(r){this.one(this.menu.contentEl(),"mouseleave",Ae(this,function(i){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},e.prototype.focus=function(){this.menuButton_.focus()},e.prototype.blur=function(){this.menuButton_.blur()},e.prototype.handleFocus=function(){lr(ue,"keydown",Ae(this,this.handleKeyPress))},e.prototype.handleBlur=function(){Wt(ue,"keydown",Ae(this,this.handleKeyPress))},e.prototype.handleKeyPress=function(r){r.which===27||r.which===9?(this.buttonPressed_&&this.unpressButton(),r.which!==9&&(r.preventDefault(),this.menuButton_.el_.focus())):(r.which===38||r.which===40)&&(this.buttonPressed_||(this.pressButton(),r.preventDefault()))},e.prototype.handleSubmenuKeyPress=function(r){(r.which===27||r.which===9)&&(this.buttonPressed_&&this.unpressButton(),r.which!==9&&(r.preventDefault(),this.menuButton_.el_.focus()))},e.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),$n&&n0())return;this.menu.focus()}},e.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},e.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},e.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(X);X.registerComponent("MenuButton",Tf);var Sf=function(t){ae(e,t);function e(n,r){te(this,e);var i=r.tracks,s=ne(this,t.call(this,n,r));if(s.items.length<=1&&s.hide(),!i)return ne(s);var a=Ae(s,s.update);return i.addEventListener("removetrack",a),i.addEventListener("addtrack",a),s.player_.on("ready",a),s.player_.on("dispose",function(){i.removeEventListener("removetrack",a),i.removeEventListener("addtrack",a)}),s}return e}(Tf);X.registerComponent("TrackButton",Sf);var ra=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.selectable=r.selectable,i.isSelected_=r.selected||!1,i.selected(i.isSelected_),i.selectable?i.el_.setAttribute("role","menuitemcheckbox"):i.el_.setAttribute("role","menuitem"),i}return e.prototype.createEl=function(r,i,s){return this.nonIconControl=!0,t.prototype.createEl.call(this,"li",et({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},i),s)},e.prototype.handleClick=function(r){this.selected(!0)},e.prototype.selected=function(r){this.selectable&&(r?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(Wo);X.registerComponent("MenuItem",ra);var na=function(t){ae(e,t);function e(n,r){te(this,e);var i=r.track,s=n.textTracks();r.label=i.label||i.language||"Unknown",r.selected=i.mode==="showing";var a=ne(this,t.call(this,n,r));a.track=i;var o=function(){for(var f=arguments.length,d=Array(f),h=0;h<f;h++)d[h]=arguments[h];a.handleTracksChange.apply(a,d)},u=function(){for(var f=arguments.length,d=Array(f),h=0;h<f;h++)d[h]=arguments[h];a.handleSelectedLanguageChange.apply(a,d)};if(n.on(["loadstart","texttrackchange"],o),s.addEventListener("change",o),s.addEventListener("selectedlanguagechange",u),a.on("dispose",function(){n.off(["loadstart","texttrackchange"],o),s.removeEventListener("change",o),s.removeEventListener("selectedlanguagechange",u)}),s.onchange===void 0){var l=void 0;a.on(["tap","click"],function(){if(an(R.Event)!=="object")try{l=new R.Event("change")}catch{}l||(l=ue.createEvent("Event"),l.initEvent("change",!0,!0)),s.dispatchEvent(l)})}return a.handleTracksChange(),a}return e.prototype.handleClick=function(r){var i=this.track.kind,s=this.track.kinds,a=this.player_.textTracks();if(s||(s=[i]),t.prototype.handleClick.call(this,r),!!a)for(var o=0;o<a.length;o++){var u=a[o];u===this.track&&s.indexOf(u.kind)>-1?u.mode!=="showing"&&(u.mode="showing"):u.mode!=="disabled"&&(u.mode="disabled")}},e.prototype.handleTracksChange=function(r){var i=this.track.mode==="showing";i!==this.isSelected_&&this.selected(i)},e.prototype.handleSelectedLanguageChange=function(r){if(this.track.mode==="showing"){var i=this.player_.cache_.selectedLanguage;if(i&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},e.prototype.dispose=function(){this.track=null,t.prototype.dispose.call(this)},e}(ra);X.registerComponent("TextTrackMenuItem",na);var K0=function(t){ae(e,t);function e(n,r){return te(this,e),r.track={player:n,kind:r.kind,kinds:r.kinds,default:!1,mode:"disabled"},r.kinds||(r.kinds=[r.kind]),r.label?r.track.label=r.label:r.track.label=r.kinds.join(" and ")+" off",r.selectable=!0,ne(this,t.call(this,n,r))}return e.prototype.handleTracksChange=function(r){for(var i=this.player().textTracks(),s=!0,a=0,o=i.length;a<o;a++){var u=i[a];if(this.options_.kinds.indexOf(u.kind)>-1&&u.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)},e.prototype.handleSelectedLanguageChange=function(r){for(var i=this.player().textTracks(),s=!0,a=0,o=i.length;a<o;a++){var u=i[a];if(["captions","descriptions","subtitles"].indexOf(u.kind)>-1&&u.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(na);X.registerComponent("OffTextTrackMenuItem",K0);var Wi=function(t){ae(e,t);function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return te(this,e),r.tracks=n.textTracks(),ne(this,t.call(this,n,r))}return e.prototype.createItems=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:na,s=void 0;this.label_&&(s=this.label_+" off"),r.push(new K0(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;var a=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var o=0;o<a.length;o++){var u=a[o];if(this.kinds_.indexOf(u.kind)>-1){var l=new i(this.player_,{track:u,selectable:!0});l.addClass("vjs-"+u.kind+"-menu-item"),r.push(l)}}return r},e}(Sf);X.registerComponent("TextTrackButton",Wi);var Y0=function(t){ae(e,t);function e(n,r){te(this,e);var i=r.track,s=r.cue,a=n.currentTime();r.selectable=!0,r.label=s.text,r.selected=s.startTime<=a&&a<s.endTime;var o=ne(this,t.call(this,n,r));return o.track=i,o.cue=s,i.addEventListener("cuechange",Ae(o,o.update)),o}return e.prototype.handleClick=function(r){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},e.prototype.update=function(r){var i=this.cue,s=this.player_.currentTime();this.selected(i.startTime<=s&&s<i.endTime)},e}(ra);X.registerComponent("ChaptersTrackMenuItem",Y0);var xf=function(t){ae(e,t);function e(n,r,i){return te(this,e),ne(this,t.call(this,n,r,i))}return e.prototype.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.update=function(r){(!this.track_||r&&(r.type==="addtrack"||r.type==="removetrack"))&&this.setTrack(this.findChaptersTrack()),t.prototype.update.call(this)},e.prototype.setTrack=function(r){if(this.track_!==r){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=r,this.track_){this.track_.mode="hidden";var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_)}}},e.prototype.findChaptersTrack=function(){for(var r=this.player_.textTracks()||[],i=r.length-1;i>=0;i--){var s=r[i];if(s.kind===this.kind_)return s}},e.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Qe(this.kind_))},e.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},e.prototype.createItems=function(){var r=[];if(!this.track_)return r;var i=this.track_.cues;if(!i)return r;for(var s=0,a=i.length;s<a;s++){var o=i[s],u=new Y0(this.player_,{track:this.track_,cue:o});r.push(u)}return r},e}(Wi);xf.prototype.kind_="chapters";xf.prototype.controlText_="Chapters";X.registerComponent("ChaptersButton",xf);var Ef=function(t){ae(e,t);function e(n,r,i){te(this,e);var s=ne(this,t.call(this,n,r,i)),a=n.textTracks(),o=Ae(s,s.handleTracksChange);return a.addEventListener("change",o),s.on("dispose",function(){a.removeEventListener("change",o)}),s}return e.prototype.handleTracksChange=function(r){for(var i=this.player().textTracks(),s=!1,a=0,o=i.length;a<o;a++){var u=i[a];if(u.kind!==this.kind_&&u.mode==="showing"){s=!0;break}}s?this.disable():this.enable()},e.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(Wi);Ef.prototype.kind_="descriptions";Ef.prototype.controlText_="Descriptions";X.registerComponent("DescriptionsButton",Ef);var wf=function(t){ae(e,t);function e(n,r,i){return te(this,e),ne(this,t.call(this,n,r,i))}return e.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(Wi);wf.prototype.kind_="subtitles";wf.prototype.controlText_="Subtitles";X.registerComponent("SubtitlesButton",wf);var Cf=function(t){ae(e,t);function e(n,r){te(this,e),r.track={player:n,kind:r.kind,label:r.kind+" settings",selectable:!1,default:!1,mode:"disabled"},r.selectable=!1,r.name="CaptionSettingsMenuItem";var i=ne(this,t.call(this,n,r));return i.addClass("vjs-texttrack-settings"),i.controlText(", opens "+r.kind+" settings dialog"),i}return e.prototype.handleClick=function(r){this.player().getChild("textTrackSettings").open()},e}(na);X.registerComponent("CaptionSettingsMenuItem",Cf);var Af=function(t){ae(e,t);function e(n,r,i){return te(this,e),ne(this,t.call(this,n,r,i))}return e.prototype.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.createItems=function(){var r=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(r.push(new Cf(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,r)},e}(Wi);Af.prototype.kind_="captions";Af.prototype.controlText_="Captions";X.registerComponent("CaptionsButton",Af);var J0=function(t){ae(e,t);function e(){return te(this,e),ne(this,t.apply(this,arguments))}return e.prototype.createEl=function(r,i,s){var a='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);this.options_.track.kind==="captions"&&(a+=`
        <span aria-hidden="true" class="vjs-icon-placeholder"></span>
        <span class="vjs-control-text"> `+this.localize("Captions")+`</span>
      `),a+="</span>";var o=t.prototype.createEl.call(this,r,et({innerHTML:a},i),s);return o},e}(na);X.registerComponent("SubsCapsMenuItem",J0);var If=function(t){ae(e,t);function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};te(this,e);var i=ne(this,t.call(this,n,r));return i.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)>-1&&(i.label_="captions"),i.menuButton_.controlText(Qe(i.label_)),i}return e.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.createItems=function(){var r=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(r.push(new Cf(this.player_,{kind:this.label_})),this.hideThreshold_+=1),r=t.prototype.createItems.call(this,r,J0),r},e}(Wi);If.prototype.kinds_=["captions","subtitles"];If.prototype.controlText_="Subtitles";X.registerComponent("SubsCapsButton",If);var Q0=function(t){ae(e,t);function e(n,r){te(this,e);var i=r.track,s=n.audioTracks();r.label=i.label||i.language||"Unknown",r.selected=i.enabled;var a=ne(this,t.call(this,n,r));a.track=i;var o=function(){for(var l=arguments.length,c=Array(l),f=0;f<l;f++)c[f]=arguments[f];a.handleTracksChange.apply(a,c)};return s.addEventListener("change",o),a.on("dispose",function(){s.removeEventListener("change",o)}),a}return e.prototype.handleClick=function(r){var i=this.player_.audioTracks();t.prototype.handleClick.call(this,r);for(var s=0;s<i.length;s++){var a=i[s];a.enabled=a===this.track}},e.prototype.handleTracksChange=function(r){this.selected(this.track.enabled)},e}(ra);X.registerComponent("AudioTrackMenuItem",Q0);var Z0=function(t){ae(e,t);function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return te(this,e),r.tracks=n.audioTracks(),ne(this,t.call(this,n,r))}return e.prototype.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.createItems=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.hideThreshold_=1;for(var i=this.player_.audioTracks(),s=0;s<i.length;s++){var a=i[s];r.push(new Q0(this.player_,{track:a,selectable:!0}))}return r},e}(Sf);Z0.prototype.controlText_="Audio Track";X.registerComponent("AudioTrackButton",Z0);var kf=function(t){ae(e,t);function e(n,r){te(this,e);var i=r.rate,s=parseFloat(i,10);r.label=i,r.selected=s===1,r.selectable=!0;var a=ne(this,t.call(this,n,r));return a.label=i,a.rate=s,a.on(n,"ratechange",a.update),a}return e.prototype.handleClick=function(r){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},e.prototype.update=function(r){this.selected(this.player().playbackRate()===this.rate)},e}(ra);kf.prototype.contentElType="button";X.registerComponent("PlaybackRateMenuItem",kf);var ey=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.updateVisibility(),i.updateLabel(),i.on(n,"loadstart",i.updateVisibility),i.on(n,"ratechange",i.updateLabel),i}return e.prototype.createEl=function(){var r=t.prototype.createEl.call(this);return this.labelEl_=nt("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),r.appendChild(this.labelEl_),r},e.prototype.dispose=function(){this.labelEl_=null,t.prototype.dispose.call(this)},e.prototype.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.createMenu=function(){var r=new bf(this.player()),i=this.playbackRates();if(i)for(var s=i.length-1;s>=0;s--)r.addChild(new kf(this.player(),{rate:i[s]+"x"}));return r},e.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},e.prototype.handleClick=function(r){for(var i=this.player().playbackRate(),s=this.playbackRates(),a=s[0],o=0;o<s.length;o++)if(s[o]>i){a=s[o];break}this.player().playbackRate(a)},e.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},e.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},e.prototype.updateVisibility=function(r){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},e.prototype.updateLabel=function(r){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(Tf);ey.prototype.controlText_="Playback Rate";X.registerComponent("PlaybackRateMenuButton",ey);var ty=function(t){ae(e,t);function e(){return te(this,e),ne(this,t.apply(this,arguments))}return e.prototype.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e}(X);X.registerComponent("Spacer",ty);var fP=function(t){ae(e,t);function e(){return te(this,e),ne(this,t.apply(this,arguments))}return e.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},e.prototype.createEl=function(){var r=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return r.innerHTML=" ",r},e}(ty);X.registerComponent("CustomControlSpacer",fP);var ry=function(t){ae(e,t);function e(){return te(this,e),ne(this,t.apply(this,arguments))}return e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(X);ry.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};X.registerComponent("ControlBar",ry);var ny=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r));return i.on(n,"error",i.open),i}return e.prototype.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},e.prototype.content=function(){var r=this.player().error();return r?this.localize(r.message):""},e}(ji);ny.prototype.options_=Ke(ji.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});X.registerComponent("ErrorDisplay",ny);var Hu="vjs-text-track-settings",cp=["#000","Black"],fp=["#00F","Blue"],dp=["#0FF","Cyan"],hp=["#0F0","Green"],pp=["#F0F","Magenta"],mp=["#F00","Red"],gp=["#FFF","White"],vp=["#FF0","Yellow"],Vu=["1","Opaque"],Wu=["0.5","Semi-Transparent"],yp=["0","Transparent"],Tn={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[cp,gp,mp,hp,fp,vp,pp,dp]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Vu,Wu,yp]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[gp,cp,mp,hp,fp,vp,pp,dp]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return e==="1.00"?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Vu,Wu]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[yp,Wu,Vu]}};Tn.windowColor.options=Tn.backgroundColor.options;function iy(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function dP(t,e){var n=t.options[t.options.selectedIndex].value;return iy(n,e)}function hP(t,e,n){if(e){for(var r=0;r<t.options.length;r++)if(iy(t.options[r].value,n)===e){t.selectedIndex=r;break}}}var pP=function(t){ae(e,t);function e(n,r){te(this,e),r.temporary=!1;var i=ne(this,t.call(this,n,r));return i.updateDisplay=Ae(i,i.updateDisplay),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=nt("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),r.persistTextTrackSettings===void 0&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.close()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),di(Tn,function(s){i.on(i.$(s.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}return e.prototype.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},e.prototype.createElSelect_=function(r){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"label",o=Tn[r],u=o.id.replace("%s",this.id_),l=[s,u].join(" ").trim();return["<"+a+' id="'+u+'" class="'+(a==="label"?"vjs-label":"")+'">',this.localize(o.label),"</"+a+">",'<select aria-labelledby="'+l+'">'].concat(o.options.map(function(c){var f=u+"-"+c[1].replace(/\W+/g,"");return['<option id="'+f+'" value="'+c[0]+'" ','aria-labelledby="'+l+" "+f+'">',i.localize(c[1]),"</option>"].join("")})).concat("</select>").join("")},e.prototype.createElFgColor_=function(){var r="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+r+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",r),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",r),"</span>","</fieldset>"].join("")},e.prototype.createElBgColor_=function(){var r="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+r+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",r),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",r),"</span>","</fieldset>"].join("")},e.prototype.createElWinColor_=function(){var r="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+r+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",r),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",r),"</span>","</fieldset>"].join("")},e.prototype.createElColors_=function(){return nt("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},e.prototype.createElFont_=function(){return nt("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},e.prototype.createElControls_=function(){var r=this.localize("restore all settings to the default values");return nt("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+r+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+r+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},e.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},e.prototype.label=function(){return this.localize("Caption Settings Dialog")},e.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},e.prototype.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},e.prototype.getValues=function(){var r=this;return ok(Tn,function(i,s,a){var o=dP(r.$(s.selector),s.parser);return o!==void 0&&(i[a]=o),i},{})},e.prototype.setValues=function(r){var i=this;di(Tn,function(s,a){hP(i.$(s.selector),r[a],s.parser)})},e.prototype.setDefaults=function(){var r=this;di(Tn,function(i){var s=i.hasOwnProperty("default")?i.default:0;r.$(i.selector).selectedIndex=s})},e.prototype.restoreSettings=function(){var r=void 0;try{r=JSON.parse(R.localStorage.getItem(Hu))}catch(i){Pe.warn(i)}r&&this.setValues(r)},e.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var r=this.getValues();try{Object.keys(r).length?R.localStorage.setItem(Hu,JSON.stringify(r)):R.localStorage.removeItem(Hu)}catch(i){Pe.warn(i)}}},e.prototype.updateDisplay=function(){var r=this.player_.getChild("textTrackDisplay");r&&r.updateDisplay()},e.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(ue,"keydown",this.handleKeyDown);var r=this.player_.controlBar,i=r&&r.subsCapsButton,s=r&&r.captionsButton;i?i.focus():s&&s.focus()},e}(ji);X.registerComponent("TextTrackSettings",pP);var mP=function(t){ae(e,t);function e(n,r){te(this,e);var i=r.ResizeObserver||R.ResizeObserver;r.ResizeObserver===null&&(i=!1);var s=Ke({createEl:!i},r),a=ne(this,t.call(this,n,s));return a.ResizeObserver=r.ResizeObserver||R.ResizeObserver,a.loadListener_=null,a.resizeObserver_=null,a.debouncedHandler_=pk(function(){a.resizeHandler()},100,!1,n),i?(a.resizeObserver_=new a.ResizeObserver(a.debouncedHandler_),a.resizeObserver_.observe(n.el())):(a.loadListener_=function(){a.el_.contentWindow&&lr(a.el_.contentWindow,"resize",a.debouncedHandler_),a.off("load",a.loadListener_)},a.on("load",a.loadListener_)),a}return e.prototype.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},e.prototype.resizeHandler=function(){this.player_.trigger("playerresize")},e.prototype.dispose=function(){this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&Wt(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},e}(X);X.registerComponent("ResizeManager",mP);var Nl=function(e){var n=e.el();if(n.hasAttribute("src"))return e.triggerSourceset(n.src),!0;var r=e.$$("source"),i=[],s="";if(!r.length)return!1;for(var a=0;a<r.length;a++){var o=r[a].src;o&&i.indexOf(o)===-1&&i.push(o)}return i.length?(i.length===1&&(s=i[0]),e.triggerSourceset(s),!0):!1},gP=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var n=ue.createElement(this.nodeName.toLowerCase());n.innerHTML=e;for(var r=ue.createDocumentFragment();n.childNodes.length;)r.appendChild(n.childNodes[0]);return this.innerText="",R.Element.prototype.appendChild.call(this,r),this.innerHTML}}),sy=function(e,n){for(var r={},i=0;i<e.length&&(r=Object.getOwnPropertyDescriptor(e[i],n),!(r&&r.set&&r.get));i++);return r.enumerable=!0,r.configurable=!0,r},vP=function(e){return sy([e.el(),R.HTMLMediaElement.prototype,R.Element.prototype,gP],"innerHTML")},_p=function(e){var n=e.el();if(!n.resetSourceWatch_){var r={},i=vP(e),s=function(o){return function(){for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];var f=o.apply(n,l);return Nl(e),f}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){n[a]&&(r[a]=n[a],n[a]=s(r[a]))}),Object.defineProperty(n,"innerHTML",Ke(i,{set:s(i.set)})),n.resetSourceWatch_=function(){n.resetSourceWatch_=null,Object.keys(r).forEach(function(a){n[a]=r[a]}),Object.defineProperty(n,"innerHTML",i)},e.one("sourceset",n.resetSourceWatch_)}},yP=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?L0(R.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return R.Element.prototype.setAttribute.call(this,"src",e),e}}),_P=function(e){return sy([e.el(),R.HTMLMediaElement.prototype,yP],"src")},bP=function(e){if(e.featuresSourceset){var n=e.el();if(!n.resetSourceset_){var r=_P(e),i=n.setAttribute,s=n.load;Object.defineProperty(n,"src",Ke(r,{set:function(o){var u=r.set.call(n,o);return e.triggerSourceset(n.src),u}})),n.setAttribute=function(a,o){var u=i.call(n,a,o);return/src/i.test(a)&&e.triggerSourceset(n.src),u},n.load=function(){var a=s.call(n);return Nl(e)||(e.triggerSourceset(""),_p(e)),a},n.currentSrc?e.triggerSourceset(n.currentSrc):Nl(e)||_p(e),n.resetSourceset_=function(){n.resetSourceset_=null,n.load=s,n.setAttribute=i,Object.defineProperty(n,"src",r),n.resetSourceWatch_&&n.resetSourceWatch_()}}}},TP=Kc([`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
            This may prevent text tracks from loading.`],[`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
            This may prevent text tracks from loading.`]),le=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,n,r)),s=n.source,a=!1;if(s&&(i.el_.currentSrc!==s.src||n.tag&&n.tag.initNetworkState_===3)?i.setSource(s):i.handleLateInit_(i.el_),n.enableSourceset&&i.setupSourcesetHandling_(),i.el_.hasChildNodes()){for(var o=i.el_.childNodes,u=o.length,l=[];u--;){var c=o[u],f=c.nodeName.toLowerCase();f==="track"&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(c),i.remoteTextTracks().addTrack(c.track),i.textTracks().addTrack(c.track),!a&&!i.el_.hasAttribute("crossorigin")&&Vo(c.src)&&(a=!0)):l.push(c))}for(var d=0;d<l.length;d++)i.el_.removeChild(l[d])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&a&&Pe.warn(Xc(TP)),i.restoreMetadataTracksInIOSNativePlayer_(),(no||sf||C0)&&n.nativeControlsForTouch===!0&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}return e.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,t.prototype.dispose.call(this)},e.prototype.setupSourcesetHandling_=function(){bP(this)},e.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var r=this.textTracks(),i=void 0,s=function(){i=[];for(var u=0;u<r.length;u++){var l=r[u];l.kind==="metadata"&&i.push({track:l,storedMode:l.mode})}};s(),r.addEventListener("change",s),this.on("dispose",function(){return r.removeEventListener("change",s)});var a=function o(){for(var u=0;u<i.length;u++){var l=i[u];l.track.mode==="disabled"&&l.track.mode!==l.storedMode&&(l.track.mode=l.storedMode)}r.removeEventListener("change",o)};this.on("webkitbeginfullscreen",function(){r.removeEventListener("change",s),r.removeEventListener("change",a),r.addEventListener("change",a)}),this.on("webkitendfullscreen",function(){r.removeEventListener("change",s),r.addEventListener("change",s),r.removeEventListener("change",a)})},e.prototype.overrideNative_=function(r,i){var s=this;if(i===this["featuresNative"+r+"Tracks"]){var a=r.toLowerCase();this[a+"TracksListeners_"]&&Object.keys(this[a+"TracksListeners_"]).forEach(function(o){var u=s.el()[a+"Tracks"];u.removeEventListener(o,s[a+"TracksListeners_"][o])}),this["featuresNative"+r+"Tracks"]=!i,this[a+"TracksListeners_"]=null,this.proxyNativeTracksForType_(a)}},e.prototype.overrideNativeAudioTracks=function(r){this.overrideNative_("Audio",r)},e.prototype.overrideNativeVideoTracks=function(r){this.overrideNative_("Video",r)},e.prototype.proxyNativeTracksForType_=function(r){var i=this,s=Qt[r],a=this.el()[s.getterName],o=this[s.getterName]();if(!(!this["featuresNative"+s.capitalName+"Tracks"]||!a||!a.addEventListener)){var u={change:function(f){o.trigger({type:"change",target:o,currentTarget:o,srcElement:o})},addtrack:function(f){o.addTrack(f.track)},removetrack:function(f){o.removeTrack(f.track)}},l=function(){for(var f=[],d=0;d<o.length;d++){for(var h=!1,g=0;g<a.length;g++)if(a[g]===o[d]){h=!0;break}h||f.push(o[d])}for(;f.length;)o.removeTrack(f.shift())};this[s.getterName+"Listeners_"]=u,Object.keys(u).forEach(function(c){var f=u[c];a.addEventListener(c,f),i.on("dispose",function(d){return a.removeEventListener(c,f)})}),this.on("loadstart",l),this.on("dispose",function(c){return i.off("loadstart",l)})}},e.prototype.proxyNativeTracks_=function(){var r=this;Qt.names.forEach(function(i){r.proxyNativeTracksForType_(i)})},e.prototype.createEl=function(){var r=this.options_.tag;if(!r||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(r){var i=r.cloneNode(!0);r.parentNode&&r.parentNode.insertBefore(i,r),e.disposeMediaElement(r),r=i}else{r=ue.createElement("video");var s=this.options_.tag&&Er(this.options_.tag),a=Ke({},s);(!no||this.options_.nativeControlsForTouch!==!0)&&delete a.controls,a0(r,et(a,{id:this.options_.techId,class:"vjs-tech"}))}r.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&ro(r,"preload",this.options_.preload);for(var o=["loop","muted","playsinline","autoplay"],u=0;u<o.length;u++){var l=o[u],c=this.options_[l];typeof c<"u"&&(c?ro(r,l,l):Yc(r,l),r[l]=c)}return r},e.prototype.handleLateInit_=function(r){if(!(r.networkState===0||r.networkState===3)){if(r.readyState===0){var i=!1,s=function(){i=!0};this.on("loadstart",s);var a=function(){i||this.trigger("loadstart")};this.on("loadedmetadata",a),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",a),i||this.trigger("loadstart")});return}var o=["loadstart"];o.push("loadedmetadata"),r.readyState>=2&&o.push("loadeddata"),r.readyState>=3&&o.push("canplay"),r.readyState>=4&&o.push("canplaythrough"),this.ready(function(){o.forEach(function(u){this.trigger(u)},this)})}},e.prototype.setCurrentTime=function(r){try{this.el_.currentTime=r}catch(i){Pe(i,"Video is not ready. (Video.js)")}},e.prototype.duration=function(){var r=this;if(this.el_.duration===1/0&&jn&&ea&&this.el_.currentTime===0){var i=function s(){r.el_.currentTime>0&&(r.el_.duration===1/0&&r.trigger("durationchange"),r.off("timeupdate",s))};return this.on("timeupdate",i),NaN}return this.el_.duration||NaN},e.prototype.width=function(){return this.el_.offsetWidth},e.prototype.height=function(){return this.el_.offsetHeight},e.prototype.proxyWebkitFullscreen_=function(){var r=this;if("webkitDisplayingFullscreen"in this.el_){var i=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},s=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",i),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",s),this.on("dispose",function(){r.off("webkitbeginfullscreen",s),r.off("webkitendfullscreen",i)})}},e.prototype.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var r=R.navigator&&R.navigator.userAgent||"";if(/Android/.test(r)||!/Chrome|Mac OS X 10.5/.test(r))return!0}return!1},e.prototype.enterFullScreen=function(){var r=this.el_;r.paused&&r.networkState<=r.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){r.pause(),r.webkitEnterFullScreen()},0)):r.webkitEnterFullScreen()},e.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},e.prototype.src=function(r){if(r===void 0)return this.el_.src;this.setSrc(r)},e.prototype.reset=function(){e.resetMediaElement(this.el_)},e.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},e.prototype.setControls=function(r){this.el_.controls=!!r},e.prototype.addTextTrack=function(r,i,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(r,i,s):t.prototype.addTextTrack.call(this,r,i,s)},e.prototype.createRemoteTextTrack=function(r){if(!this.featuresNativeTextTracks)return t.prototype.createRemoteTextTrack.call(this,r);var i=ue.createElement("track");return r.kind&&(i.kind=r.kind),r.label&&(i.label=r.label),(r.language||r.srclang)&&(i.srclang=r.language||r.srclang),r.default&&(i.default=r.default),r.id&&(i.id=r.id),r.src&&(i.src=r.src),i},e.prototype.addRemoteTextTrack=function(r,i){var s=t.prototype.addRemoteTextTrack.call(this,r,i);return this.featuresNativeTextTracks&&this.el().appendChild(s),s},e.prototype.removeRemoteTextTrack=function(r){if(t.prototype.removeRemoteTextTrack.call(this,r),this.featuresNativeTextTracks)for(var i=this.$$("track"),s=i.length;s--;)(r===i[s]||r===i[s].track)&&this.el().removeChild(i[s])},e.prototype.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var r={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(r.droppedVideoFrames=this.el().webkitDroppedFrameCount,r.totalVideoFrames=this.el().webkitDecodedFrameCount),R.performance&&typeof R.performance.now=="function"?r.creationTime=R.performance.now():R.performance&&R.performance.timing&&typeof R.performance.timing.navigationStart=="number"&&(r.creationTime=R.Date.now()-R.performance.timing.navigationStart),r},e}(Ve);if(Bi()){le.TEST_VID=ue.createElement("video");var wa=ue.createElement("track");wa.kind="captions",wa.srclang="en",wa.label="English",le.TEST_VID.appendChild(wa)}le.isSupported=function(){try{le.TEST_VID.volume=.5}catch{return!1}return!!(le.TEST_VID&&le.TEST_VID.canPlayType)};le.canPlayType=function(t){return le.TEST_VID.canPlayType(t)};le.canPlaySource=function(t,e){return le.canPlayType(t.type)};le.canControlVolume=function(){try{var t=le.TEST_VID.volume;return le.TEST_VID.volume=t/2+.1,t!==le.TEST_VID.volume}catch{return!1}};le.canControlPlaybackRate=function(){if(jn&&ea&&I0<58)return!1;try{var t=le.TEST_VID.playbackRate;return le.TEST_VID.playbackRate=t/2+.1,t!==le.TEST_VID.playbackRate}catch{return!1}};le.canOverrideAttributes=function(){try{var t=function(){};Object.defineProperty(ue.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(ue.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(ue.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(ue.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0};le.supportsNativeTextTracks=function(){return P0};le.supportsNativeVideoTracks=function(){return!!(le.TEST_VID&&le.TEST_VID.videoTracks)};le.supportsNativeAudioTracks=function(){return!!(le.TEST_VID&&le.TEST_VID.audioTracks)};le.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];le.prototype.featuresVolumeControl=le.canControlVolume();le.prototype.featuresPlaybackRate=le.canControlPlaybackRate();le.prototype.featuresSourceset=le.canOverrideAttributes();le.prototype.movingMediaElementInDOM=!$n;le.prototype.featuresFullscreenResize=!0;le.prototype.featuresProgressEvents=!0;le.prototype.featuresTimeupdateEvents=!0;le.prototype.featuresNativeTextTracks=le.supportsNativeTextTracks();le.prototype.featuresNativeVideoTracks=le.supportsNativeVideoTracks();le.prototype.featuresNativeAudioTracks=le.supportsNativeAudioTracks();var ay=le.TEST_VID&&le.TEST_VID.constructor.prototype.canPlayType,SP=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;le.patchCanPlayType=function(){af>=4&&!A0&&!ea&&(le.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&SP.test(t)?"maybe":ay.call(this,t)})};le.unpatchCanPlayType=function(){var t=le.TEST_VID.constructor.prototype.canPlayType;return le.TEST_VID.constructor.prototype.canPlayType=ay,t};le.patchCanPlayType();le.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};le.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),n=e.length;n--;)t.removeChild(e[n]);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){le.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){le.prototype["set"+Qe(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(t){le.prototype[t]=function(){return this.el_[t]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){le.prototype["set"+Qe(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(t){le.prototype[t]=function(){return this.el_[t]()}});Ve.withSourceHandlers(le);le.nativeSourceHandler={};le.nativeSourceHandler.canPlayType=function(t){try{return le.TEST_VID.canPlayType(t)}catch{return""}};le.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return le.nativeSourceHandler.canPlayType(t.type);if(t.src){var n=cf(t.src);return le.nativeSourceHandler.canPlayType("video/"+n)}return""};le.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)};le.nativeSourceHandler.dispose=function(){};le.registerSourceHandler(le.nativeSourceHandler);Ve.registerTech("Html5",le);var xP=Kc([`
        Using the tech directly can be dangerous. I hope you know what you're doing.
        See https://github.com/videojs/video.js/issues/2617 for more info.
      `],[`
        Using the tech directly can be dangerous. I hope you know what you're doing.
        See https://github.com/videojs/video.js/issues/2617 for more info.
      `]),oy=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],zu={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},it=function(t){ae(e,t);function e(n,r,i){if(te(this,e),n.id=n.id||r.id||"vjs_video_"+Bn(),r=et(e.getTagSettings(n),r),r.initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if(typeof n.closest=="function"){var s=n.closest("[lang]");s&&s.getAttribute&&(r.language=s.getAttribute("lang"))}else for(var a=n;a&&a.nodeType===1;){if(Er(a).hasOwnProperty("lang")){r.language=a.getAttribute("lang");break}a=a.parentNode}var o=ne(this,t.call(this,null,r,i));if(o.isPosterFromTech_=!1,o.queuedCallbacks_=[],o.isReady_=!1,o.hasStarted_=!1,o.userActive_=!1,!o.options_||!o.options_.techOrder||!o.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(o.tag=n,o.tagAttributes=n&&Er(n),o.language(o.options_.language),r.languages){var u={};Object.getOwnPropertyNames(r.languages).forEach(function(d){u[d.toLowerCase()]=r.languages[d]}),o.languages_=u}else o.languages_=e.prototype.options_.languages;o.cache_={},o.poster_=r.poster||"",o.controls_=!!r.controls,o.cache_.lastVolume=1,n.controls=!1,n.removeAttribute("controls"),o.scrubbing_=!1,o.el_=o.createEl(),o.cache_.lastPlaybackRate=o.defaultPlaybackRate(),rf(o,{eventBusKey:"el_"});var l=Ke(o.options_);if(r.plugins){var c=r.plugins;Object.keys(c).forEach(function(d){if(typeof this[d]=="function")this[d](c[d]);else throw new Error('plugin "'+d+'" does not exist')},o)}o.options_.playerOptions=l,o.middleware_=[],o.initChildren(),o.isAudio(n.nodeName.toLowerCase()==="audio"),o.controls()?o.addClass("vjs-controls-enabled"):o.addClass("vjs-controls-disabled"),o.el_.setAttribute("role","region"),o.isAudio()?o.el_.setAttribute("aria-label",o.localize("Audio Player")):o.el_.setAttribute("aria-label",o.localize("Video Player")),o.isAudio()&&o.addClass("vjs-audio"),o.flexNotSupported_()&&o.addClass("vjs-no-flex"),$n||o.addClass("vjs-workinghover"),e.players[o.id_]=o;var f=e0.split(".")[0];return o.addClass("vjs-v"+f),o.userActive(!0),o.reportUserActivity(),o.one("play",o.listenForUserActivity_),o.on("fullscreenchange",o.handleFullscreenChange_),o.on("stageclick",o.handleStageClick_),o.changingSrc_=!1,o.playWaitingForReady_=!1,o.playOnLoadstart_=null,o}return e.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Gk(this),t.prototype.dispose.call(this)},e.prototype.createEl=function(){var r=this.tag,i=void 0,s=this.playerElIngest_=r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player"),a=this.tag.tagName.toLowerCase()==="video-js";s?i=this.el_=r.parentNode:a||(i=this.el_=t.prototype.createEl.call(this,"div"));var o=Er(r);if(a){for(i=this.el_=r,r=this.tag=ue.createElement("video");i.children.length;)r.appendChild(i.firstChild);wi(i,"video-js")||Pn(i,"video-js"),i.appendChild(r),s=this.playerElIngest_=i,Object.keys(i).forEach(function(h){r[h]=i[h]})}if(r.setAttribute("tabindex","-1"),r.removeAttribute("width"),r.removeAttribute("height"),Object.getOwnPropertyNames(o).forEach(function(h){a&&h==="class"||i.setAttribute(h,o[h]),a&&r.setAttribute(h,o[h])}),r.playerId=r.id,r.id+="_html5_api",r.className="vjs-tech",r.player=i.player=this,this.addClass("vjs-paused"),R.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=_0("vjs-styles-dimensions");var u=un(".vjs-styles-defaults"),l=un("head");l.insertBefore(this.styleEl_,u?u.nextSibling:l.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var c=r.getElementsByTagName("a"),f=0;f<c.length;f++){var d=c.item(f);Pn(d,"vjs-hidden"),d.setAttribute("hidden","hidden")}return r.initNetworkState_=r.networkState,r.parentNode&&!s&&r.parentNode.insertBefore(i,r),to(r,i),this.children_.unshift(r),this.el_.setAttribute("lang",this.language_),this.el_=i,i},e.prototype.width=function(r){return this.dimension("width",r)},e.prototype.height=function(r){return this.dimension("height",r)},e.prototype.dimension=function(r,i){var s=r+"_";if(i===void 0)return this[s]||0;if(i===""){this[s]=void 0,this.updateStyleEl_();return}var a=parseFloat(i);if(isNaN(a)){Pe.error('Improper value "'+i+'" supplied for for '+r);return}this[s]=a,this.updateStyleEl_()},e.prototype.fluid=function(r){if(r===void 0)return!!this.fluid_;this.fluid_=!!r,r?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_()},e.prototype.aspectRatio=function(r){if(r===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(r))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=r,this.fluid(!0),this.updateStyleEl_()},e.prototype.updateStyleEl_=function(){if(R.VIDEOJS_NO_DYNAMIC_STYLE===!0){var r=typeof this.width_=="number"?this.width_:this.options_.width,i=typeof this.height_=="number"?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(r>=0&&(s.width=r),i>=0&&(s.height=i));return}var a=void 0,o=void 0,u=void 0,l=void 0;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?u=this.aspectRatio_:this.videoWidth()>0?u=this.videoWidth()+":"+this.videoHeight():u="16:9";var c=u.split(":"),f=c[1]/c[0];this.width_!==void 0?a=this.width_:this.height_!==void 0?a=this.height_/f:a=this.videoWidth()||300,this.height_!==void 0?o=this.height_:o=a*f,/^[^a-zA-Z]/.test(this.id())?l="dimensions-"+this.id():l=this.id()+"-dimensions",this.addClass(l),b0(this.styleEl_,`
      .`+l+` {
        width: `+a+`px;
        height: `+o+`px;
      }

      .`+l+`.vjs-fluid {
        padding-top: `+f*100+`%;
      }
    `)},e.prototype.loadTech_=function(r,i){var s=this;this.tech_&&this.unloadTech_();var a=Qe(r),o=r.charAt(0).toLowerCase()+r.slice(1);a!=="Html5"&&this.tag&&(Ve.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=a,this.isReady_=!1;var u={source:i,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+a+"_api",autoplay:this.options_.autoplay,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};jt.names.forEach(function(c){var f=jt[c];u[f.getterName]=s[f.privateName]}),et(u,this.options_[a]),et(u,this.options_[o]),et(u,this.options_[r.toLowerCase()]),this.tag&&(u.tag=this.tag),i&&i.src===this.cache_.src&&this.cache_.currentTime>0&&(u.startTime=this.cache_.currentTime);var l=Ve.getTech(r);if(!l)throw new Error("No Tech named '"+a+"' exists! '"+a+"' should be registered using videojs.registerTech()'");this.tech_=new l(u),this.tech_.ready(Ae(this,this.handleTechReady_),!0),ep.jsonToTextTracks(this.textTracksJson_||[],this.tech_),oy.forEach(function(c){s.on(s.tech_,c,s["handleTech"+Qe(c)+"_"])}),Object.keys(zu).forEach(function(c){s.on(s.tech_,c,function(f){if(s.tech_.playbackRate()===0&&s.tech_.seeking()){s.queuedCallbacks_.push({callback:s["handleTech"+zu[c]+"_"].bind(s),event:f});return}s["handleTech"+zu[c]+"_"](f)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(a!=="Html5"||!this.tag)&&to(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},e.prototype.unloadTech_=function(){var r=this;jt.names.forEach(function(i){var s=jt[i];r[s.privateName]=r[s.getterName]()}),this.textTracksJson_=ep.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},e.prototype.tech=function(r){return r===void 0&&Pe.warn(Xc(xP)),this.tech_},e.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},e.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},e.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused())try{delete this.tag.poster}catch(r){Pe("deleting tag.poster throws in some browsers",r)}},e.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},e.prototype.updateSourceCaches_=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=r,s="";typeof i!="string"&&(i=r.src,s=r.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],i&&!s&&(s=Yk(this,i)),this.cache_.source={src:i,type:s};for(var a=this.cache_.sources.filter(function(d){return d.src&&d.src===i}),o=[],u=this.$$("source"),l=[],c=0;c<u.length;c++){var f=Er(u[c]);o.push(f),f.src&&f.src===i&&l.push(f.src)}l.length&&!a.length?this.cache_.sources=o:a.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=i},e.prototype.handleTechSourceset_=function(r){var i=this;if(!this.changingSrc_&&(this.updateSourceCaches_(r.src),!r.src)){var s=function a(o){o.type!=="sourceset"&&i.updateSourceCaches_(i.techGet_("currentSrc")),i.tech_.off(["sourceset","loadstart"],a)};this.tech_.one(["sourceset","loadstart"],s)}this.trigger({src:r.src,type:"sourceset"})},e.prototype.hasStarted=function(r){if(r===void 0)return this.hasStarted_;r!==this.hasStarted_&&(this.hasStarted_=r,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},e.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},e.prototype.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(r){return r.callback(r.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},e.prototype.handleTechWaiting_=function(){var r=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return r.removeClass("vjs-waiting")})},e.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},e.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},e.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},e.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},e.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},e.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(Pe.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},e.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},e.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},e.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},e.prototype.handleTechClick_=function(r){Ci(r)&&this.controls_&&(this.paused()?this.play():this.pause())},e.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},e.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},e.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},e.prototype.handleTechTouchEnd_=function(r){r.preventDefault()},e.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},e.prototype.handleStageClick_=function(){this.reportUserActivity()},e.prototype.handleTechFullscreenChange_=function(r,i){i&&this.isFullscreen(i.isFullscreen),this.trigger("fullscreenchange")},e.prototype.handleTechError_=function(){var r=this.tech_.error();this.error(r)},e.prototype.handleTechTextData_=function(){var r=null;arguments.length>1&&(r=arguments[1]),this.trigger("textdata",r)},e.prototype.getCache=function(){return this.cache_},e.prototype.techCall_=function(r,i){this.ready(function(){if(r in zk)return Vk(this.middleware_,this.tech_,r,i);if(r in sp)return ip(this.middleware_,this.tech_,r,i);try{this.tech_&&this.tech_[r](i)}catch(s){throw Pe(s),s}},!0)},e.prototype.techGet_=function(r){if(!(!this.tech_||!this.tech_.isReady_)){if(r in Wk)return Hk(this.middleware_,this.tech_,r);if(r in sp)return ip(this.middleware_,this.tech_,r);try{return this.tech_[r]()}catch(i){throw this.tech_[r]===void 0?(Pe("Video.js: "+r+" method not defined for "+this.techName_+" playback technology.",i),i):i.name==="TypeError"?(Pe("Video.js: "+r+" unavailable on "+this.techName_+" playback technology element.",i),this.tech_.isReady_=!1,i):(Pe(i),i)}}},e.prototype.play=function(){var r=this;if(this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return this.techGet_("play");this.playOnLoadstart_=function(){r.playOnLoadstart_=null,Rl(r.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){r.playWaitingForReady_=!1,Rl(r.play())})}},e.prototype.pause=function(){this.techCall_("pause")},e.prototype.paused=function(){return this.techGet_("paused")!==!1},e.prototype.played=function(){return this.techGet_("played")||On(0,0)},e.prototype.scrubbing=function(r){if(typeof r>"u")return this.scrubbing_;this.scrubbing_=!!r,r?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},e.prototype.currentTime=function(r){if(typeof r<"u"){r<0&&(r=0),this.techCall_("setCurrentTime",r);return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},e.prototype.duration=function(r){if(r===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;r=parseFloat(r),r<0&&(r=1/0),r!==this.cache_.duration&&(this.cache_.duration=r,r===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},e.prototype.remainingTime=function(){return this.duration()-this.currentTime()},e.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},e.prototype.buffered=function(){var r=this.techGet_("buffered");return(!r||!r.length)&&(r=On(0,0)),r},e.prototype.bufferedPercent=function(){return O0(this.buffered(),this.duration())},e.prototype.bufferedEnd=function(){var r=this.buffered(),i=this.duration(),s=r.end(r.length-1);return s>i&&(s=i),s},e.prototype.volume=function(r){var i=void 0;if(r!==void 0){i=Math.max(0,Math.min(1,parseFloat(r))),this.cache_.volume=i,this.techCall_("setVolume",i),i>0&&this.lastVolume_(i);return}return i=parseFloat(this.techGet_("volume")),isNaN(i)?1:i},e.prototype.muted=function(r){if(r!==void 0){this.techCall_("setMuted",r);return}return this.techGet_("muted")||!1},e.prototype.defaultMuted=function(r){return r!==void 0?this.techCall_("setDefaultMuted",r):this.techGet_("defaultMuted")||!1},e.prototype.lastVolume_=function(r){if(r!==void 0&&r!==0){this.cache_.lastVolume=r;return}return this.cache_.lastVolume},e.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},e.prototype.isFullscreen=function(r){if(r!==void 0){this.isFullscreen_=!!r;return}return!!this.isFullscreen_},e.prototype.requestFullscreen=function(){var r=Ol;this.isFullscreen(!0),r.requestFullscreen?(lr(ue,r.fullscreenchange,Ae(this,function i(s){this.isFullscreen(ue[r.fullscreenElement]),this.isFullscreen()===!1&&Wt(ue,r.fullscreenchange,i),this.trigger("fullscreenchange")})),this.el_[r.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},e.prototype.exitFullscreen=function(){var r=Ol;this.isFullscreen(!1),r.requestFullscreen?ue[r.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},e.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=ue.documentElement.style.overflow,lr(ue,"keydown",Ae(this,this.fullWindowOnEscKey)),ue.documentElement.style.overflow="hidden",Pn(ue.body,"vjs-full-window"),this.trigger("enterFullWindow")},e.prototype.fullWindowOnEscKey=function(r){r.keyCode===27&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())},e.prototype.exitFullWindow=function(){this.isFullWindow=!1,Wt(ue,"keydown",this.fullWindowOnEscKey),ue.documentElement.style.overflow=this.docOrigOverflow,Qs(ue.body,"vjs-full-window"),this.trigger("exitFullWindow")},e.prototype.canPlayType=function(r){for(var i=void 0,s=0,a=this.options_.techOrder;s<a.length;s++){var o=a[s],u=Ve.getTech(o);if(u||(u=X.getComponent(o)),!u){Pe.error('The "'+o+'" tech is undefined. Skipped browser support check for that tech.');continue}if(u.isSupported()&&(i=u.canPlayType(r),i))return i}return""},e.prototype.selectSource=function(r){var i=this,s=this.options_.techOrder.map(function(c){return[c,Ve.getTech(c)]}).filter(function(c){var f=c[0],d=c[1];return d?d.isSupported():(Pe.error('The "'+f+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),a=function(f,d,h){var g=void 0;return f.some(function(E){return d.some(function(S){if(g=h(E,S),g)return!0})}),g},o=void 0,u=function(f){return function(d,h){return f(h,d)}},l=function(f,d){var h=f[0],g=f[1];if(g.canPlaySource(d,i.options_[h.toLowerCase()]))return{source:d,tech:h}};return this.options_.sourceOrder?o=a(r,s,u(l)):o=a(s,r,l),o||!1},e.prototype.src=function(r){var i=this;if(typeof r>"u")return this.cache_.src||"";var s=Jk(r);if(!s.length){this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);return}this.changingSrc_=!0,this.cache_.sources=s,this.updateSourceCaches_(s[0]),$k(this,s[0],function(a,o){i.middleware_=o,i.cache_.sources=s,i.updateSourceCaches_(a);var u=i.src_(a);if(u){if(s.length>1)return i.src(s.slice(1));i.changingSrc_=!1,i.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),i.triggerReady();return}jk(o,i.tech_)})},e.prototype.src_=function(r){var i=this,s=this.selectSource([r]);return s?vk(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",r):this.techCall_("src",r.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(function(){i.changingSrc_=!1}),!1):!0},e.prototype.load=function(){this.techCall_("load")},e.prototype.reset=function(){this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},e.prototype.currentSources=function(){var r=this.currentSource(),i=[];return Object.keys(r).length!==0&&i.push(r),this.cache_.sources||i},e.prototype.currentSource=function(){return this.cache_.source||{}},e.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},e.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},e.prototype.preload=function(r){if(r!==void 0){this.techCall_("setPreload",r),this.options_.preload=r;return}return this.techGet_("preload")},e.prototype.autoplay=function(r){if(r!==void 0){this.techCall_("setAutoplay",r),this.options_.autoplay=r;return}return this.techGet_("autoplay",r)},e.prototype.playsinline=function(r){return r!==void 0?(this.techCall_("setPlaysinline",r),this.options_.playsinline=r,this):this.techGet_("playsinline")},e.prototype.loop=function(r){if(r!==void 0){this.techCall_("setLoop",r),this.options_.loop=r;return}return this.techGet_("loop")},e.prototype.poster=function(r){if(r===void 0)return this.poster_;r||(r=""),r!==this.poster_&&(this.poster_=r,this.techCall_("setPoster",r),this.isPosterFromTech_=!1,this.trigger("posterchange"))},e.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var r=this.tech_.poster()||"";r!==this.poster_&&(this.poster_=r,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},e.prototype.controls=function(r){if(r===void 0)return!!this.controls_;r=!!r,this.controls_!==r&&(this.controls_=r,this.usingNativeControls()&&this.techCall_("setControls",r),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},e.prototype.usingNativeControls=function(r){if(r===void 0)return!!this.usingNativeControls_;r=!!r,this.usingNativeControls_!==r&&(this.usingNativeControls_=r,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},e.prototype.error=function(r){if(r===void 0)return this.error_||null;if(r===null){this.error_=r,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Et(r),this.addClass("vjs-error"),Pe.error("(CODE:"+this.error_.code+" "+Et.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},e.prototype.reportUserActivity=function(r){this.userActivity_=!0},e.prototype.userActive=function(r){if(r===void 0)return this.userActive_;if(r=!!r,r!==this.userActive_){if(this.userActive_=r,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(i){i.stopPropagation(),i.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},e.prototype.listenForUserActivity_=function(){var r=void 0,i=void 0,s=void 0,a=Ae(this,this.reportUserActivity),o=function(d){(d.screenX!==i||d.screenY!==s)&&(i=d.screenX,s=d.screenY,a())},u=function(){a(),this.clearInterval(r),r=this.setInterval(a,250)},l=function(d){a(),this.clearInterval(r)};this.on("mousedown",u),this.on("mousemove",o),this.on("mouseup",l),this.on("keydown",a),this.on("keyup",a);var c=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(c);var f=this.options_.inactivityTimeout;f<=0||(c=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},f))}},250)},e.prototype.playbackRate=function(r){if(r!==void 0){this.techCall_("setPlaybackRate",r);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},e.prototype.defaultPlaybackRate=function(r){return r!==void 0?this.techCall_("setDefaultPlaybackRate",r):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},e.prototype.isAudio=function(r){if(r!==void 0){this.isAudio_=!!r;return}return!!this.isAudio_},e.prototype.addTextTrack=function(r,i,s){if(this.tech_)return this.tech_.addTextTrack(r,i,s)},e.prototype.addRemoteTextTrack=function(r,i){if(this.tech_)return this.tech_.addRemoteTextTrack(r,i)},e.prototype.removeRemoteTextTrack=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.track,s=i===void 0?arguments[0]:i;if(this.tech_)return this.tech_.removeRemoteTextTrack(s)},e.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},e.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},e.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},e.prototype.language=function(r){if(r===void 0)return this.language_;this.language_=String(r).toLowerCase()},e.prototype.languages=function(){return Ke(e.prototype.options_.languages,this.languages_)},e.prototype.toJSON=function(){var r=Ke(this.options_),i=r.tracks;r.tracks=[];for(var s=0;s<i.length;s++){var a=i[s];a=Ke(a),a.player=void 0,r.tracks[s]=a}return r},e.prototype.createModal=function(r,i){var s=this;i=i||{},i.content=r||"";var a=new ji(this,i);return this.addChild(a),a.on("dispose",function(){s.removeChild(a)}),a.open(),a},e.getTagSettings=function(r){var i={sources:[],tracks:[]},s=Er(r),a=s["data-setup"];if(wi(r,"vjs-fluid")&&(s.fluid=!0),a!==null){var o=ik(a||"{}"),u=o[0],l=o[1];u&&Pe.error(u),et(s,l)}if(et(i,s),r.hasChildNodes())for(var c=r.childNodes,f=0,d=c.length;f<d;f++){var h=c[f],g=h.nodeName.toLowerCase();g==="source"?i.sources.push(Er(h)):g==="track"&&i.tracks.push(Er(h))}return i},e.prototype.flexNotSupported_=function(){var r=ue.createElement("i");return!("flexBasis"in r.style||"webkitFlexBasis"in r.style||"mozFlexBasis"in r.style||"msFlexBasis"in r.style||"msFlexOrder"in r.style)},e}(X);jt.names.forEach(function(t){var e=jt[t];it.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});it.players={};var as=R.navigator;it.prototype.options_={techOrder:Ve.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:as&&(as.languages&&as.languages[0]||as.userLanguage||as.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."};["ended","seeking","seekable","networkState","readyState"].forEach(function(t){it.prototype[t]=function(){return this.techGet_(t)}});oy.forEach(function(t){it.prototype["handleTech"+Qe(t)+"_"]=function(){return this.trigger(t)}});X.registerComponent("Player",it);var so="plugin",hi="activePlugins_",si={},ao=function(e){return si.hasOwnProperty(e)},Na=function(e){return ao(e)?si[e]:void 0},uy=function(e,n){e[hi]=e[hi]||{},e[hi][n]=!0},oo=function(e,n,r){var i=(r?"before":"")+"pluginsetup";e.trigger(i,n),e.trigger(i+":"+n.name,n)},EP=function(e,n){var r=function(){oo(this,{name:e,plugin:n,instance:null},!0);var s=n.apply(this,arguments);return uy(this,e),oo(this,{name:e,plugin:n,instance:s}),s};return Object.keys(n).forEach(function(i){r[i]=n[i]}),r},bp=function(e,n){return n.prototype.name=e,function(){oo(this,{name:e,plugin:n,instance:null},!0);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];var a=new(Function.prototype.bind.apply(n,[null].concat([this].concat(i))));return this[e]=function(){return a},oo(this,a.getEventHash()),a}},Dr=function(){function t(e){if(te(this,t),this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,rf(this),delete this.trigger,E0(this,this.constructor.defaultState),uy(e,this.name),this.dispose=Ae(this,this.dispose),e.on("dispose",this.dispose)}return t.prototype.version=function(){return this.constructor.VERSION},t.prototype.getEventHash=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n.name=this.name,n.plugin=this.constructor,n.instance=this,n},t.prototype.trigger=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $i(this.eventBusEl_,n,this.getEventHash(r))},t.prototype.handleStateChanged=function(n){},t.prototype.dispose=function(){var n=this.name,r=this.player;this.trigger("dispose"),this.off(),r.off("dispose",this.dispose),r[hi][n]=!1,this.player=this.state=null,r[n]=bp(n,si[n])},t.isBasic=function(n){var r=typeof n=="string"?Na(n):n;return typeof r=="function"&&!t.prototype.isPrototypeOf(r.prototype)},t.registerPlugin=function(n,r){if(typeof n!="string")throw new Error('Illegal plugin name, "'+n+'", must be a string, was '+(typeof n>"u"?"undefined":an(n))+".");if(ao(n))Pe.warn('A plugin named "'+n+'" already exists. You may want to avoid re-registering plugins!');else if(it.prototype.hasOwnProperty(n))throw new Error('Illegal plugin name, "'+n+'", cannot share a name with an existing player method!');if(typeof r!="function")throw new Error('Illegal plugin for "'+n+'", must be a function, was '+(typeof r>"u"?"undefined":an(r))+".");return si[n]=r,n!==so&&(t.isBasic(r)?it.prototype[n]=EP(n,r):it.prototype[n]=bp(n,r)),r},t.deregisterPlugin=function(n){if(n===so)throw new Error("Cannot de-register base plugin.");ao(n)&&(delete si[n],delete it.prototype[n])},t.getPlugins=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Object.keys(si),r=void 0;return n.forEach(function(i){var s=Na(i);s&&(r=r||{},r[i]=s)}),r},t.getPluginVersion=function(n){var r=Na(n);return r&&r.VERSION||""},t}();Dr.getPlugin=Na;Dr.BASE_PLUGIN_NAME=so;Dr.registerPlugin(so,Dr);it.prototype.usingPlugin=function(t){return!!this[hi]&&this[hi][t]===!0};it.prototype.hasPlugin=function(t){return!!ao(t)};var wP=function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof n>"u"?"undefined":an(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(e.super_=n)},CP=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=function(){e.apply(this,arguments)},i={};(typeof n>"u"?"undefined":an(n))==="object"?(n.constructor!==Object.prototype.constructor&&(r=n.constructor),i=n):typeof n=="function"&&(r=n),wP(r,e);for(var s in i)i.hasOwnProperty(s)&&(r.prototype[s]=i[s]);return r},ly=function(e){return e.indexOf("#")===0?e.slice(1):e};function I(t,e,n){var r=I.getPlayer(t);if(r)return e&&Pe.warn('Player "'+t+'" is already initialised. Options will not be applied.'),n&&r.ready(n),r;var i=typeof t=="string"?un("#"+ly(t)):t;if(!Ys(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");ue.body.contains(i)||Pe.warn("The element supplied is not included in the DOM"),e=e||{},I.hooks("beforesetup").forEach(function(a){var o=a(i,Ke(e));if(!on(o)||Array.isArray(o)){Pe.error("please return an object in beforesetup hooks");return}e=Ke(e,o)});var s=X.getComponent("Player");return r=new s(i,e,n),I.hooks("setup").forEach(function(a){return a(r)}),r}I.hooks_={};I.hooks=function(t,e){return I.hooks_[t]=I.hooks_[t]||[],e&&(I.hooks_[t]=I.hooks_[t].concat(e)),I.hooks_[t]};I.hook=function(t,e){I.hooks(t,e)};I.hookOnce=function(t,e){I.hooks(t,[].concat(e).map(function(n){var r=function i(){return I.removeHook(t,i),n.apply(void 0,arguments)};return r}))};I.removeHook=function(t,e){var n=I.hooks(t).indexOf(e);return n<=-1?!1:(I.hooks_[t]=I.hooks_[t].slice(),I.hooks_[t].splice(n,1),!0)};if(R.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Bi()){var Ca=un(".vjs-styles-defaults");if(!Ca){Ca=_0("vjs-styles-defaults");var qu=un("head");qu&&qu.insertBefore(Ca,qu.firstChild),b0(Ca,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid {
        padding-top: 56.25%
      }
    `)}}Pl(1,I);I.VERSION=e0;I.options=it.prototype.options_;I.getPlayers=function(){return it.players};I.getPlayer=function(t){var e=it.players,n=void 0;if(typeof t=="string"){var r=ly(t),i=e[r];if(i)return i;n=un("#"+r)}else n=t;if(Ys(n)){var s=n,a=s.player,o=s.playerId;if(a||e[o])return a||e[o]}};I.getAllPlayers=function(){return Object.keys(it.players).map(function(t){return it.players[t]}).filter(Boolean)};I.players=it.players;I.getComponent=X.getComponent;I.registerComponent=function(t,e){Ve.isTech(e)&&Pe.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),X.registerComponent.call(X,t,e)};I.getTech=Ve.getTech;I.registerTech=Ve.registerTech;I.use=Bk;Object.defineProperty(I,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(I.middleware,"TERMINATOR",{value:io,writeable:!1,enumerable:!0});I.browser=Tk;I.TOUCH_ENABLED=no;I.extend=CP;I.mergeOptions=Ke;I.bind=Ae;I.registerPlugin=Dr.registerPlugin;I.plugin=function(t,e){return Pe.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Dr.registerPlugin(t,e)};I.getPlugins=Dr.getPlugins;I.getPlugin=Dr.getPlugin;I.getPluginVersion=Dr.getPluginVersion;I.addLanguage=function(t,e){var n;return t=(""+t).toLowerCase(),I.options.languages=Ke(I.options.languages,(n={},n[t]=e,n)),I.options.languages[t]};I.log=Pe;I.createTimeRange=I.createTimeRanges=On;I.formatTime=ki;I.setFormatTime=iP;I.resetFormatTime=sP;I.parseUrl=lf;I.isCrossOrigin=Vo;I.EventTarget=mt;I.on=lr;I.one=Zs;I.off=Wt;I.trigger=$i;I.xhr=Zv;I.TextTrack=ta;I.AudioTrack=N0;I.VideoTrack=M0;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){I[t]=function(){return Pe.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),m0[t].apply(null,arguments)}});I.computedStyle=Al;I.dom=m0;I.url=Lk;/**
 * @videojs/http-streaming
 * @version 1.0.0
 * @copyright 2018 Brightcove, Inc
 * @license Apache-2.0
 */var Ir=function(e,n){return/^[a-z]+:/i.test(n)?n:(/\/\//i.test(e)||(e=zh.buildAbsoluteURL(R.location.href,e)),zh.buildAbsoluteURL(e,n))},Ml=I.mergeOptions,AP=I.EventTarget,IP=I.log,Pf=function(e,n){["AUDIO","SUBTITLES"].forEach(function(r){for(var i in e.mediaGroups[r])for(var s in e.mediaGroups[r][i]){var a=e.mediaGroups[r][i][s];n(a,r,i,s)}})},kP=function(e,n,r){var i=n.slice();r=r||0;for(var s=Math.min(e.length,n.length+r),a=r;a<s;a++)i[a-r]=Ml(e[a],i[a-r]);return i},PP=function(e,n){e.resolvedUri||(e.resolvedUri=Ir(n,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Ir(n,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Ir(n,e.map.uri))},Ul=function(e,n){var r=Ml(e,{}),i=r.playlists[n.uri];if(!i||i.segments&&n.segments&&i.segments.length===n.segments.length&&i.mediaSequence===n.mediaSequence)return null;var s=Ml(i,n);i.segments&&(s.segments=kP(i.segments,n.segments,n.mediaSequence-i.mediaSequence)),s.segments.forEach(function(o){PP(o,s.resolvedUri)});for(var a=0;a<r.playlists.length;a++)r.playlists[a].uri===n.uri&&(r.playlists[a]=s);return r.playlists[n.uri]=s,r},cy=function(e){for(var n=e.playlists.length;n--;){var r=e.playlists[n];e.playlists[r.uri]=r,r.resolvedUri=Ir(e.uri,r.uri),r.id=n,r.attributes||(r.attributes={},IP.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},fy=function(e){Pf(e,function(n){n.uri&&(n.resolvedUri=Ir(e.uri,n.uri))})},dy=function(e,n){var r=e.segments[e.segments.length-1],i=void 0;return n&&r&&r.duration?i=r.duration*1e3:i=(e.targetDuration||10)*500,i},uo=function(t){ae(e,t);function e(n,r,i){te(this,e);var s=ne(this,t.call(this));if(s.srcUrl=n,s.hls_=r,s.withCredentials=i,!s.srcUrl)throw new Error("A non-empty playlist URL is required");return s.state="HAVE_NOTHING",s.on("mediaupdatetimeout",function(){s.state==="HAVE_METADATA"&&(s.state="HAVE_CURRENT_METADATA",s.request=s.hls_.xhr({uri:Ir(s.master.uri,s.media().uri),withCredentials:s.withCredentials},function(a,o){if(s.request){if(a)return s.playlistRequestError(s.request,s.media().uri,"HAVE_METADATA");s.haveMetadata(s.request,s.media().uri)}}))}),s}return e.prototype.playlistRequestError=function(r,i,s){this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[i],status:r.status,message:"HLS playlist request error at URL: "+i,responseText:r.responseText,code:r.status>=500?4:2},this.trigger("error")},e.prototype.haveMetadata=function(r,i){var s=this;this.request=null,this.state="HAVE_METADATA";var a=new qh.Parser;a.push(r.responseText),a.end(),a.manifest.uri=i,a.manifest.attributes=a.manifest.attributes||{};var o=Ul(this.master,a.manifest);this.targetDuration=a.manifest.targetDuration,o?(this.master=o,this.media_=this.master.playlists[a.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(R.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=R.setTimeout(function(){s.trigger("mediaupdatetimeout")},dy(this.media(),!!o))),this.trigger("loadedplaylist")},e.prototype.dispose=function(){this.stopRequest(),R.clearTimeout(this.mediaUpdateTimeout)},e.prototype.stopRequest=function(){if(this.request){var r=this.request;this.request=null,r.onreadystatechange=null,r.abort()}},e.prototype.media=function(r){var i=this;if(!r)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if(typeof r=="string"){if(!this.master.playlists[r])throw new Error("Unknown playlist URI: "+r);r=this.master.playlists[r]}var a=!this.media_||r.uri!==this.media_.uri;if(this.master.playlists[r.uri].endList){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=r,a&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}if(a){if(this.state="SWITCHING_MEDIA",this.request){if(Ir(this.master.uri,r.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:Ir(this.master.uri,r.uri),withCredentials:this.withCredentials},function(o,u){if(i.request){if(o)return i.playlistRequestError(i.request,r.uri,s);i.haveMetadata(u,r.uri),s==="HAVE_MASTER"?i.trigger("loadedmetadata"):i.trigger("mediachange")}})}},e.prototype.pause=function(){this.stopRequest(),R.clearTimeout(this.mediaUpdateTimeout),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},e.prototype.load=function(r){var i=this;R.clearTimeout(this.mediaUpdateTimeout);var s=this.media();if(r){var a=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=R.setTimeout(function(){return i.load()},a);return}if(!this.started){this.start();return}s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},e.prototype.start=function(){var r=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(i,s){if(r.request){if(r.request=null,i)return r.error={status:s.status,message:"HLS playlist request error at URL: "+r.srcUrl,responseText:s.responseText,code:2},r.state==="HAVE_NOTHING"&&(r.started=!1),r.trigger("error");var a=new qh.Parser;if(a.push(s.responseText),a.end(),r.state="HAVE_MASTER",a.manifest.uri=r.srcUrl,a.manifest.playlists){r.master=a.manifest,cy(r.master),fy(r.master),r.trigger("loadedplaylist"),r.request||r.media(a.manifest.playlists[0]);return}return r.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:R.location.href,playlists:[{uri:r.srcUrl,id:0}]},r.master.playlists[r.srcUrl]=r.master.playlists[0],r.master.playlists[0].resolvedUri=r.srcUrl,r.master.playlists[0].attributes=r.master.playlists[0].attributes||{},r.haveMetadata(s,r.srcUrl),r.trigger("loadedmetadata")}})},e}(AP),Tp=I.createTimeRange,OP=function(e,n){var r=0,i=n-e.mediaSequence,s=e.segments[i];if(s){if(typeof s.start<"u")return{result:s.start,precise:!0};if(typeof s.end<"u")return{result:s.end-s.duration,precise:!0}}for(;i--;){if(s=e.segments[i],typeof s.end<"u")return{result:r+s.end,precise:!0};if(r+=s.duration,typeof s.start<"u")return{result:r+s.start,precise:!0}}return{result:r,precise:!1}},RP=function(e,n){for(var r=0,i=void 0,s=n-e.mediaSequence;s<e.segments.length;s++){if(i=e.segments[s],typeof i.start<"u")return{result:i.start-r,precise:!0};if(r+=i.duration,typeof i.end<"u")return{result:i.end-r,precise:!0}}return{result:-1,precise:!1}},hy=function(e,n,r){var i=void 0,s=void 0;return typeof n>"u"&&(n=e.mediaSequence+e.segments.length),n<e.mediaSequence?0:(i=OP(e,n),i.precise?i.result:(s=RP(e,n),s.precise?s.result:i.result+r))},py=function(e,n,r){if(!e)return 0;if(typeof r!="number"&&(r=0),typeof n>"u"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return R.Infinity}return hy(e,n,r)},Ss=function(e,n,r){var i=0;if(n>r){var s=[r,n];n=s[0],r=s[1]}if(n<0){for(var a=n;a<Math.min(0,r);a++)i+=e.targetDuration;n=0}for(var o=n;o<r;o++)i+=e.segments[o].duration;return i},my=function(e){if(!e.segments.length)return 0;for(var n=e.segments.length-1,r=e.segments[n].duration||e.targetDuration,i=r+e.targetDuration*2;n--&&(r+=e.segments[n].duration,!(r>=i)););return Math.max(0,n)},gy=function(e,n,r){if(!e||!e.segments)return null;if(e.endList)return py(e);if(n===null)return null;n=n||0;var i=r?my(e):e.segments.length;return hy(e,e.mediaSequence+i,n)},DP=function(e,n){var r=!0,i=n||0,s=gy(e,n,r);return s===null?Tp():Tp(i,s)},Sp=function(e){return e-Math.floor(e)===0},vy=function(e,n){if(Sp(n))return n+e*.1;for(var r=n.toString().split(".")[1].length,i=1;i<=r;i++){var s=Math.pow(10,i),a=n*s;if(Sp(a)||i===r)return(a+e)/s}},LP=vy.bind(null,1),NP=vy.bind(null,-1),MP=function(e,n,r,i){var s=void 0,a=void 0,o=e.segments.length,u=n-i;if(u<0){if(r>0){for(s=r-1;s>=0;s--)if(a=e.segments[s],u+=NP(a.duration),u>0)return{mediaIndex:s,startTime:i-Ss(e,r,s)}}return{mediaIndex:0,startTime:n}}if(r<0){for(s=r;s<0;s++)if(u-=e.targetDuration,u<0)return{mediaIndex:0,startTime:n};r=0}for(s=r;s<o;s++)if(a=e.segments[s],u-=LP(a.duration),u<0)return{mediaIndex:s,startTime:i+Ss(e,r,s)};return{mediaIndex:o-1,startTime:n}},yy=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Of=function(e){return e.excludeUntil&&e.excludeUntil===1/0},qo=function(e){var n=yy(e);return!e.disabled&&!n},UP=function(e){return e.disabled},FP=function(e){for(var n=0;n<e.segments.length;n++)if(e.segments[n].key)return!0;return!1},BP=function(e){for(var n=0;n<e.segments.length;n++)if(e.segments[n].map)return!0;return!1},_y=function(e,n){return n.attributes&&n.attributes[e]},$P=function(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(!_y("BANDWIDTH",r))return NaN;var s=e*r.attributes.BANDWIDTH;return(s-i*8)/n},Fl=function(e,n){if(e.playlists.length===1)return!0;var r=n.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(function(i){return qo(i)?(i.attributes.BANDWIDTH||0)<r:!1}).length===0},Bt={duration:py,seekable:DP,safeLiveIndex:my,getMediaInfoForTime:MP,isEnabled:qo,isDisabled:UP,isBlacklisted:yy,isIncompatible:Of,playlistEnd:gy,isAes:FP,isFmp4:BP,hasAttribute:_y,estimateSegmentRequestTime:$P,isLowestEnabledRendition:Fl},jP=I.xhr,HP=I.mergeOptions,by=function(){var e=function n(r,i){r=HP({timeout:45e3},r);var s=n.beforeRequest||I.Hls.xhr.beforeRequest;if(s&&typeof s=="function"){var a=s(r);a&&(r=a)}var o=jP(r,function(l,c){var f=o.response;!l&&f&&(o.responseTime=Date.now(),o.roundTripTime=o.responseTime-o.requestTime,o.bytesReceived=f.byteLength||f.length,o.bandwidth||(o.bandwidth=Math.floor(o.bytesReceived/o.roundTripTime*8*1e3))),c.headers&&(o.responseHeaders=c.headers),l&&l.code==="ETIMEDOUT"&&(o.timedout=!0),!l&&!o.aborted&&c.statusCode!==200&&c.statusCode!==206&&c.statusCode!==0&&(l=new Error("XHR Failed with a response of: "+(o&&(f||o.responseText)))),i(l,o)}),u=o.abort;return o.abort=function(){return o.aborted=!0,u.apply(o,arguments)},o.uri=r.uri,o.requestTime=Date.now(),o};return e},VP=function(e,n){return e.start(n)+"-"+e.end(n)},WP=function(e,n){var r=e.toString(16);return"00".substring(0,2-r.length)+r+(n%2?" ":"")},zP=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Ty=function(e){var n={};return Object.keys(e).forEach(function(r){var i=e[r];ArrayBuffer.isView(i)?n[r]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:n[r]=i}),n},lo=function(e){var n=e.byterange||{length:1/0,offset:0};return[n.length,n.offset,e.resolvedUri].join(",")},Sy=function(e){for(var n=Array.prototype.slice.call(e),r=16,i="",s=void 0,a=void 0,o=0;o<n.length/r;o++)s=n.slice(o*r,o*r+r).map(WP).join(""),a=n.slice(o*r,o*r+r).map(zP).join(""),i+=s+" "+a+`
`;return i},qP=function(e){var n=e.bytes;return Sy(n)},GP=function(e){var n="",r=void 0;for(r=0;r<e.length;r++)n+=VP(e,r)+" ";return n},XP=Object.freeze({createTransferableMessage:Ty,initSegmentId:lo,hexDump:Sy,tagDump:qP,textRanges:GP}),Pi=1/30,wn=Pi*3,xy=function(e,n){var r=[],i=void 0;if(e&&e.length)for(i=0;i<e.length;i++)n(e.start(i),e.end(i))&&r.push([e.start(i),e.end(i)]);return I.createTimeRanges(r)},Ey=function(e,n){return xy(e,function(r,i){return r-Pi<=n&&i+Pi>=n})},xp=function(e,n){return xy(e,function(r){return r-Pi>=n})},KP=function(e){if(e.length<2)return I.createTimeRanges();for(var n=[],r=1;r<e.length;r++){var i=e.end(r-1),s=e.start(r);n.push([i,s])}return I.createTimeRanges(n)},Rf=function(e){var n=[];if(!e||!e.length)return"";for(var r=0;r<e.length;r++)n.push(e.start(r)+" => "+e.end(r));return n.join(", ")},YP=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=e.length?e.end(e.length-1):0;return(i-n)/r},Ep=function(e){for(var n=[],r=0;r<e.length;r++)n.push({start:e.start(r),end:e.end(r)});return n},JP=function(e,n,r){var i=n.player_;if(r.captions&&r.captions.length){e.inbandTextTracks_||(e.inbandTextTracks_={});for(var s in r.captionStreams)if(!e.inbandTextTracks_[s]){i.tech_.trigger({type:"usage",name:"hls-608"});var a=i.textTracks().getTrackById(s);a?e.inbandTextTracks_[s]=a:e.inbandTextTracks_[s]=i.addRemoteTextTrack({kind:"captions",id:s,label:s},!1).track}}r.metadata&&r.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=r.metadata.dispatchType)},Bs=function(e,n,r){var i=void 0,s=void 0;if(r&&r.cues)for(i=r.cues.length;i--;)s=r.cues[i],s.startTime<=n&&s.endTime>=e&&r.removeCue(s)},QP=function(e){Object.defineProperties(e.frame,{id:{get:function(){return I.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return I.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return I.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},wy=function(e){var n=void 0;return isNaN(e)||Math.abs(e)===1/0?n=Number.MAX_VALUE:n=e,n},ZP=function(e,n,r){var i=R.WebKitDataCue||R.VTTCue;if(n&&n.forEach(function(f){var d=f.stream;this.inbandTextTracks_[d].addCue(new i(f.startTime+this.timestampOffset,f.endTime+this.timestampOffset,f.text))},e),r){var s=wy(e.mediaSource_.duration);if(r.forEach(function(f){var d=f.cueTime+this.timestampOffset;f.frames.forEach(function(h){var g=new i(d,d,h.value||h.url||h.data||"");g.frame=h,g.value=h,QP(g),this.metadataTrack_.addCue(g)},this)},e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var a=e.metadataTrack_.cues,o=[],u=0;u<a.length;u++)a[u]&&o.push(a[u]);var l=o.reduce(function(f,d){var h=f[d.startTime]||[];return h.push(d),f[d.startTime]=h,f},{}),c=Object.keys(l).sort(function(f,d){return Number(f)-Number(d)});c.forEach(function(f,d){var h=l[f],g=Number(c[d+1])||s;h.forEach(function(E){E.endTime=g})})}}},Cn=typeof window<"u"?window:{},Gu=typeof Symbol>"u"?"__target":Symbol(),eO="application/javascript",tO=Cn.BlobBuilder||Cn.WebKitBlobBuilder||Cn.MozBlobBuilder||Cn.MSBlobBuilder,Oi=Cn.URL||Cn.webkitURL||Oi&&Oi.msURL,pi=Cn.Worker;function Cy(t,e){return function(r){var i=this;if(e)if(pi&&!r){var s=e.toString().replace(/^function.+?{/,"").slice(0,-1),a=Ay(s);return this[Gu]=new pi(a),rO(this[Gu],a),this[Gu]}else{var o={postMessage:function(l){i.onmessage&&setTimeout(function(){i.onmessage({data:l,target:o})})}};e.call(o),this.postMessage=function(u){setTimeout(function(){o.onmessage({data:u,target:i})})},this.isThisThread=!0}else return new pi(t)}}if(pi){var Aa,wp=Ay("self.onmessage = function () {}"),Cp=new Uint8Array(1);try{Aa=new pi(wp),Aa.postMessage(Cp,[Cp.buffer])}catch{pi=null}finally{Oi.revokeObjectURL(wp),Aa&&Aa.terminate()}}function Ay(t){try{return Oi.createObjectURL(new Blob([t],{type:eO}))}catch{var e=new tO;return e.append(t),Oi.createObjectURL(e.getBlob(type))}}function rO(t,e){if(!(!t||!e)){var n=t.terminate;t.objURL=e,t.terminate=function(){t.objURL&&Oi.revokeObjectURL(t.objURL),n.call(t)}}}var nO=new Cy("./transmuxer-worker.worker.js",function(t,e){var n=this;(function(){var r=typeof t<"u"?t:typeof sn<"u"?sn:typeof n<"u"?n:{},i;typeof t<"u"?i=t:typeof r<"u"?i=r:typeof n<"u"?i=n:i={};var s=i,a=Math.pow(2,32)-1,o,u,l,c,f,d,h,g,E,S,x,D,$,U,_e,re,Z,H,z,ie,me,de,V,J,Te,he,pe,be,ze,Be,$e,we,tt,lt,Mt,qe;(function(){var A;if(V={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(A in V)V.hasOwnProperty(A)&&(V[A]=[A.charCodeAt(0),A.charCodeAt(1),A.charCodeAt(2),A.charCodeAt(3)]);J=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),he=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Te=new Uint8Array([0,0,0,1]),pe=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),be=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ze={video:pe,audio:be},we=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),$e=new Uint8Array([0,0,0,0,0,0,0,0]),tt=new Uint8Array([0,0,0,0,0,0,0,0]),lt=tt,Mt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),qe=tt,Be=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(p){var m=[],v=0,y,C,_;for(y=1;y<arguments.length;y++)m.push(arguments[y]);for(y=m.length;y--;)v+=m[y].byteLength;for(C=new Uint8Array(v+8),_=new DataView(C.buffer,C.byteOffset,C.byteLength),_.setUint32(0,C.byteLength),C.set(p,4),y=0,v=8;y<m.length;y++)C.set(m[y],v),v+=m[y].byteLength;return C},u=function(){return o(V.dinf,o(V.dref,we))},l=function(p){return o(V.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,p.audioobjecttype<<3|p.samplingfrequencyindex>>>1,p.samplingfrequencyindex<<7|p.channelcount<<3,6,1,2]))},c=function(){return o(V.ftyp,J,Te,J,he)},re=function(p){return o(V.hdlr,ze[p])},f=function(p){return o(V.mdat,p)},_e=function(p){var m=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,p.duration>>>24&255,p.duration>>>16&255,p.duration>>>8&255,p.duration&255,85,196,0,0]);return p.samplerate&&(m[12]=p.samplerate>>>24&255,m[13]=p.samplerate>>>16&255,m[14]=p.samplerate>>>8&255,m[15]=p.samplerate&255),o(V.mdhd,m)},U=function(p){return o(V.mdia,_e(p),re(p.type),h(p))},d=function(p){return o(V.mfhd,new Uint8Array([0,0,0,0,(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255]))},h=function(p){return o(V.minf,p.type==="video"?o(V.vmhd,Be):o(V.smhd,$e),u(),H(p))},g=function(p,m){for(var v=[],y=m.length;y--;)v[y]=ie(m[y]);return o.apply(null,[V.moof,d(p)].concat(v))},E=function(p){for(var m=p.length,v=[];m--;)v[m]=D(p[m]);return o.apply(null,[V.moov,x(4294967295)].concat(v).concat(S(p)))},S=function(p){for(var m=p.length,v=[];m--;)v[m]=me(p[m]);return o.apply(null,[V.mvex].concat(v))},x=function(p){var m=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(V.mvhd,m)},Z=function(p){var m=p.samples||[],v=new Uint8Array(4+m.length),y,C;for(C=0;C<m.length;C++)y=m[C].flags,v[C+4]=y.dependsOn<<4|y.isDependedOn<<2|y.hasRedundancy;return o(V.sdtp,v)},H=function(p){return o(V.stbl,z(p),o(V.stts,qe),o(V.stsc,lt),o(V.stsz,Mt),o(V.stco,tt))},function(){var A,p;z=function(v){return o(V.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),v.type==="video"?A(v):p(v))},A=function(v){var y=v.sps||[],C=v.pps||[],_=[],k=[],T;for(T=0;T<y.length;T++)_.push((y[T].byteLength&65280)>>>8),_.push(y[T].byteLength&255),_=_.concat(Array.prototype.slice.call(y[T]));for(T=0;T<C.length;T++)k.push((C[T].byteLength&65280)>>>8),k.push(C[T].byteLength&255),k=k.concat(Array.prototype.slice.call(C[T]));return o(V.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(v.width&65280)>>8,v.width&255,(v.height&65280)>>8,v.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(V.avcC,new Uint8Array([1,v.profileIdc,v.profileCompatibility,v.levelIdc,255].concat([y.length]).concat(_).concat([C.length]).concat(k))),o(V.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},p=function(v){return o(V.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(v.channelcount&65280)>>8,v.channelcount&255,(v.samplesize&65280)>>8,v.samplesize&255,0,0,0,0,(v.samplerate&65280)>>8,v.samplerate&255,0,0]),l(v))}}(),$=function(p){var m=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,0,(p.duration&4278190080)>>24,(p.duration&16711680)>>16,(p.duration&65280)>>8,p.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(p.width&65280)>>8,p.width&255,0,0,(p.height&65280)>>8,p.height&255,0,0]);return o(V.tkhd,m)},ie=function(p){var m,v,y,C,_,k,T;return m=o(V.tfhd,new Uint8Array([0,0,0,58,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),k=Math.floor(p.baseMediaDecodeTime/(a+1)),T=Math.floor(p.baseMediaDecodeTime%(a+1)),v=o(V.tfdt,new Uint8Array([1,0,0,0,k>>>24&255,k>>>16&255,k>>>8&255,k&255,T>>>24&255,T>>>16&255,T>>>8&255,T&255])),_=32+20+8+16+8+8,p.type==="audio"?(y=de(p,_),o(V.traf,m,v,y)):(C=Z(p),y=de(p,C.length+_),o(V.traf,m,v,y,C))},D=function(p){return p.duration=p.duration||4294967295,o(V.trak,$(p),U(p))},me=function(p){var m=new Uint8Array([0,0,0,0,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return p.type!=="video"&&(m[m.length-1]=0),o(V.trex,m)},function(){var A,p,m;m=function(y,C){var _=0,k=0,T=0,O=0;return y.length&&(y[0].duration!==void 0&&(_=1),y[0].size!==void 0&&(k=2),y[0].flags!==void 0&&(T=4),y[0].compositionTimeOffset!==void 0&&(O=8)),[0,0,_|k|T|O,1,(y.length&4278190080)>>>24,(y.length&16711680)>>>16,(y.length&65280)>>>8,y.length&255,(C&4278190080)>>>24,(C&16711680)>>>16,(C&65280)>>>8,C&255]},p=function(y,C){var _,k,T,O;for(k=y.samples||[],C+=8+12+16*k.length,_=m(k,C),O=0;O<k.length;O++)T=k[O],_=_.concat([(T.duration&4278190080)>>>24,(T.duration&16711680)>>>16,(T.duration&65280)>>>8,T.duration&255,(T.size&4278190080)>>>24,(T.size&16711680)>>>16,(T.size&65280)>>>8,T.size&255,T.flags.isLeading<<2|T.flags.dependsOn,T.flags.isDependedOn<<6|T.flags.hasRedundancy<<4|T.flags.paddingValue<<1|T.flags.isNonSyncSample,T.flags.degradationPriority&61440,T.flags.degradationPriority&15,(T.compositionTimeOffset&4278190080)>>>24,(T.compositionTimeOffset&16711680)>>>16,(T.compositionTimeOffset&65280)>>>8,T.compositionTimeOffset&255]);return o(V.trun,new Uint8Array(_))},A=function(y,C){var _,k,T,O;for(k=y.samples||[],C+=8+12+8*k.length,_=m(k,C),O=0;O<k.length;O++)T=k[O],_=_.concat([(T.duration&4278190080)>>>24,(T.duration&16711680)>>>16,(T.duration&65280)>>>8,T.duration&255,(T.size&4278190080)>>>24,(T.size&16711680)>>>16,(T.size&65280)>>>8,T.size&255]);return o(V.trun,new Uint8Array(_))},de=function(y,C){return y.type==="audio"?A(y,C):p(y,C)}}();var M={ftyp:c,mdat:f,moof:g,moov:E,initSegment:function(p){var m=c(),v=E(p),y;return y=new Uint8Array(m.byteLength+v.byteLength),y.set(m),y.set(v,m.byteLength),y}},se=function(){this.init=function(){var p={};this.on=function(m,v){p[m]||(p[m]=[]),p[m]=p[m].concat(v)},this.off=function(m,v){var y;return p[m]?(y=p[m].indexOf(v),p[m]=p[m].slice(),p[m].splice(y,1),y>-1):!1},this.trigger=function(m){var v,y,C,_;if(v=p[m],!!v)if(arguments.length===2)for(C=v.length,y=0;y<C;++y)v[y].call(this,arguments[1]);else{for(_=[],y=arguments.length,y=1;y<arguments.length;++y)_.push(arguments[y]);for(C=v.length,y=0;y<C;++y)v[y].apply(this,_)}},this.dispose=function(){p={}}}};se.prototype.pipe=function(A){return this.on("data",function(p){A.push(p)}),this.on("done",function(p){A.flush(p)}),A},se.prototype.push=function(A){this.trigger("data",A)},se.prototype.flush=function(A){this.trigger("done",A)};var q=se,ce=4,Re=128,b=function(p){for(var m=0,v={payloadType:-1,payloadSize:0},y=0,C=0;m<p.byteLength&&p[m]!==Re;){for(;p[m]===255;)y+=255,m++;for(y+=p[m++];p[m]===255;)C+=255,m++;if(C+=p[m++],!v.payload&&y===ce){v.payloadType=y,v.payloadSize=C,v.payload=p.subarray(m,m+C);break}m+=C,y=0,C=0}return v},w=function(p){return p.payload[0]!==181||(p.payload[1]<<8|p.payload[2])!==49||String.fromCharCode(p.payload[3],p.payload[4],p.payload[5],p.payload[6])!=="GA94"||p.payload[7]!==3?null:p.payload.subarray(8,p.payload.length-1)},P=function(p,m){var v=[],y,C,_,k;if(!(m[0]&64))return v;for(C=m[0]&31,y=0;y<C;y++)_=y*3,k={type:m[_+2]&3,pts:p},m[_+2]&4&&(k.ccData=m[_+3]<<8|m[_+4],v.push(k));return v},N=function A(){A.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new B(0,0),new B(0,1),new B(1,0),new B(1,1)],this.reset(),this.ccStreams_.forEach(function(p){p.on("data",this.trigger.bind(this,"data")),p.on("done",this.trigger.bind(this,"done"))},this)};N.prototype=new q,N.prototype.push=function(A){var p,m;if(A.nalUnitType==="sei_rbsp"&&(p=b(A.escapedRBSP),p.payloadType===ce&&(m=w(p),!!m))){if(A.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(A.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}this.captionPackets_=this.captionPackets_.concat(P(A.pts,m)),this.latestDts_!==A.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=A.dts}},N.prototype.flush=function(){if(!this.captionPackets_.length){this.ccStreams_.forEach(function(A){A.flush()},this);return}this.captionPackets_.forEach(function(A,p){A.presortIndex=p}),this.captionPackets_.sort(function(A,p){return A.pts===p.pts?A.presortIndex-p.presortIndex:A.pts-p.pts}),this.captionPackets_.forEach(function(A){A.type<2&&this.dispatchCea608Packet(A)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(A){A.flush()},this)},N.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(A){A.reset()})},N.prototype.dispatchCea608Packet=function(A){this.setsChannel1Active(A)?this.activeCea608Channel_[A.type]=0:this.setsChannel2Active(A)&&(this.activeCea608Channel_[A.type]=1),this.activeCea608Channel_[A.type]!==null&&this.ccStreams_[(A.type<<1)+this.activeCea608Channel_[A.type]].push(A)},N.prototype.setsChannel1Active=function(A){return(A.ccData&30720)===4096},N.prototype.setsChannel2Active=function(A){return(A.ccData&30720)===6144};var j={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},W=function(p){return p===null?"":(p=j[p]||p,String.fromCharCode(p))},K=14,Y=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ee=function(){for(var p=[],m=K+1;m--;)p.push("");return p},B=function A(p,m){A.prototype.init.call(this),this.field_=p||0,this.dataChannel_=m||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(v){var y,C,_,k,T;if(y=v.ccData&32639,y===this.lastControlCode_){this.lastControlCode_=null;return}if((y&61440)===4096?this.lastControlCode_=y:y!==this.PADDING_&&(this.lastControlCode_=null),_=y>>>8,k=y&255,y!==this.PADDING_)if(y===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(y===this.END_OF_CAPTION_)this.clearFormatting(v.pts),this.flushDisplayed(v.pts),C=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=C,this.startPts_=v.pts;else if(y===this.ROLL_UP_2_ROWS_)this.topRow_=K-1,this.mode_="rollUp";else if(y===this.ROLL_UP_3_ROWS_)this.topRow_=K-2,this.mode_="rollUp";else if(y===this.ROLL_UP_4_ROWS_)this.topRow_=K-3,this.mode_="rollUp";else if(y===this.CARRIAGE_RETURN_)this.clearFormatting(v.pts),this.flushDisplayed(v.pts),this.shiftRowsUp_(),this.startPts_=v.pts;else if(y===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[K]=this.nonDisplayed_[K].slice(0,-1):this.displayed_[K]=this.displayed_[K].slice(0,-1);else if(y===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(v.pts),this.displayed_=ee();else if(y===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ee();else if(y===this.RESUME_DIRECT_CAPTIONING_)this.mode_="paintOn";else if(this.isSpecialCharacter(_,k))_=(_&3)<<8,T=W(_|k),this[this.mode_](v.pts,T),this.column_++;else if(this.isExtCharacter(_,k))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[K]=this.displayed_[K].slice(0,-1),_=(_&3)<<8,T=W(_|k),this[this.mode_](v.pts,T),this.column_++;else if(this.isMidRowCode(_,k))this.clearFormatting(v.pts),this[this.mode_](v.pts," "),this.column_++,(k&14)===14&&this.addFormatting(v.pts,["i"]),(k&1)===1&&this.addFormatting(v.pts,["u"]);else if(this.isOffsetControlCode(_,k))this.column_+=k&3;else if(this.isPAC(_,k)){var O=Y.indexOf(y&7968);O!==this.row_&&(this.clearFormatting(v.pts),this.row_=O),k&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(v.pts,["u"]),(y&16)===16&&(this.column_=((y&14)>>1)*4),this.isColorPAC(k)&&(k&14)===14&&this.addFormatting(v.pts,["i"])}else this.isNormalChar(_)&&(k===0&&(k=null),T=W(_),T+=W(k),this[this.mode_](v.pts,T),this.column_+=T.length)}};B.prototype=new q,B.prototype.flushDisplayed=function(A){var p=this.displayed_.map(function(m){return m.trim()}).join(`
`).replace(/^\n+|\n+$/g,"");p.length&&this.trigger("data",{startPts:this.startPts_,endPts:A,text:p,stream:this.name_})},B.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ee(),this.nonDisplayed_=ee(),this.lastControlCode_=null,this.column_=0,this.row_=K,this.formatting_=[]},B.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},B.prototype.isSpecialCharacter=function(A,p){return A===this.EXT_&&p>=48&&p<=63},B.prototype.isExtCharacter=function(A,p){return(A===this.EXT_+1||A===this.EXT_+2)&&p>=32&&p<=63},B.prototype.isMidRowCode=function(A,p){return A===this.EXT_&&p>=32&&p<=47},B.prototype.isOffsetControlCode=function(A,p){return A===this.OFFSET_&&p>=33&&p<=35},B.prototype.isPAC=function(A,p){return A>=this.BASE_&&A<this.BASE_+8&&p>=64&&p<=127},B.prototype.isColorPAC=function(A){return A>=64&&A<=79||A>=96&&A<=127},B.prototype.isNormalChar=function(A){return A>=32&&A<=127},B.prototype.addFormatting=function(A,p){this.formatting_=this.formatting_.concat(p);var m=p.reduce(function(v,y){return v+"<"+y+">"},"");this[this.mode_](A,m)},B.prototype.clearFormatting=function(A){if(this.formatting_.length){var p=this.formatting_.reverse().reduce(function(m,v){return m+"</"+v+">"},"");this.formatting_=[],this[this.mode_](A,p)}},B.prototype.popOn=function(A,p){var m=this.nonDisplayed_[this.row_];m+=p,this.nonDisplayed_[this.row_]=m},B.prototype.rollUp=function(A,p){var m=this.displayed_[K];m+=p,this.displayed_[K]=m},B.prototype.shiftRowsUp_=function(){var A;for(A=0;A<this.topRow_;A++)this.displayed_[A]="";for(A=this.topRow_;A<K;A++)this.displayed_[A]=this.displayed_[A+1];this.displayed_[K]=""},B.prototype.paintOn=function(){};var ge={CaptionStream:N,Cea608Stream:B},oe={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},ye=8589934592,xe=4294967296,Ie=function(p,m){var v=1;for(p>m&&(v=-1);Math.abs(m-p)>xe;)p+=v*ye;return p},Ne=function A(p){var m,v;A.prototype.init.call(this),this.type_=p,this.push=function(y){y.type===this.type_&&(v===void 0&&(v=y.dts),y.dts=Ie(y.dts,v),y.pts=Ie(y.pts,v),m=y.dts,this.trigger("data",y))},this.flush=function(){v=m,this.trigger("done")},this.discontinuity=function(){v=void 0,m=void 0}};Ne.prototype=new q;var Le={TimestampRolloverStream:Ne,handleRollover:Ie},Xe=function(p,m,v){var y,C="";for(y=m;y<v;y++)C+="%"+("00"+p[y].toString(16)).slice(-2);return C},ct=function(p,m,v){return decodeURIComponent(Xe(p,m,v))},Mr=function(p,m,v){return unescape(Xe(p,m,v))},cn=function(p){return p[0]<<21|p[1]<<14|p[2]<<7|p[3]},Ur={TXXX:function(p){var m;if(p.data[0]===3){for(m=1;m<p.data.length;m++)if(p.data[m]===0){p.description=ct(p.data,1,m),p.value=ct(p.data,m+1,p.data.length).replace(/\0*$/,"");break}p.data=p.value}},WXXX:function(p){var m;if(p.data[0]===3){for(m=1;m<p.data.length;m++)if(p.data[m]===0){p.description=ct(p.data,1,m),p.url=ct(p.data,m+1,p.data.length);break}}},PRIV:function(p){var m;for(m=0;m<p.data.length;m++)if(p.data[m]===0){p.owner=Mr(p.data,0,m);break}p.privateData=p.data.subarray(m+1),p.data=p.privateData}},fn;fn=function(p){var m={debug:!!(p&&p.debug),descriptor:p&&p.descriptor},v=0,y=[],C=0,_;if(fn.prototype.init.call(this),this.dispatchType=oe.METADATA_STREAM_TYPE.toString(16),m.descriptor)for(_=0;_<m.descriptor.length;_++)this.dispatchType+=("00"+m.descriptor[_].toString(16)).slice(-2);this.push=function(k){var T,O,L,F,G,fe;if(k.type==="timed-metadata"){if(k.dataAlignmentIndicator&&(C=0,y.length=0),y.length===0&&(k.data.length<10||k.data[0]!=="I".charCodeAt(0)||k.data[1]!=="D".charCodeAt(0)||k.data[2]!=="3".charCodeAt(0))){m.debug&&console.log("Skipping unrecognized metadata packet");return}if(y.push(k),C+=k.data.byteLength,y.length===1&&(v=cn(k.data.subarray(6,10)),v+=10),!(C<v)){for(T={data:new Uint8Array(v),frames:[],pts:y[0].pts,dts:y[0].dts},G=0;G<v;)T.data.set(y[0].data.subarray(0,v-G),G),G+=y[0].data.byteLength,C-=y[0].data.byteLength,y.shift();O=10,T.data[5]&64&&(O+=4,O+=cn(T.data.subarray(10,14)),v-=cn(T.data.subarray(16,20)));do{if(L=cn(T.data.subarray(O+4,O+8)),L<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if(fe=String.fromCharCode(T.data[O],T.data[O+1],T.data[O+2],T.data[O+3]),F={id:fe,data:T.data.subarray(O+10,O+L+10)},F.key=F.id,Ur[F.id]&&(Ur[F.id](F),F.owner==="com.apple.streaming.transportStreamTimestamp")){var ve=F.data,Se=(ve[3]&1)<<30|ve[4]<<22|ve[5]<<14|ve[6]<<6|ve[7]>>>2;Se*=4,Se+=ve[7]&3,F.timeStamp=Se,T.pts===void 0&&T.dts===void 0&&(T.pts=F.timeStamp,T.dts=F.timeStamp),this.trigger("timestamp",F)}T.frames.push(F),O+=10,O+=L}while(O<v);this.trigger("data",T)}}}},fn.prototype=new q;var vt=fn,qt=Le.TimestampRolloverStream,dn,zi,aa,Hn=188,Go=71;dn=function(){var p=new Uint8Array(Hn),m=0;dn.prototype.init.call(this),this.push=function(v){var y=0,C=Hn,_;for(m?(_=new Uint8Array(v.byteLength+m),_.set(p.subarray(0,m)),_.set(v,m),m=0):_=v;C<_.byteLength;){if(_[y]===Go&&_[C]===Go){this.trigger("data",_.subarray(y,C)),y+=Hn,C+=Hn;continue}y++,C++}y<_.byteLength&&(p.set(_.subarray(y),0),m=_.byteLength-y)},this.flush=function(){m===Hn&&p[0]===Go&&(this.trigger("data",p),m=0),this.trigger("done")}},dn.prototype=new q,zi=function(){var p,m,v,y;zi.prototype.init.call(this),y=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,p=function(_,k){var T=0;k.payloadUnitStartIndicator&&(T+=_[T]+1),k.type==="pat"?m(_.subarray(T),k):v(_.subarray(T),k)},m=function(_,k){k.section_number=_[7],k.last_section_number=_[8],y.pmtPid=(_[10]&31)<<8|_[11],k.pmtPid=y.pmtPid},v=function(_,k){var T,O,L,F;if(_[5]&1){for(y.programMapTable={video:null,audio:null,"timed-metadata":{}},T=(_[1]&15)<<8|_[2],O=3+T-4,L=(_[10]&15)<<8|_[11],F=12+L;F<O;){var G=_[F],fe=(_[F+1]&31)<<8|_[F+2];G===oe.H264_STREAM_TYPE&&y.programMapTable.video===null?y.programMapTable.video=fe:G===oe.ADTS_STREAM_TYPE&&y.programMapTable.audio===null?y.programMapTable.audio=fe:G===oe.METADATA_STREAM_TYPE&&(y.programMapTable["timed-metadata"][fe]=G),F+=((_[F+3]&15)<<8|_[F+4])+5}k.programMapTable=y.programMapTable}},this.push=function(C){var _={},k=4;if(_.payloadUnitStartIndicator=!!(C[1]&64),_.pid=C[1]&31,_.pid<<=8,_.pid|=C[2],(C[3]&48)>>>4>1&&(k+=C[k]+1),_.pid===0)_.type="pat",p(C.subarray(k),_),this.trigger("data",_);else if(_.pid===this.pmtPid)for(_.type="pmt",p(C.subarray(k),_),this.trigger("data",_);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([C,k,_]):this.processPes_(C,k,_)},this.processPes_=function(C,_,k){k.pid===this.programMapTable.video?k.streamType=oe.H264_STREAM_TYPE:k.pid===this.programMapTable.audio?k.streamType=oe.ADTS_STREAM_TYPE:k.streamType=this.programMapTable["timed-metadata"][k.pid],k.type="pes",k.data=C.subarray(_),this.trigger("data",k)}},zi.prototype=new q,zi.STREAM_TYPES={h264:27,adts:15},aa=function(){var p=this,m={data:[],size:0},v={data:[],size:0},y={data:[],size:0},C=function(T,O){var L;O.packetLength=6+(T[4]<<8|T[5]),O.dataAlignmentIndicator=(T[6]&4)!==0,L=T[7],L&192&&(O.pts=(T[9]&14)<<27|(T[10]&255)<<20|(T[11]&254)<<12|(T[12]&255)<<5|(T[13]&254)>>>3,O.pts*=4,O.pts+=(T[13]&6)>>>1,O.dts=O.pts,L&64&&(O.dts=(T[14]&14)<<27|(T[15]&255)<<20|(T[16]&254)<<12|(T[17]&255)<<5|(T[18]&254)>>>3,O.dts*=4,O.dts+=(T[18]&6)>>>1)),O.data=T.subarray(9+T[8])},_=function(T,O,L){var F=new Uint8Array(T.size),G={type:O},fe=0,ve=0,Se=!1,Q;if(!(!T.data.length||T.size<9)){for(G.trackId=T.data[0].pid,fe=0;fe<T.data.length;fe++)Q=T.data[fe],F.set(Q.data,ve),ve+=Q.data.byteLength;C(F,G),Se=O==="video"||G.packetLength<=T.size,(L||Se)&&(T.size=0,T.data.length=0),Se&&p.trigger("data",G)}};aa.prototype.init.call(this),this.push=function(k){({pat:function(){},pes:function(){var O,L;switch(k.streamType){case oe.H264_STREAM_TYPE:case oe.H264_STREAM_TYPE:O=m,L="video";break;case oe.ADTS_STREAM_TYPE:O=v,L="audio";break;case oe.METADATA_STREAM_TYPE:O=y,L="timed-metadata";break;default:return}k.payloadUnitStartIndicator&&_(O,L,!0),O.data.push(k),O.size+=k.data.byteLength},pmt:function(){var O={type:"metadata",tracks:[]},L=k.programMapTable;L.video!==null&&O.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+L.video,codec:"avc",type:"video"}),L.audio!==null&&O.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+L.audio,codec:"adts",type:"audio"}),p.trigger("data",O)}})[k.type]()},this.flush=function(){_(m,"video"),_(v,"audio"),_(y,"timed-metadata"),this.trigger("done")}},aa.prototype=new q;var Mf={PAT_PID:0,MP2T_PACKET_LENGTH:Hn,TransportPacketStream:dn,TransportParseStream:zi,ElementaryStream:aa,TimestampRolloverStream:qt,CaptionStream:ge.CaptionStream,Cea608Stream:ge.Cea608Stream,MetadataStream:vt};for(var Xo in oe)oe.hasOwnProperty(Xo)&&(Mf[Xo]=oe[Xo]);var Zt=Mf,oa,Uf=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];oa=function(){var p;oa.prototype.init.call(this),this.push=function(m){var v=0,y=0,C,_,k,T,O,L;if(m.type==="audio")for(p?(T=p,p=new Uint8Array(T.byteLength+m.data.byteLength),p.set(T),p.set(m.data,T.byteLength)):p=m.data;v+5<p.length;){if(p[v]!==255||(p[v+1]&246)!==240){v++;continue}if(_=(~p[v+1]&1)*2,C=(p[v+3]&3)<<11|p[v+4]<<3|(p[v+5]&224)>>5,O=((p[v+6]&3)+1)*1024,L=O*9e4/Uf[(p[v+2]&60)>>>2],k=v+C,p.byteLength<k)return;if(this.trigger("data",{pts:m.pts+y*L,dts:m.dts+y*L,sampleCount:O,audioobjecttype:(p[v+2]>>>6&3)+1,channelcount:(p[v+2]&1)<<2|(p[v+3]&192)>>>6,samplerate:Uf[(p[v+2]&60)>>>2],samplingfrequencyindex:(p[v+2]&60)>>>2,samplesize:16,data:p.subarray(v+7+_,k)}),p.byteLength===k){p=void 0;return}y++,p=p.subarray(k)}},this.flush=function(){this.trigger("done")}},oa.prototype=new q;var Ff=oa,Bf;Bf=function(p){var m=p.byteLength,v=0,y=0;this.length=function(){return 8*m},this.bitsAvailable=function(){return 8*m+y},this.loadWord=function(){var C=p.byteLength-m,_=new Uint8Array(4),k=Math.min(4,m);if(k===0)throw new Error("no bytes available");_.set(p.subarray(C,C+k)),v=new DataView(_.buffer).getUint32(0),y=k*8,m-=k},this.skipBits=function(C){var _;y>C?(v<<=C,y-=C):(C-=y,_=Math.floor(C/8),C-=_*8,m-=_,this.loadWord(),v<<=C,y-=C)},this.readBits=function(C){var _=Math.min(y,C),k=v>>>32-_;return y-=_,y>0?v<<=_:m>0&&this.loadWord(),_=C-_,_>0?k<<_|this.readBits(_):k},this.skipLeadingZeros=function(){var C;for(C=0;C<y;++C)if(v&2147483648>>>C)return v<<=C,y-=C,C;return this.loadWord(),C+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var C=this.skipLeadingZeros();return this.readBits(C+1)-1},this.readExpGolomb=function(){var C=this.readUnsignedExpGolomb();return 1&C?1+C>>>1:-1*(C>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var By=Bf,ua,qi,$f;qi=function(){var p=0,m,v;qi.prototype.init.call(this),this.push=function(y){var C;for(v?(C=new Uint8Array(v.byteLength+y.data.byteLength),C.set(v),C.set(y.data,v.byteLength),v=C):v=y.data;p<v.byteLength-3;p++)if(v[p+2]===1){m=p+5;break}for(;m<v.byteLength;)switch(v[m]){case 0:if(v[m-1]!==0){m+=2;break}else if(v[m-2]!==0){m++;break}p+3!==m-2&&this.trigger("data",v.subarray(p+3,m-2));do m++;while(v[m]!==1&&m<v.length);p=m-2,m+=3;break;case 1:if(v[m-1]!==0||v[m-2]!==0){m+=3;break}this.trigger("data",v.subarray(p+3,m-2)),p=m-2,m+=3;break;default:m+=3;break}v=v.subarray(p),m-=p,p=0},this.flush=function(){v&&v.byteLength>3&&this.trigger("data",v.subarray(p+3)),v=null,p=0,this.trigger("done")}},qi.prototype=new q,$f={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ua=function(){var p=new qi,m,v,y,C,_,k,T;ua.prototype.init.call(this),m=this,this.push=function(O){O.type==="video"&&(v=O.trackId,y=O.pts,C=O.dts,p.push(O))},p.on("data",function(O){var L={trackId:v,pts:y,dts:C,data:O};switch(O[0]&31){case 5:L.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:L.nalUnitType="sei_rbsp",L.escapedRBSP=_(O.subarray(1));break;case 7:L.nalUnitType="seq_parameter_set_rbsp",L.escapedRBSP=_(O.subarray(1)),L.config=k(L.escapedRBSP);break;case 8:L.nalUnitType="pic_parameter_set_rbsp";break;case 9:L.nalUnitType="access_unit_delimiter_rbsp";break}m.trigger("data",L)}),p.on("done",function(){m.trigger("done")}),this.flush=function(){p.flush()},T=function(L,F){var G=8,fe=8,ve,Se;for(ve=0;ve<L;ve++)fe!==0&&(Se=F.readExpGolomb(),fe=(G+Se+256)%256),G=fe===0?G:fe},_=function(L){for(var F=L.byteLength,G=[],fe=1,ve,Se;fe<F-2;)L[fe]===0&&L[fe+1]===0&&L[fe+2]===3?(G.push(fe+2),fe+=2):fe++;if(G.length===0)return L;ve=F-G.length,Se=new Uint8Array(ve);var Q=0;for(fe=0;fe<ve;Q++,fe++)Q===G[0]&&(Q++,G.shift()),Se[fe]=L[Q];return Se},k=function(L){var F=0,G=0,fe=0,ve=0,Se=1,Q,_r,br,cr,Xi,au,Kf,Yf,Jf,ou,Qf,Ze,Zf,hn;if(Q=new By(L),_r=Q.readUnsignedByte(),cr=Q.readUnsignedByte(),br=Q.readUnsignedByte(),Q.skipUnsignedExpGolomb(),$f[_r]&&(Xi=Q.readUnsignedExpGolomb(),Xi===3&&Q.skipBits(1),Q.skipUnsignedExpGolomb(),Q.skipUnsignedExpGolomb(),Q.skipBits(1),Q.readBoolean()))for(Qf=Xi!==3?8:12,hn=0;hn<Qf;hn++)Q.readBoolean()&&(hn<6?T(16,Q):T(64,Q));if(Q.skipUnsignedExpGolomb(),au=Q.readUnsignedExpGolomb(),au===0)Q.readUnsignedExpGolomb();else if(au===1)for(Q.skipBits(1),Q.skipExpGolomb(),Q.skipExpGolomb(),Kf=Q.readUnsignedExpGolomb(),hn=0;hn<Kf;hn++)Q.skipExpGolomb();if(Q.skipUnsignedExpGolomb(),Q.skipBits(1),Yf=Q.readUnsignedExpGolomb(),Jf=Q.readUnsignedExpGolomb(),ou=Q.readBits(1),ou===0&&Q.skipBits(1),Q.skipBits(1),Q.readBoolean()&&(F=Q.readUnsignedExpGolomb(),G=Q.readUnsignedExpGolomb(),fe=Q.readUnsignedExpGolomb(),ve=Q.readUnsignedExpGolomb()),Q.readBoolean()&&Q.readBoolean()){switch(Zf=Q.readUnsignedByte(),Zf){case 1:Ze=[1,1];break;case 2:Ze=[12,11];break;case 3:Ze=[10,11];break;case 4:Ze=[16,11];break;case 5:Ze=[40,33];break;case 6:Ze=[24,11];break;case 7:Ze=[20,11];break;case 8:Ze=[32,11];break;case 9:Ze=[80,33];break;case 10:Ze=[18,11];break;case 11:Ze=[15,11];break;case 12:Ze=[64,33];break;case 13:Ze=[160,99];break;case 14:Ze=[4,3];break;case 15:Ze=[3,2];break;case 16:Ze=[2,1];break;case 255:{Ze=[Q.readUnsignedByte()<<8|Q.readUnsignedByte(),Q.readUnsignedByte()<<8|Q.readUnsignedByte()];break}}Ze&&(Se=Ze[0]/Ze[1])}return{profileIdc:_r,levelIdc:br,profileCompatibility:cr,width:Math.ceil(((Yf+1)*16-F*2-G*2)*Se),height:(2-ou)*(Jf+1)*16-fe*2-ve*2}}},ua.prototype=new q;var $y={H264Stream:ua,NalByteStream:qi},la;la=function(){var p=new Uint8Array,m=0;la.prototype.init.call(this),this.setTimestamp=function(v){m=v},this.parseId3TagSize=function(v,y){var C=v[y+6]<<21|v[y+7]<<14|v[y+8]<<7|v[y+9],_=v[y+5],k=(_&16)>>4;return k?C+20:C+10},this.parseAdtsSize=function(v,y){var C=(v[y+5]&224)>>5,_=v[y+4]<<3,k=v[y+3]&6144;return k|_|C},this.push=function(v){var y=0,C=0,_,k,T,O;for(p.length?(O=p.length,p=new Uint8Array(v.byteLength+O),p.set(p.subarray(0,O)),p.set(v,O)):p=v;p.length-C>=3;){if(p[C]==="I".charCodeAt(0)&&p[C+1]==="D".charCodeAt(0)&&p[C+2]==="3".charCodeAt(0)){if(p.length-C<10||(y=this.parseId3TagSize(p,C),y>p.length))break;k={type:"timed-metadata",data:p.subarray(C,C+y)},this.trigger("data",k),C+=y;continue}else if(p[C]&!0&&(p[C+1]&240)===240){if(p.length-C<7||(y=this.parseAdtsSize(p,C),y>p.length))break;T={type:"audio",data:p.subarray(C,C+y),pts:m,dts:m},this.trigger("data",T),C+=y;continue}C++}_=p.length-C,_>0?p=p.subarray(C):p=new Uint8Array}},la.prototype=new q;var jy=la,Fr=[33,16,5,32,164,27],Ko=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Me=function(p){for(var m=[];p--;)m.push(0);return m},Hy=function(p){return Object.keys(p).reduce(function(m,v){return m[v]=new Uint8Array(p[v].reduce(function(y,C){return y.concat(C)},[])),m},{})},Vy={96e3:[Fr,[227,64],Me(154),[56]],88200:[Fr,[231],Me(170),[56]],64e3:[Fr,[248,192],Me(240),[56]],48e3:[Fr,[255,192],Me(268),[55,148,128],Me(54),[112]],44100:[Fr,[255,192],Me(268),[55,163,128],Me(84),[112]],32e3:[Fr,[255,192],Me(268),[55,234],Me(226),[112]],24e3:[Fr,[255,192],Me(268),[55,255,128],Me(268),[111,112],Me(126),[224]],16e3:[Fr,[255,192],Me(268),[55,255,128],Me(268),[111,255],Me(269),[223,108],Me(195),[1,192]],12e3:[Ko,Me(268),[3,127,248],Me(268),[6,255,240],Me(268),[13,255,224],Me(268),[27,253,128],Me(259),[56]],11025:[Ko,Me(268),[3,127,248],Me(268),[6,255,240],Me(268),[13,255,224],Me(268),[27,255,192],Me(268),[55,175,128],Me(108),[112]],8e3:[Ko,Me(268),[3,121,16],Me(47),[7]]},Wy=Hy(Vy),jf=9e4,Yo,Jo,Qo,Zo,Hf,Vf;Yo=function(p){return p*jf},Jo=function(p,m){return p*m},Qo=function(p){return p/jf},Zo=function(p,m){return p/m},Hf=function(p,m){return Yo(Zo(p,m))},Vf=function(p,m){return Jo(Qo(p),m)};var Wf={secondsToVideoTs:Yo,secondsToAudioTs:Jo,videoTsToSeconds:Qo,audioTsToSeconds:Zo,audioTsToVideoTs:Hf,videoTsToAudioTs:Vf},zy=$y.H264Stream,eu=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],tu=["width","height","profileIdc","levelIdc","profileCompatibility"],ru=9e4,Gi,Vn,ca,Wn,zf,qf,fa,zn,nu,iu,Gf;zf=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}},qf=function(p){return p[0]==="I".charCodeAt(0)&&p[1]==="D".charCodeAt(0)&&p[2]==="3".charCodeAt(0)},iu=function(p,m){var v;if(p.length!==m.length)return!1;for(v=0;v<p.length;v++)if(p[v]!==m[v])return!1;return!0},Gf=function(p){var m,v,y=0;for(m=0;m<p.length;m++)v=p[m],y+=v.data.byteLength;return y},Vn=function(p,m){var v=[],y=0,C=0,_=0,k=1/0;m=m||{},Vn.prototype.init.call(this),this.push=function(T){fa(p,T),p&&eu.forEach(function(O){p[O]=T[O]}),v.push(T)},this.setEarliestDts=function(T){C=T-p.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(T){k=T},this.setAudioAppendStart=function(T){_=T},this.flush=function(){var T,O,L,F;if(v.length===0){this.trigger("done","AudioSegmentStream");return}T=this.trimAdtsFramesByEarliestDts_(v),p.baseMediaDecodeTime=nu(p,m.keepOriginalTimestamps),this.prefixWithSilence_(p,T),p.samples=this.generateSampleTable_(T),L=M.mdat(this.concatenateFrameData_(T)),v=[],O=M.moof(y,[p]),F=new Uint8Array(O.byteLength+L.byteLength),y++,F.set(O),F.set(L,O.byteLength),zn(p),this.trigger("data",{track:p,boxes:F}),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(T,O){var L,F=0,G=0,fe=0,ve=0,Se,Q;if(O.length&&(L=Wf.audioTsToVideoTs(T.baseMediaDecodeTime,T.samplerate),F=Math.ceil(ru/(T.samplerate/1024)),_&&k&&(G=L-Math.max(_,k),fe=Math.floor(G/F),ve=fe*F),!(fe<1||ve>ru/2))){for(Se=Wy[T.samplerate],Se||(Se=O[0].data),Q=0;Q<fe;Q++)O.splice(Q,0,{data:Se});T.baseMediaDecodeTime-=Math.floor(Wf.videoTsToAudioTs(ve,T.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(T){return p.minSegmentDts>=C?T:(p.minSegmentDts=1/0,T.filter(function(O){return O.dts>=C?(p.minSegmentDts=Math.min(p.minSegmentDts,O.dts),p.minSegmentPts=p.minSegmentDts,!0):!1}))},this.generateSampleTable_=function(T){var O,L,F=[];for(O=0;O<T.length;O++)L=T[O],F.push({size:L.data.byteLength,duration:1024});return F},this.concatenateFrameData_=function(T){var O,L,F=0,G=new Uint8Array(Gf(T));for(O=0;O<T.length;O++)L=T[O],G.set(L.data,F),F+=L.data.byteLength;return G}},Vn.prototype=new q,Gi=function(p,m){var v=0,y=[],C=[],_,k;m=m||{},Gi.prototype.init.call(this),delete p.minPTS,this.gopCache_=[],this.push=function(T){fa(p,T),T.nalUnitType==="seq_parameter_set_rbsp"&&!_&&(_=T.config,p.sps=[T.data],tu.forEach(function(O){p[O]=_[O]},this)),T.nalUnitType==="pic_parameter_set_rbsp"&&!k&&(k=T.data,p.pps=[T.data]),y.push(T)},this.flush=function(){for(var T,O,L,F,G,fe;y.length&&y[0].nalUnitType!=="access_unit_delimiter_rbsp";)y.shift();if(y.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(T=this.groupNalsIntoFrames_(y),L=this.groupFramesIntoGops_(T),L[0][0].keyFrame||(O=this.getGopForFusion_(y[0],p),O?(L.unshift(O),L.byteLength+=O.byteLength,L.nalCount+=O.nalCount,L.pts=O.pts,L.dts=O.dts,L.duration+=O.duration):L=this.extendFirstKeyFrame_(L)),C.length){var ve;if(m.alignGopsAtEnd?ve=this.alignGopsAtEnd_(L):ve=this.alignGopsAtStart_(L),!ve){this.gopCache_.unshift({gop:L.pop(),pps:p.pps,sps:p.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),y=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}zn(p),L=ve}fa(p,L),p.samples=this.generateSampleTable_(L),G=M.mdat(this.concatenateNalData_(L)),p.baseMediaDecodeTime=nu(p,m.keepOriginalTimestamps),this.trigger("processedGopsInfo",L.map(function(Se){return{pts:Se.pts,dts:Se.dts,byteLength:Se.byteLength}})),this.gopCache_.unshift({gop:L.pop(),pps:p.pps,sps:p.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),y=[],this.trigger("baseMediaDecodeTime",p.baseMediaDecodeTime),this.trigger("timelineStartInfo",p.timelineStartInfo),F=M.moof(v,[p]),fe=new Uint8Array(F.byteLength+G.byteLength),v++,fe.set(F),fe.set(G,F.byteLength),this.trigger("data",{track:p,boxes:fe}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){zn(p),_=void 0,k=void 0},this.getGopForFusion_=function(T){var O=45e3,L=1e4,F=1/0,G,fe,ve,Se,Q;for(Q=0;Q<this.gopCache_.length;Q++)Se=this.gopCache_[Q],ve=Se.gop,!(!(p.pps&&iu(p.pps[0],Se.pps[0]))||!(p.sps&&iu(p.sps[0],Se.sps[0])))&&(ve.dts<p.timelineStartInfo.dts||(G=T.dts-ve.dts-ve.duration,G>=-L&&G<=O&&(!fe||F>G)&&(fe=Se,F=G)));return fe?fe.gop:null},this.extendFirstKeyFrame_=function(T){var O;return!T[0][0].keyFrame&&T.length>1&&(O=T.shift(),T.byteLength-=O.byteLength,T.nalCount-=O.nalCount,T[0][0].dts=O.dts,T[0][0].pts=O.pts,T[0][0].duration+=O.duration),T},this.groupNalsIntoFrames_=function(T){var O,L,F=[],G=[];for(F.byteLength=0,O=0;O<T.length;O++)L=T[O],L.nalUnitType==="access_unit_delimiter_rbsp"?(F.length&&(F.duration=L.dts-F.dts,G.push(F)),F=[L],F.byteLength=L.data.byteLength,F.pts=L.pts,F.dts=L.dts):(L.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(F.keyFrame=!0),F.duration=L.dts-F.dts,F.byteLength+=L.data.byteLength,F.push(L));return G.length&&(!F.duration||F.duration<=0)&&(F.duration=G[G.length-1].duration),G.push(F),G},this.groupFramesIntoGops_=function(T){var O,L,F=[],G=[];for(F.byteLength=0,F.nalCount=0,F.duration=0,F.pts=T[0].pts,F.dts=T[0].dts,G.byteLength=0,G.nalCount=0,G.duration=0,G.pts=T[0].pts,G.dts=T[0].dts,O=0;O<T.length;O++)L=T[O],L.keyFrame?(F.length&&(G.push(F),G.byteLength+=F.byteLength,G.nalCount+=F.nalCount,G.duration+=F.duration),F=[L],F.nalCount=L.length,F.byteLength=L.byteLength,F.pts=L.pts,F.dts=L.dts,F.duration=L.duration):(F.duration+=L.duration,F.nalCount+=L.length,F.byteLength+=L.byteLength,F.push(L));return G.length&&F.duration<=0&&(F.duration=G[G.length-1].duration),G.byteLength+=F.byteLength,G.nalCount+=F.nalCount,G.duration+=F.duration,G.push(F),G},this.generateSampleTable_=function(T,O){var L,F,G,fe,ve,Se=O||0,Q=[];for(L=0;L<T.length;L++)for(fe=T[L],F=0;F<fe.length;F++)ve=fe[F],G=zf(),G.dataOffset=Se,G.compositionTimeOffset=ve.pts-ve.dts,G.duration=ve.duration,G.size=4*ve.length,G.size+=ve.byteLength,ve.keyFrame&&(G.flags.dependsOn=2),Se+=G.size,Q.push(G);return Q},this.concatenateNalData_=function(T){var O,L,F,G,fe,ve,Se=0,Q=T.byteLength,_r=T.nalCount,br=Q+4*_r,cr=new Uint8Array(br),Xi=new DataView(cr.buffer);for(O=0;O<T.length;O++)for(G=T[O],L=0;L<G.length;L++)for(fe=G[L],F=0;F<fe.length;F++)ve=fe[F],Xi.setUint32(Se,ve.data.byteLength),Se+=4,cr.set(ve.data,Se),Se+=ve.data.byteLength;return cr},this.alignGopsAtStart_=function(T){var O,L,F,G,fe,ve,Se,Q;for(fe=T.byteLength,ve=T.nalCount,Se=T.duration,O=L=0;O<C.length&&L<T.length&&(F=C[O],G=T[L],F.pts!==G.pts);){if(G.pts>F.pts){O++;continue}L++,fe-=G.byteLength,ve-=G.nalCount,Se-=G.duration}return L===0?T:L===T.length?null:(Q=T.slice(L),Q.byteLength=fe,Q.duration=Se,Q.nalCount=ve,Q.pts=Q[0].pts,Q.dts=Q[0].dts,Q)},this.alignGopsAtEnd_=function(T){var O,L,F,G,fe,ve;for(O=C.length-1,L=T.length-1,fe=null,ve=!1;O>=0&&L>=0;){if(F=C[O],G=T[L],F.pts===G.pts){ve=!0;break}if(F.pts>G.pts){O--;continue}O===C.length-1&&(fe=L),L--}if(!ve&&fe===null)return null;var Se;if(ve?Se=L:Se=fe,Se===0)return T;var Q=T.slice(Se),_r=Q.reduce(function(br,cr){return br.byteLength+=cr.byteLength,br.duration+=cr.duration,br.nalCount+=cr.nalCount,br},{byteLength:0,duration:0,nalCount:0});return Q.byteLength=_r.byteLength,Q.duration=_r.duration,Q.nalCount=_r.nalCount,Q.pts=Q[0].pts,Q.dts=Q[0].dts,Q},this.alignGopsWith=function(T){C=T}},Gi.prototype=new q,fa=function(p,m){typeof m.pts=="number"&&(p.timelineStartInfo.pts===void 0&&(p.timelineStartInfo.pts=m.pts),p.minSegmentPts===void 0?p.minSegmentPts=m.pts:p.minSegmentPts=Math.min(p.minSegmentPts,m.pts),p.maxSegmentPts===void 0?p.maxSegmentPts=m.pts:p.maxSegmentPts=Math.max(p.maxSegmentPts,m.pts)),typeof m.dts=="number"&&(p.timelineStartInfo.dts===void 0&&(p.timelineStartInfo.dts=m.dts),p.minSegmentDts===void 0?p.minSegmentDts=m.dts:p.minSegmentDts=Math.min(p.minSegmentDts,m.dts),p.maxSegmentDts===void 0?p.maxSegmentDts=m.dts:p.maxSegmentDts=Math.max(p.maxSegmentDts,m.dts))},zn=function(p){delete p.minSegmentDts,delete p.maxSegmentDts,delete p.minSegmentPts,delete p.maxSegmentPts},nu=function(p,m){var v,y,C=p.minSegmentDts;return m||(C-=p.timelineStartInfo.dts),v=p.timelineStartInfo.baseMediaDecodeTime,v+=C,v=Math.max(0,v),p.type==="audio"&&(y=p.samplerate/ru,v*=y,v=Math.floor(v)),v},Wn=function(p,m){this.numberOfTracks=0,this.metadataStream=m,typeof p.remux<"u"?this.remuxTracks=!!p.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Wn.prototype.init.call(this),this.push=function(v){if(v.text)return this.pendingCaptions.push(v);if(v.frames)return this.pendingMetadata.push(v);this.pendingTracks.push(v.track),this.pendingBoxes.push(v.boxes),this.pendingBytes+=v.boxes.byteLength,v.track.type==="video"&&(this.videoTrack=v.track),v.track.type==="audio"&&(this.audioTrack=v.track)}},Wn.prototype=new q,Wn.prototype.flush=function(A){var p=0,m={captions:[],captionStreams:{},metadata:[],info:{}},v,y,C,_=0,k;if(this.pendingTracks.length<this.numberOfTracks){if(A!=="VideoSegmentStream"&&A!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}for(this.videoTrack?(_=this.videoTrack.timelineStartInfo.pts,tu.forEach(function(T){m.info[T]=this.videoTrack[T]},this)):this.audioTrack&&(_=this.audioTrack.timelineStartInfo.pts,eu.forEach(function(T){m.info[T]=this.audioTrack[T]},this)),this.pendingTracks.length===1?m.type=this.pendingTracks[0].type:m.type="combined",this.emittedTracks+=this.pendingTracks.length,C=M.initSegment(this.pendingTracks),m.initSegment=new Uint8Array(C.byteLength),m.initSegment.set(C),m.data=new Uint8Array(this.pendingBytes),k=0;k<this.pendingBoxes.length;k++)m.data.set(this.pendingBoxes[k],p),p+=this.pendingBoxes[k].byteLength;for(k=0;k<this.pendingCaptions.length;k++)v=this.pendingCaptions[k],v.startTime=v.startPts-_,v.startTime/=9e4,v.endTime=v.endPts-_,v.endTime/=9e4,m.captionStreams[v.stream]=!0,m.captions.push(v);for(k=0;k<this.pendingMetadata.length;k++)y=this.pendingMetadata[k],y.cueTime=y.pts-_,y.cueTime/=9e4,m.metadata.push(y);m.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",m),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ca=function(p){var m=this,v=!0,y,C;ca.prototype.init.call(this),p=p||{},this.baseMediaDecodeTime=p.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var _={};this.transmuxPipeline_=_,_.type="aac",_.metadataStream=new Zt.MetadataStream,_.aacStream=new jy,_.audioTimestampRolloverStream=new Zt.TimestampRolloverStream("audio"),_.timedMetadataTimestampRolloverStream=new Zt.TimestampRolloverStream("timed-metadata"),_.adtsStream=new Ff,_.coalesceStream=new Wn(p,_.metadataStream),_.headOfPipeline=_.aacStream,_.aacStream.pipe(_.audioTimestampRolloverStream).pipe(_.adtsStream),_.aacStream.pipe(_.timedMetadataTimestampRolloverStream).pipe(_.metadataStream).pipe(_.coalesceStream),_.metadataStream.on("timestamp",function(k){_.aacStream.setTimestamp(k.timeStamp)}),_.aacStream.on("data",function(k){k.type==="timed-metadata"&&!_.audioSegmentStream&&(C=C||{timelineStartInfo:{baseMediaDecodeTime:m.baseMediaDecodeTime},codec:"adts",type:"audio"},_.coalesceStream.numberOfTracks++,_.audioSegmentStream=new Vn(C,p),_.adtsStream.pipe(_.audioSegmentStream).pipe(_.coalesceStream))}),_.coalesceStream.on("data",this.trigger.bind(this,"data")),_.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var _={};this.transmuxPipeline_=_,_.type="ts",_.metadataStream=new Zt.MetadataStream,_.packetStream=new Zt.TransportPacketStream,_.parseStream=new Zt.TransportParseStream,_.elementaryStream=new Zt.ElementaryStream,_.videoTimestampRolloverStream=new Zt.TimestampRolloverStream("video"),_.audioTimestampRolloverStream=new Zt.TimestampRolloverStream("audio"),_.timedMetadataTimestampRolloverStream=new Zt.TimestampRolloverStream("timed-metadata"),_.adtsStream=new Ff,_.h264Stream=new zy,_.captionStream=new Zt.CaptionStream,_.coalesceStream=new Wn(p,_.metadataStream),_.headOfPipeline=_.packetStream,_.packetStream.pipe(_.parseStream).pipe(_.elementaryStream),_.elementaryStream.pipe(_.videoTimestampRolloverStream).pipe(_.h264Stream),_.elementaryStream.pipe(_.audioTimestampRolloverStream).pipe(_.adtsStream),_.elementaryStream.pipe(_.timedMetadataTimestampRolloverStream).pipe(_.metadataStream).pipe(_.coalesceStream),_.h264Stream.pipe(_.captionStream).pipe(_.coalesceStream),_.elementaryStream.on("data",function(k){var T;if(k.type==="metadata"){for(T=k.tracks.length;T--;)!y&&k.tracks[T].type==="video"?(y=k.tracks[T],y.timelineStartInfo.baseMediaDecodeTime=m.baseMediaDecodeTime):!C&&k.tracks[T].type==="audio"&&(C=k.tracks[T],C.timelineStartInfo.baseMediaDecodeTime=m.baseMediaDecodeTime);y&&!_.videoSegmentStream&&(_.coalesceStream.numberOfTracks++,_.videoSegmentStream=new Gi(y,p),_.videoSegmentStream.on("timelineStartInfo",function(O){C&&(C.timelineStartInfo=O,_.audioSegmentStream.setEarliestDts(O.dts))}),_.videoSegmentStream.on("processedGopsInfo",m.trigger.bind(m,"gopInfo")),_.videoSegmentStream.on("baseMediaDecodeTime",function(O){C&&_.audioSegmentStream.setVideoBaseMediaDecodeTime(O)}),_.h264Stream.pipe(_.videoSegmentStream).pipe(_.coalesceStream)),C&&!_.audioSegmentStream&&(_.coalesceStream.numberOfTracks++,_.audioSegmentStream=new Vn(C,p),_.adtsStream.pipe(_.audioSegmentStream).pipe(_.coalesceStream))}}),_.coalesceStream.on("data",this.trigger.bind(this,"data")),_.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(_){var k=this.transmuxPipeline_;this.baseMediaDecodeTime=_,C&&(C.timelineStartInfo.dts=void 0,C.timelineStartInfo.pts=void 0,zn(C),C.timelineStartInfo.baseMediaDecodeTime=_,k.audioTimestampRolloverStream&&k.audioTimestampRolloverStream.discontinuity()),y&&(k.videoSegmentStream&&(k.videoSegmentStream.gopCache_=[],k.videoTimestampRolloverStream.discontinuity()),y.timelineStartInfo.dts=void 0,y.timelineStartInfo.pts=void 0,zn(y),k.captionStream.reset(),y.timelineStartInfo.baseMediaDecodeTime=_),k.timedMetadataTimestampRolloverStream&&k.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(_){C&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(_)},this.alignGopsWith=function(_){y&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(_)},this.push=function(_){if(v){var k=qf(_);k&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!k&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),v=!1}this.transmuxPipeline_.headOfPipeline.push(_)},this.flush=function(){v=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},ca.prototype=new q;var su={Transmuxer:ca,VideoSegmentStream:Gi,AudioSegmentStream:Vn,AUDIO_PROPERTIES:eu,VIDEO_PROPERTIES:tu},qy={generator:M,Transmuxer:su.Transmuxer,AudioSegmentStream:su.AudioSegmentStream,VideoSegmentStream:su.VideoSegmentStream},Gy=function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")},Xy=function(){function A(p,m){for(var v=0;v<m.length;v++){var y=m[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(p,y.key,y)}}return function(p,m,v){return m&&A(p.prototype,m),v&&A(p,v),p}}(),Ky=function(p){p.on("data",function(m){var v=m.initSegment;m.initSegment={data:v.buffer,byteOffset:v.byteOffset,byteLength:v.byteLength};var y=m.data;m.data=y.buffer,s.postMessage({action:"data",segment:m,byteOffset:y.byteOffset,byteLength:y.byteLength},[m.data])}),p.captionStream&&p.captionStream.on("data",function(m){s.postMessage({action:"caption",data:m})}),p.on("done",function(m){s.postMessage({action:"done"})}),p.on("gopInfo",function(m){s.postMessage({action:"gopInfo",gopInfo:m})})},Xf=function(){function A(p){Gy(this,A),this.options=p||{},this.init()}return Xy(A,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new qy.Transmuxer(this.options),Ky(this.transmuxer)}},{key:"push",value:function(m){var v=new Uint8Array(m.data,m.byteOffset,m.byteLength);this.transmuxer.push(v)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(m){var v=m.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(v*9e4))}},{key:"setAudioAppendStart",value:function(m){this.transmuxer.setAudioAppendStart(Math.ceil(m.appendStart*9e4))}},{key:"flush",value:function(m){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(m){this.transmuxer.alignGopsWith(m.gopsToAlignWith.slice())}}]),A}(),Yy=function(p){p.onmessage=function(m){if(m.data.action==="init"&&m.data.options){this.messageHandlers=new Xf(m.data.options);return}this.messageHandlers||(this.messageHandlers=new Xf),m.data&&m.data.action&&m.data.action!=="init"&&this.messageHandlers[m.data.action]&&this.messageHandlers[m.data.action](m.data)}},Jy=new Yy(n);return Jy})()}),Iy=function(e){return/mp4a\.\d+.\d+/i.test(e)},ky=function(e){return/avc1\.[\da-f]+/i.test(e)},iO=function(e){var n={type:"",parameters:{}},r=e.trim().split(";");return n.type=r.shift().trim(),r.forEach(function(i){var s=i.trim().split("=");if(s.length>1){var a=s[0].replace(/"/g,"").trim(),o=s[1].replace(/"/g,"").trim();n.parameters[a]=o}}),n},Py=function(e){return e.map(function(n){return n.replace(/avc1\.(\d+)\.(\d+)/i,function(r,i,s){var a=("00"+Number(i).toString(16)).slice(-2),o=("00"+Number(s).toString(16)).slice(-2);return"avc1."+a+"00"+o})})},sO=function(e,n){var r=e.addSourceBuffer(n),i=Object.create(null);i.updating=!1,i.realBuffer_=r;var s=function(u){typeof r[u]=="function"?i[u]=function(){return r[u].apply(r,arguments)}:typeof i[u]>"u"&&Object.defineProperty(i,u,{get:function(){return r[u]},set:function(c){return r[u]=c}})};for(var a in r)s(a);return i},aO=function(e,n,r){if(!n||!e.length)return[];var i=Math.ceil((n.currentTime()-r+3)*9e4),s=void 0;for(s=0;s<e.length&&!(e[s].pts>i);s++);return e.slice(s)},oO=function(e,n,r){if(!n.length)return e;if(r)return n.slice();var i=n[0].pts,s=0;for(s;s<e.length&&!(e[s].pts>=i);s++);return e.slice(0,s).concat(n)},uO=function(e,n,r,i){for(var s=Math.ceil((n-i)*9e4),a=Math.ceil((r-i)*9e4),o=e.slice(),u=e.length;u--&&!(e[u].pts<=a););if(u===-1)return o;for(var l=u+1;l--&&!(e[l].pts<=s););return l=Math.max(l,0),o.splice(l,u-l+1),o},lO=function(t){ae(e,t);function e(n,r){te(this,e);var i=ne(this,t.call(this,I.EventTarget));i.timestampOffset_=0,i.pendingBuffers_=[],i.bufferUpdating_=!1,i.mediaSource_=n,i.codecs_=r,i.audioCodec_=null,i.videoCodec_=null,i.audioDisabled_=!1,i.appendAudioInitSegment_=!0,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=I.browser.IE_VERSION>=11;var s={remux:!1,alignGopsAtEnd:i.safeAppend_};return i.codecs_.forEach(function(a){Iy(a)?i.audioCodec_=a:ky(a)&&(i.videoCodec_=a)}),i.transmuxer_=new nO,i.transmuxer_.postMessage({action:"init",options:s}),i.transmuxer_.onmessage=function(a){if(a.data.action==="data")return i.data_(a);if(a.data.action==="done")return i.done_(a);if(a.data.action==="gopInfo")return i.appendGopInfo_(a)},Object.defineProperty(i,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(o){typeof o=="number"&&o>=0&&(this.timestampOffset_=o,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:o}))}}),Object.defineProperty(i,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(o){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=o),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=o)}}),Object.defineProperty(i,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(i,"buffered",{get:function(){var o=null,u=null,l=0,c=[],f=[];if(!this.videoBuffer_&&!this.audioBuffer_)return I.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(this.videoBuffer_.buffered.length===0&&this.audioBuffer_.buffered.length===0)return I.createTimeRange();for(var d=this.videoBuffer_.buffered,h=this.audioBuffer_.buffered,g=d.length;g--;)c.push({time:d.start(g),type:"start"}),c.push({time:d.end(g),type:"end"});for(g=h.length;g--;)c.push({time:h.start(g),type:"start"}),c.push({time:h.end(g),type:"end"});for(c.sort(function(E,S){return E.time-S.time}),g=0;g<c.length;g++)c[g].type==="start"?(l++,l===2&&(o=c[g].time)):c[g].type==="end"&&(l--,l===1&&(u=c[g].time)),o!==null&&u!==null&&(f.push([o,u]),o=null,u=null);return I.createTimeRanges(f)}}),i}return e.prototype.data_=function(r){var i=r.data.segment;i.data=new Uint8Array(i.data,r.data.byteOffset,r.data.byteLength),i.initSegment=new Uint8Array(i.initSegment.data,i.initSegment.byteOffset,i.initSegment.byteLength),JP(this,this.mediaSource_,i),this.pendingBuffers_.push(i)},e.prototype.done_=function(r){if(this.mediaSource_.readyState==="closed"){this.pendingBuffers_.length=0;return}this.processPendingSegments_()},e.prototype.createRealSourceBuffers_=function(){var r=this,i=["audio","video"];i.forEach(function(s){if(r[s+"Codec_"]&&!r[s+"Buffer_"]){var a=null;if(r.mediaSource_[s+"Buffer_"])a=r.mediaSource_[s+"Buffer_"],a.updating=!1;else{var o=s+"Codec_",u=s+'/mp4;codecs="'+r[o]+'"';a=sO(r.mediaSource_.nativeMediaSource_,u),r.mediaSource_[s+"Buffer_"]=a}r[s+"Buffer_"]=a,["update","updatestart","updateend"].forEach(function(l){a.addEventListener(l,function(){if(!(s==="audio"&&r.audioDisabled_)){l==="updateend"&&(r[s+"Buffer_"].updating=!1);var c=i.every(function(f){return f==="audio"&&r.audioDisabled_?!0:!(s!==f&&r[f+"Buffer_"]&&r[f+"Buffer_"].updating)});if(c)return r.trigger(l)}})})}})},e.prototype.appendBuffer=function(r){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var i=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:i.end(i.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:aO(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength},[r.buffer]),this.transmuxer_.postMessage({action:"flush"})},e.prototype.appendGopInfo_=function(r){this.gopBuffer_=oO(this.gopBuffer_,r.data.gopInfo,this.safeAppend_)},e.prototype.remove=function(r,i){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(r,i),this.gopBuffer_=uO(this.gopBuffer_,r,i,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(r,i)),Bs(r,i,this.metadataTrack_),this.inbandTextTracks_)for(var s in this.inbandTextTracks_)Bs(r,i,this.inbandTextTracks_[s])},e.prototype.processPendingSegments_=function(){var r={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};r=this.pendingBuffers_.reduce(function(s,a){var o=a.type,u=a.data,l=a.initSegment;return s[o].segments.push(u),s[o].bytes+=u.byteLength,s[o].initSegment=l,a.captions&&(s.captions=s.captions.concat(a.captions)),a.info&&(s[o].info=a.info),a.metadata&&(s.metadata=s.metadata.concat(a.metadata)),s},r),!this.videoBuffer_&&!this.audioBuffer_&&(r.video.bytes===0&&(this.videoCodec_=null),r.audio.bytes===0&&(this.audioCodec_=null),this.createRealSourceBuffers_()),r.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:r.audio.info}),r.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:r.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(r.audio.segments.unshift(r.audio.initSegment),r.audio.bytes+=r.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var i=!1;this.videoBuffer_&&r.video.bytes?(r.video.segments.unshift(r.video.initSegment),r.video.bytes+=r.video.initSegment.byteLength,this.concatAndAppendSegments_(r.video,this.videoBuffer_),ZP(this,r.captions,r.metadata)):this.videoBuffer_&&(this.audioDisabled_||!this.audioBuffer_)&&(i=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(r.audio,this.audioBuffer_),this.pendingBuffers_.length=0,i&&this.trigger("updateend"),this.bufferUpdating_=!1},e.prototype.concatAndAppendSegments_=function(r,i){var s=0,a=void 0;if(r.bytes){a=new Uint8Array(r.bytes),r.segments.forEach(function(o){a.set(o,s),s+=o.byteLength});try{i.updating=!0,i.appendBuffer(a)}catch(o){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:o.message,originalError:o})}}},e.prototype.abort=function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1},e}(I.EventTarget),Bl=function(t){ae(e,t);function e(){te(this,e);var n=ne(this,t.call(this)),r=void 0;n.nativeMediaSource_=new R.MediaSource;for(r in n.nativeMediaSource_)!(r in e.prototype)&&typeof n.nativeMediaSource_[r]=="function"&&(n[r]=n.nativeMediaSource_[r].bind(n.nativeMediaSource_));return n.duration_=NaN,Object.defineProperty(n,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(s){if(this.duration_=s,s!==1/0){this.nativeMediaSource_.duration=s;return}}}),Object.defineProperty(n,"seekable",{get:function(){return this.duration_===1/0?I.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(n,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(n,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),n.sourceBuffers=[],n.activeSourceBuffers_=[],n.updateActiveSourceBuffers_=function(){if(n.activeSourceBuffers_.length=0,n.sourceBuffers.length===1){var i=n.sourceBuffers[0];i.appendAudioInitSegment_=!0,i.audioDisabled_=!i.audioCodec_,n.activeSourceBuffers_.push(i);return}for(var s=!1,a=!0,o=0;o<n.player_.audioTracks().length;o++){var u=n.player_.audioTracks()[o];if(u.enabled&&u.kind!=="main"){s=!0,a=!1;break}}n.sourceBuffers.forEach(function(l,c){if(l.appendAudioInitSegment_=!0,l.videoCodec_&&l.audioCodec_)l.audioDisabled_=s;else if(l.videoCodec_&&!l.audioCodec_)l.audioDisabled_=!0,a=!1;else if(!l.videoCodec_&&l.audioCodec_&&(l.audioDisabled_=c?a:!a,l.audioDisabled_))return;n.activeSourceBuffers_.push(l)})},n.onPlayerMediachange_=function(){n.sourceBuffers.forEach(function(i){i.appendAudioInitSegment_=!0})},n.onHlsReset_=function(){n.sourceBuffers.forEach(function(i){i.transmuxer_&&i.transmuxer_.postMessage({action:"resetCaptions"})})},n.onHlsSegmentTimeMapping_=function(i){n.sourceBuffers.forEach(function(s){return s.timeMapping_=i.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(i){this.nativeMediaSource_.addEventListener(i,this.trigger.bind(this))},n),n.on("sourceopen",function(i){var s=ue.querySelector('[src="'+n.url_+'"]');s&&(n.player_=I(s.parentNode),n.player_.tech_.on("hls-reset",n.onHlsReset_),n.player_.tech_.on("hls-segment-time-mapping",n.onHlsSegmentTimeMapping_),n.player_.audioTracks&&n.player_.audioTracks()&&(n.player_.audioTracks().on("change",n.updateActiveSourceBuffers_),n.player_.audioTracks().on("addtrack",n.updateActiveSourceBuffers_),n.player_.audioTracks().on("removetrack",n.updateActiveSourceBuffers_)),n.player_.on("mediachange",n.onPlayerMediachange_))}),n.on("sourceended",function(i){for(var s=wy(n.duration),a=0;a<n.sourceBuffers.length;a++){var o=n.sourceBuffers[a],u=o.metadataTrack_&&o.metadataTrack_.cues;u&&u.length&&(u[u.length-1].endTime=s)}}),n.on("sourceclose",function(i){this.sourceBuffers.forEach(function(s){s.transmuxer_&&s.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),n}return e.prototype.addSeekableRange_=function(r,i){var s=void 0;if(this.duration!==1/0)throw s=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),s.name="InvalidStateError",s.code=11,s;(i>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=i)},e.prototype.addSourceBuffer=function(r){var i=void 0,s=iO(r);if(/^(video|audio)\/mp2t$/i.test(s.type)){var a=[];s.parameters&&s.parameters.codecs&&(a=s.parameters.codecs.split(","),a=Py(a),a=a.filter(function(o){return Iy(o)||ky(o)})),a.length===0&&(a=["avc1.4d400d","mp4a.40.2"]),i=new lO(this,a),this.sourceBuffers.length!==0&&(this.sourceBuffers[0].createRealSourceBuffers_(),i.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else i=this.nativeMediaSource_.addSourceBuffer(r);return this.sourceBuffers.push(i),i},e}(I.EventTarget),Ap=0;I.mediaSources={};var Oy=function(e,n){var r=I.mediaSources[e];if(r)r.trigger({type:"sourceopen",swfId:n});else throw new Error("Media Source not found (Video.js)")},$l=function(){return!!R.MediaSource&&!!R.MediaSource.isTypeSupported&&R.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},ia=function(){if(this.MediaSource={open:Oy,supportsNativeMediaSources:$l},$l())return new Bl;throw new Error("Cannot use create a virtual MediaSource for this video")};ia.open=Oy;ia.supportsNativeMediaSources=$l;var Ry={createObjectURL:function(e){var n="blob:vjs-media-source/",r=void 0;return e instanceof Bl?(r=R.URL.createObjectURL(e.nativeMediaSource_),e.url_=r,r):e instanceof Bl?(r=n+Ap,Ap++,I.mediaSources[r]=e,r):(r=R.URL.createObjectURL(e),e.url_=r,r)}};I.MediaSource=ia;I.URL=Ry;var cO=I.EventTarget,fO=I.mergeOptions,Ip=function(e,n){for(var r=fO(e,{duration:n.duration,minimumUpdatePeriod:n.minimumUpdatePeriod}),i=0;i<n.playlists.length;i++){var s=Ul(r,n.playlists[i]);s&&(r=s)}return Pf(n,function(a,o,u,l){if(a.playlists&&a.playlists.length){var c=a.playlists[0].uri,f=Ul(r,a.playlists[0]);f&&(r=f,r.mediaGroups[o][u][l].playlists[0]=r.playlists[c])}}),r},jl=function(t){ae(e,t);function e(n,r,i,s){te(this,e);var a=ne(this,t.call(this));if(a.hls_=r,a.withCredentials=i,!n)throw new Error("A non-empty playlist URL or playlist is required");return a.on("minimumUpdatePeriod",function(){a.refreshXml_()}),a.on("mediaupdatetimeout",function(){a.refreshMedia_()}),typeof n=="string"?(a.srcUrl=n,a.state="HAVE_NOTHING",ne(a)):(a.masterPlaylistLoader_=s,a.state="HAVE_METADATA",a.started=!0,a.media(n),R.setTimeout(function(){a.trigger("loadedmetadata")},0),a)}return e.prototype.dispose=function(){this.stopRequest(),R.clearTimeout(this.mediaUpdateTimeout)},e.prototype.stopRequest=function(){if(this.request){var r=this.request;this.request=null,r.onreadystatechange=null,r.abort()}},e.prototype.media=function(r){if(!r)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if(typeof r=="string"){if(!this.master.playlists[r])throw new Error("Unknown playlist URI: "+r);r=this.master.playlists[r]}var s=!this.media_||r.uri!==this.media_.uri;this.state="HAVE_METADATA",s&&(this.media_&&this.trigger("mediachanging"),this.media_=r,this.refreshMedia_(),i!=="HAVE_MASTER"&&this.trigger("mediachange"))},e.prototype.pause=function(){this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1)},e.prototype.load=function(){if(!this.started){this.start();return}this.trigger("loadedplaylist")},e.prototype.parseMasterXml=function(){var r=Gh.parse(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});r.uri=this.srcUrl;for(var i=0;i<r.playlists.length;i++){var s="placeholder-uri-"+i;r.playlists[i].uri=s,r.playlists[s]=r.playlists[i]}return Pf(r,function(a,o,u,l){if(a.playlists&&a.playlists.length){var c="placeholder-uri-"+o+"-"+u+"-"+l;a.playlists[0].uri=c,r.playlists[c]=a.playlists[0]}}),cy(r),fy(r),r},e.prototype.start=function(){var r=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(i,s){if(r.request){if(r.request=null,i)return r.error={status:s.status,message:"DASH playlist request error at URL: "+r.srcUrl,responseText:s.responseText,code:2},r.state==="HAVE_NOTHING"&&(r.started=!1),r.trigger("error");r.masterXml_=s.responseText,s.responseHeaders&&s.responseHeaders.date?r.masterLoaded_=Date.parse(s.responseHeaders.date):r.masterLoaded_=Date.now(),r.syncClientServerClock_(r.onClientServerClockSync_.bind(r))}})},e.prototype.syncClientServerClock_=function(r){var i=this,s=Gh.parseUTCTiming(this.masterXml_);if(s===null)return this.clientOffset_=this.masterLoaded_-Date.now(),r();if(s.method==="DIRECT")return this.clientOffset_=s.value-Date.now(),r();this.request=this.hls_.xhr({uri:Ir(this.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(a,o){if(i.request){if(a)return i.clientOffset_=i.masterLoaded_-Date.now(),r();var u=void 0;s.method==="HEAD"?!o.responseHeaders||!o.responseHeaders.date?u=i.masterLoaded_:u=Date.parse(o.responseHeaders.date):u=Date.parse(o.responseText),i.clientOffset_=u-Date.now(),r()}})},e.prototype.onClientServerClockSync_=function(){var r=this;this.master=this.parseMasterXml(),this.state="HAVE_MASTER",this.trigger("loadedplaylist"),this.media_||this.media(this.master.playlists[0]),R.setTimeout(function(){r.trigger("loadedmetadata")},0),this.master.minimumUpdatePeriod&&R.setTimeout(function(){r.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)},e.prototype.refreshXml_=function(){var r=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(i,s){if(r.request){if(r.request=null,i)return r.error={status:s.status,message:"DASH playlist request error at URL: "+r.srcUrl,responseText:s.responseText,code:2},r.state==="HAVE_NOTHING"&&(r.started=!1),r.trigger("error");r.masterXml_=s.responseText;var a=r.parseMasterXml();r.master=Ip(r.master,a),R.setTimeout(function(){r.trigger("minimumUpdatePeriod")},r.master.minimumUpdatePeriod)}})},e.prototype.refreshMedia_=function(){var r=this,i=void 0,s=void 0;this.masterPlaylistLoader_?(i=this.masterPlaylistLoader_.master,s=this.masterPlaylistLoader_.parseMasterXml()):(i=this.master,s=this.parseMasterXml());var a=Ip(i,s);a?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=a:this.master=a,this.media_=a.playlists[this.media_.uri]):this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=R.setTimeout(function(){r.trigger("mediaupdatetimeout")},dy(this.media(),!!a))),this.trigger("loadedplaylist")},e}(cO),sa=function(e){return I.log.debug?I.log.debug.bind(I,"VHS:",e+" >"):function(){}};function ds(){}var dO=function(){function t(e,n,r,i){te(this,t),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=e,this.processedAppend_=!1,this.type_=r,this.mimeType_=n,this.logger_=sa("SourceUpdater["+r+"]["+n+"]"),e.readyState==="closed"?e.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,n,i)):this.createSourceBuffer_(n,i)}return t.prototype.createSourceBuffer_=function(n,r){var i=this;if(this.sourceBuffer_=this.mediaSource.addSourceBuffer(n),this.logger_("created SourceBuffer"),r&&(r.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)){r.on("sourcebufferadded",function(){i.start_()});return}this.start_()},t.prototype.start_=function(){var n=this;this.started_=!0,this.onUpdateendCallback_=function(){var r=n.pendingCallback_;n.pendingCallback_=null,n.logger_("buffered ["+Rf(n.buffered())+"]"),r&&r(),n.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()},t.prototype.abort=function(n){var r=this;this.processedAppend_&&this.queueCallback_(function(){r.sourceBuffer_.abort()},n)},t.prototype.appendBuffer=function(n,r){var i=this;this.processedAppend_=!0,this.queueCallback_(function(){i.sourceBuffer_.appendBuffer(n)},r)},t.prototype.buffered=function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:I.createTimeRanges()},t.prototype.remove=function(n,r){var i=this;this.processedAppend_&&this.queueCallback_(function(){i.logger_("remove ["+n+" => "+r+"]"),i.sourceBuffer_.remove(n,r)},ds)},t.prototype.updating=function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_},t.prototype.timestampOffset=function(n){var r=this;return typeof n<"u"&&(this.queueCallback_(function(){r.sourceBuffer_.timestampOffset=n}),this.timestampOffset_=n),this.timestampOffset_},t.prototype.queueCallback_=function(n,r){this.callbacks_.push([n.bind(this),r]),this.runCallback_()},t.prototype.runCallback_=function(){var n=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(n=this.callbacks_.shift(),this.pendingCallback_=n[1],n[0]())},t.prototype.dispose=function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&this.mediaSource.readyState==="open"&&this.sourceBuffer_.abort()},t}(),tr={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},en={FAILURE:2,TIMEOUT:-101,ABORTED:-102},hO=function(e){var n=void 0,r=void 0;return r=e.offset+e.length-1,n=e.offset,"bytes="+n+"-"+r},kp=function(e){var n={};return e.byterange&&(n.Range=hO(e.byterange)),n},Dy=function(e){e.forEach(function(n){n.abort()})},pO=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},mO=function(e){var n=e.target,r=Date.now()-n.requestTime,i={bandwidth:1/0,bytesReceived:0,roundTripTime:r||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},Df=function(e,n){return n.timedout?{status:n.status,message:"HLS request timed-out at URL: "+n.uri,code:en.TIMEOUT,xhr:n}:n.aborted?{status:n.status,message:"HLS request aborted at URL: "+n.uri,code:en.ABORTED,xhr:n}:e?{status:n.status,message:"HLS request errored at URL: "+n.uri,code:en.FAILURE,xhr:n}:null},gO=function(e,n){return function(r,i){var s=i.response,a=Df(r,i);if(a)return n(a,e);if(s.byteLength!==16)return n({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:en.FAILURE,xhr:i},e);var o=new DataView(s);return e.key.bytes=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),n(null,e)}},vO=function(e,n){return function(r,i){var s=i.response,a=Df(r,i);return a?n(a,e):s.byteLength===0?n({status:i.status,message:"Empty HLS segment content at URL: "+i.uri,code:en.FAILURE,xhr:i},e):(e.map.bytes=new Uint8Array(i.response),n(null,e))}},yO=function(e,n){return function(r,i){var s=i.response,a=Df(r,i);return a?n(a,e):s.byteLength===0?n({status:i.status,message:"Empty HLS segment content at URL: "+i.uri,code:en.FAILURE,xhr:i},e):(e.stats=pO(i),e.key?e.encryptedBytes=new Uint8Array(i.response):e.bytes=new Uint8Array(i.response),n(null,e))}},_O=function(e,n,r){var i=function s(a){if(a.data.source===n.requestId){e.removeEventListener("message",s);var o=a.data.decrypted;return n.bytes=new Uint8Array(o.bytes,o.byteOffset,o.byteLength),r(null,n)}};e.addEventListener("message",i),e.postMessage(Ty({source:n.requestId,encrypted:n.encryptedBytes,key:n.key.bytes,iv:n.key.iv}),[n.encryptedBytes.buffer,n.key.bytes.buffer])},bO=function(e){return e.reduce(function(n,r){return r.code>n.code?r:n})},TO=function(e,n,r){var i=[],s=0;return function(a,o){if(a&&(Dy(e),i.push(a)),s+=1,s===e.length){if(o.endOfAllRequests=Date.now(),i.length>0){var u=bO(i);return r(u,o)}return o.encryptedBytes?_O(n,o,r):r(null,o)}}},SO=function(e,n){return function(r){return e.stats=I.mergeOptions(e.stats,mO(r)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),n(r,e)}},xO=function(e,n,r,i,s,a){var o=[],u=TO(o,r,a);if(i.key){var l=I.mergeOptions(n,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),c=gO(i,u),f=e(l,c);o.push(f)}if(i.map&&!i.map.bytes){var d=I.mergeOptions(n,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:kp(i.map)}),h=vO(i,u),g=e(d,h);o.push(g)}var E=I.mergeOptions(n,{uri:i.resolvedUri,responseType:"arraybuffer",headers:kp(i)}),S=yO(i,u),x=e(E,S);return x.addEventListener("progress",SO(i,s)),o.push(x),function(){return Dy(o)}},Ly={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},$s=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n={codecCount:0},r=void 0;return n.codecCount=e.split(",").length,n.codecCount=n.codecCount||2,r=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(e),r&&(n.videoCodec=r[2],n.videoObjectTypeIndicator=r[3]),n.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),n.audioProfile=n.audioProfile&&n.audioProfile[2],n},EO=function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(n){return Py([n])[0]})},Xu=function(e,n,r){return e+"/"+n+'; codecs="'+r.filter(function(i){return!!i}).join(", ")+'"'},wO=function(e){return e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t"},CO=function(e){var n=e.attributes||{};return n.CODECS?$s(n.CODECS):Ly},AO=function(e,n){if(!e.mediaGroups.AUDIO||!n)return null;var r=e.mediaGroups.AUDIO[n];if(!r)return null;for(var i in r){var s=r[i];if(s.default&&s.playlists)return $s(s.playlists[0].attributes.CODECS).audioProfile}return null},IO=function(e,n){var r=wO(n),i=CO(n),s=n.attributes||{},a=!0,o=!1;if(!n)return[];if(e.mediaGroups.AUDIO&&s.AUDIO){var u=e.mediaGroups.AUDIO[s.AUDIO];if(u){o=!0,a=!1;for(var l in u)if(!u[l].uri&&!u[l].playlists){a=!0;break}}}o&&!i.audioProfile&&(a||(i.audioProfile=AO(e,s.AUDIO)),i.audioProfile||(I.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),i.audioProfile=Ly.audioProfile));var c={};i.videoCodec&&(c.video=""+i.videoCodec+i.videoObjectTypeIndicator),i.audioProfile&&(c.audio="mp4a.40."+i.audioProfile);var f=Xu("audio",r,[c.audio]),d=Xu("video",r,[c.video]),h=Xu("video",r,[c.video,c.audio]);return o?!a&&c.video?[d,f]:!a&&!c.video?[f,f]:[h,f]:c.video?[h]:[f]},Pp=function(e,n){var r=void 0;return!e||(r=R.getComputedStyle(e),!r)?"":r[n]},js=function(e,n){var r=e.slice();e.sort(function(i,s){var a=n(i,s);return a===0?r.indexOf(i)-r.indexOf(s):a})},Lf=function(e,n){var r=void 0,i=void 0;return e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||R.Number.MAX_VALUE,n.attributes.BANDWIDTH&&(i=n.attributes.BANDWIDTH),i=i||R.Number.MAX_VALUE,r-i},kO=function(e,n){var r=void 0,i=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||R.Number.MAX_VALUE,n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(i=n.attributes.RESOLUTION.width),i=i||R.Number.MAX_VALUE,r===i&&e.attributes.BANDWIDTH&&n.attributes.BANDWIDTH?e.attributes.BANDWIDTH-n.attributes.BANDWIDTH:r-i},PO=function(e,n,r,i){var s=e.playlists.map(function(x){var D=void 0,$=void 0,U=void 0;return D=x.attributes.RESOLUTION&&x.attributes.RESOLUTION.width,$=x.attributes.RESOLUTION&&x.attributes.RESOLUTION.height,U=x.attributes.BANDWIDTH,U=U||R.Number.MAX_VALUE,{bandwidth:U,width:D,height:$,playlist:x}});js(s,function(x,D){return x.bandwidth-D.bandwidth}),s=s.filter(function(x){return!Bt.isIncompatible(x.playlist)});var a=s.filter(function(x){return Bt.isEnabled(x.playlist)});a.length||(a=s.filter(function(x){return!Bt.isDisabled(x.playlist)}));var o=a.filter(function(x){return x.bandwidth*tr.BANDWIDTH_VARIANCE<n}),u=o[o.length-1],l=o.filter(function(x){return x.bandwidth===u.bandwidth})[0],c=o.filter(function(x){return x.width&&x.height});js(c,function(x,D){return x.width-D.width});var f=c.filter(function(x){return x.width===r&&x.height===i});u=f[f.length-1];var d=f.filter(function(x){return x.bandwidth===u.bandwidth})[0],h=void 0,g=void 0,E=void 0;d||(h=c.filter(function(x){return x.width>r||x.height>i}),g=h.filter(function(x){return x.width===h[0].width&&x.height===h[0].height}),u=g[g.length-1],E=g.filter(function(x){return x.bandwidth===u.bandwidth})[0]);var S=E||d||l||a[0]||s[0];return S?S.playlist:null},OO=function(){return PO(this.playlists.master,this.systemBandwidth,parseInt(Pp(this.tech_.el(),"width"),10),parseInt(Pp(this.tech_.el(),"height"),10))},RO=function(e){var n=e.master,r=e.currentTime,i=e.bandwidth,s=e.duration,a=e.segmentDuration,o=e.timeUntilRebuffer,u=e.currentTimeline,l=e.syncController,c=n.playlists.filter(function(E){return!Bt.isIncompatible(E)}),f=c.filter(Bt.isEnabled);f.length||(f=c.filter(function(E){return!Bt.isDisabled(E)}));var d=f.filter(Bt.hasAttribute.bind(null,"BANDWIDTH")),h=d.map(function(E){var S=l.getSyncPoint(E,s,u,r),x=S?1:2,D=Bt.estimateSegmentRequestTime(a,i,E),$=D*x-o;return{playlist:E,rebufferingImpact:$}}),g=h.filter(function(E){return E.rebufferingImpact<=0});return js(g,function(E,S){return Lf(S.playlist,E.playlist)}),g.length?g[0]:(js(h,function(E,S){return E.rebufferingImpact-S.rebufferingImpact}),h[0]||null)},DO=function(){var e=this.playlists.master.playlists.filter(Bt.isEnabled);js(e,function(r,i){return Lf(r,i)});var n=e.filter(function(r){return $s(r.attributes.CODECS).videoCodec});return n[0]||null},LO=500,Op=function(e,n,r){if(!e||!n)return!1;var i=e.segments,s=r===i.length;return e.endList&&n.readyState==="open"&&s},Rp=function(e){return typeof e=="number"&&isFinite(e)},NO=function(e,n,r){return e!=="main"||!n||!r?null:!r.containsAudio&&!r.containsVideo?"Neither audio nor video found in segment.":n.containsVideo&&!r.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!n.containsVideo&&r.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},MO=function(e,n,r){var i=void 0;return e.length&&e.start(0)>0&&e.start(0)<n?i=e.start(0):i=n-30,Math.min(i,n-r)},UO=function(e){var n=e.segment,r=n.start,i=n.end,s=e.playlist,a=s.mediaSequence,o=s.id,u=s.segments,l=u===void 0?[]:u,c=e.mediaIndex,f=e.timeline;return["appending ["+c+"] of ["+a+", "+(a+l.length)+"] from playlist ["+o+"]","["+r+" => "+i+"] in timeline ["+f+"]"].join(" ")},Hl=function(t){ae(e,t);function e(n){te(this,e);var r=ne(this,t.call(this));if(!n)throw new TypeError("Initialization settings are required");if(typeof n.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!n.mediaSource)throw new TypeError("No MediaSource specified");return r.bandwidth=n.bandwidth,r.throughput={rate:0,count:0},r.roundTrip=NaN,r.resetStats_(),r.mediaIndex=null,r.hasPlayed_=n.hasPlayed,r.currentTime_=n.currentTime,r.seekable_=n.seekable,r.seeking_=n.seeking,r.duration_=n.duration,r.mediaSource_=n.mediaSource,r.hls_=n.hls,r.loaderType_=n.loaderType,r.startingMedia_=void 0,r.segmentMetadataTrack_=n.segmentMetadataTrack,r.goalBufferLength_=n.goalBufferLength,r.sourceType_=n.sourceType,r.state_="INIT",r.checkBufferTimeout_=null,r.error_=void 0,r.currentTimeline_=-1,r.pendingSegment_=null,r.mimeType_=null,r.sourceUpdater_=null,r.xhrOptions_=null,r.activeInitSegmentId_=null,r.initSegments_={},r.decrypter_=n.decrypter,r.syncController_=n.syncController,r.syncPoint_={segmentIndex:0,time:0},r.syncController_.on("syncinfoupdate",function(){return r.trigger("syncinfoupdate")}),r.mediaSource_.addEventListener("sourceopen",function(){return r.ended_=!1}),r.fetchAtBuffer_=!1,r.logger_=sa("SegmentLoader["+r.loaderType_+"]"),Object.defineProperty(r,"state",{get:function(){return this.state_},set:function(s){s!==this.state_&&(this.logger_(this.state_+" -> "+s),this.state_=s)}}),r}return e.prototype.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0},e.prototype.dispose=function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_()},e.prototype.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},e.prototype.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null},e.prototype.error=function(r){return typeof r<"u"&&(this.error_=r),this.pendingSegment_=null,this.error_},e.prototype.endOfStream=function(){this.ended_=!0,this.pause(),this.trigger("ended")},e.prototype.buffered_=function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():I.createTimeRanges()},e.prototype.initSegment=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r)return null;var s=lo(r),a=this.initSegments_[s];return i&&!a&&r.bytes&&(this.initSegments_[s]=a={resolvedUri:r.resolvedUri,byterange:r.byterange,bytes:r.bytes}),a||r},e.prototype.couldBeginLoading_=function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&this.state==="INIT")&&!this.paused()},e.prototype.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},e.prototype.init_=function(){return this.state="READY",this.sourceUpdater_=new dO(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()},e.prototype.playlist=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r){var s=this.playlist_,a=this.pendingSegment_;this.playlist_=r,this.xhrOptions_=i,this.hasPlayed_()||(r.syncInfo={mediaSequence:r.mediaSequence,time:0});var o=s?s.id:null;if(this.logger_("playlist update ["+o+" => "+r.id+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==r.uri){this.mediaIndex!==null&&this.resyncLoader();return}var u=r.mediaSequence-s.mediaSequence;this.logger_("live window shift ["+u+"]"),this.mediaIndex!==null&&(this.mediaIndex-=u),a&&(a.mediaIndex-=u,a.mediaIndex>=0&&(a.segment=r.segments[a.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(s,r)}},e.prototype.pause=function(){this.checkBufferTimeout_&&(R.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},e.prototype.paused=function(){return this.checkBufferTimeout_===null},e.prototype.mimeType=function(r,i){this.mimeType_||(this.mimeType_=r,this.sourceBufferEmitter_=i,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_())},e.prototype.resetEverything=function(){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_()),this.trigger("reseteverything")},e.prototype.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},e.prototype.resyncLoader=function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()},e.prototype.remove=function(r,i){this.sourceUpdater_&&this.sourceUpdater_.remove(r,i),Bs(r,i,this.segmentMetadataTrack_)},e.prototype.monitorBuffer_=function(){this.checkBufferTimeout_&&R.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=R.setTimeout(this.monitorBufferTick_.bind(this),1)},e.prototype.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&R.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=R.setTimeout(this.monitorBufferTick_.bind(this),LO)},e.prototype.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var r=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(r){var i=Op(this.playlist_,this.mediaSource_,r.mediaIndex);if(i){this.endOfStream();return}r.mediaIndex===this.playlist_.segments.length-1&&this.mediaSource_.readyState==="ended"&&!this.seeking_()||((r.timeline!==this.currentTimeline_||r.startOfSegment!==null&&r.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),r.timestampOffset=r.startOfSegment),this.loadSegment_(r))}}},e.prototype.checkBuffer_=function(r,i,s,a,o,u){var l=0,c=void 0;r.length&&(l=r.end(r.length-1));var f=Math.max(0,l-o);if(!i.segments.length||f>=this.goalBufferLength_()||!a&&f>=1)return null;if(u===null)return s=this.getSyncSegmentCandidate_(i),this.generateSegmentInfo_(i,s,null,!0);if(s!==null){var d=i.segments[s];return d&&d.end?c=d.end:c=l,this.generateSegmentInfo_(i,s+1,c,!1)}if(this.fetchAtBuffer_){var h=Bt.getMediaInfoForTime(i,l,u.segmentIndex,u.time);s=h.mediaIndex,c=h.startTime}else{var g=Bt.getMediaInfoForTime(i,o,u.segmentIndex,u.time);s=g.mediaIndex,c=g.startTime}return this.generateSegmentInfo_(i,s,c,!1)},e.prototype.getSyncSegmentCandidate_=function(r){var i=this;if(this.currentTimeline_===-1)return 0;var s=r.segments.map(function(a,o){return{timeline:a.timeline,segmentIndex:o}}).filter(function(a){return a.timeline===i.currentTimeline_});return s.length?s[Math.min(s.length-1,1)].segmentIndex:Math.max(r.segments.length-1,0)},e.prototype.generateSegmentInfo_=function(r,i,s,a){if(i<0||i>=r.segments.length)return null;var o=r.segments[i];return{requestId:"segment-loader-"+Math.random(),uri:o.resolvedUri,mediaIndex:i,isSyncRequest:a,startOfSegment:s,playlist:r,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:o.timeline,duration:o.duration,segment:o}},e.prototype.abortRequestEarly_=function(r){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(r.firstBytesReceivedAt||Date.now())<1e3)return!1;var i=this.currentTime_(),s=r.bandwidth,a=this.pendingSegment_.duration,o=Bt.estimateSegmentRequestTime(a,s,this.playlist_,r.bytesReceived),u=YP(this.buffered_(),i,this.hls_.tech_.playbackRate())-1;if(o<=u)return!1;var l=RO({master:this.hls_.playlists.master,currentTime:i,bandwidth:s,duration:this.duration_(),segmentDuration:a,timeUntilRebuffer:u,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(l){var c=o-u,f=c-l.rebufferingImpact,d=.5;return u<=Pi&&(d=1),!l.playlist||l.playlist.uri===this.playlist_.uri||f<d?!1:(this.bandwidth=l.playlist.attributes.BANDWIDTH*tr.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}},e.prototype.handleProgress_=function(r,i){!this.pendingSegment_||i.requestId!==this.pendingSegment_.requestId||this.abortRequestEarly_(i.stats)||this.trigger("progress")},e.prototype.loadSegment_=function(r){this.state="WAITING",this.pendingSegment_=r,this.trimBackBuffer_(r),r.abortRequests=xO(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(r),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))},e.prototype.trimBackBuffer_=function(r){var i=MO(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);i>0&&this.remove(0,i)},e.prototype.createSimplifiedSegmentObj_=function(r){var i=r.segment,s={resolvedUri:i.resolvedUri,byterange:i.byterange,requestId:r.requestId};if(i.key){var a=i.key.iv||new Uint32Array([0,0,0,r.mediaIndex+r.playlist.mediaSequence]);s.key={resolvedUri:i.key.resolvedUri,iv:a}}return i.map&&(s.map=this.initSegment(i.map)),s},e.prototype.segmentRequestFinished_=function(r,i){if(this.mediaRequests+=1,i.stats&&(this.mediaBytesTransferred+=i.stats.bytesReceived,this.mediaTransferDuration+=i.stats.roundTripTime),!this.pendingSegment_){this.mediaRequestsAborted+=1;return}if(i.requestId===this.pendingSegment_.requestId){if(r){if(this.pendingSegment_=null,this.state="READY",r.code===en.ABORTED){this.mediaRequestsAborted+=1;return}if(this.pause(),r.code===en.TIMEOUT){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate");return}this.mediaRequestsErrored+=1,this.error(r),this.trigger("error");return}this.bandwidth=i.stats.bandwidth,this.roundTrip=i.stats.roundTripTime,i.map&&(i.map=this.initSegment(i.map,!0)),this.processSegmentResponse_(i)}},e.prototype.processSegmentResponse_=function(r){var i=this.pendingSegment_;i.bytes=r.bytes,r.map&&(i.segment.map.bytes=r.map.bytes),i.endOfAllRequests=r.endOfAllRequests,this.handleSegment_()},e.prototype.handleSegment_=function(){var r=this;if(!this.pendingSegment_){this.state="READY";return}var i=this.pendingSegment_,s=i.segment,a=this.syncController_.probeSegmentInfo(i);typeof this.startingMedia_>"u"&&a&&(a.containsAudio||a.containsVideo)&&(this.startingMedia_={containsAudio:a.containsAudio,containsVideo:a.containsVideo});var o=NO(this.loaderType_,this.startingMedia_,a);if(o){this.error({message:o,blacklistDuration:1/0}),this.trigger("error");return}if(i.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}i.timestampOffset!==null&&i.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(i.timestampOffset),this.trigger("timestampoffset"));var u=this.syncController_.mappingForTimeline(i.timeline);if(u!==null&&this.trigger({type:"segmenttimemapping",mapping:u}),this.state="APPENDING",s.map){var l=lo(s.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==l){var c=this.initSegment(s.map);this.sourceUpdater_.appendBuffer(c.bytes,function(){r.activeInitSegmentId_=l})}}i.byteLength=i.bytes.byteLength,typeof s.start=="number"&&typeof s.end=="number"?this.mediaSecondsLoaded+=s.end-s.start:this.mediaSecondsLoaded+=s.duration,this.logger_(UO(i)),this.sourceUpdater_.appendBuffer(i.bytes,this.handleUpdateEnd_.bind(this))},e.prototype.handleUpdateEnd_=function(){if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var r=this.pendingSegment_,i=r.segment,s=this.mediaIndex!==null;if(this.pendingSegment_=null,this.recordThroughput_(r),this.addSegmentMetadataCue_(r),this.state="READY",this.mediaIndex=r.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=r.timeline,this.trigger("syncinfoupdate"),i.end&&this.currentTime_()-i.end>r.playlist.targetDuration*3){this.resetEverything();return}s&&this.trigger("bandwidthupdate"),this.trigger("progress");var a=Op(r.playlist,this.mediaSource_,r.mediaIndex+1);a&&this.endOfStream(),this.paused()||this.monitorBuffer_()},e.prototype.recordThroughput_=function(r){var i=this.throughput.rate,s=Date.now()-r.endOfAllRequests+1,a=Math.floor(r.byteLength/s*8*1e3);this.throughput.rate+=(a-i)/++this.throughput.count},e.prototype.addSegmentMetadataCue_=function(r){if(this.segmentMetadataTrack_){var i=r.segment,s=i.start,a=i.end;if(!(!Rp(s)||!Rp(a))){Bs(s,a,this.segmentMetadataTrack_);var o=R.WebKitDataCue||R.VTTCue,u={bandwidth:r.playlist.attributes.BANDWIDTH,resolution:r.playlist.attributes.RESOLUTION,codecs:r.playlist.attributes.CODECS,byteLength:r.byteLength,uri:r.uri,timeline:r.timeline,playlist:r.playlist.uri,start:s,end:a},l=JSON.stringify(u),c=new o(s,a,l);c.value=u,this.segmentMetadataTrack_.addCue(c)}}},e}(I.EventTarget),Dp=new Uint8Array(`

`.split("").map(function(t){return t.charCodeAt(0)})),Lp=function(e){return String.fromCharCode.apply(null,e)},FO=function(t){ae(e,t);function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};te(this,e);var i=ne(this,t.call(this,n,r));return i.mediaSource_=null,i.subtitlesTrack_=null,i}return e.prototype.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return I.createTimeRanges();var r=this.subtitlesTrack_.cues,i=r[0].startTime,s=r[r.length-1].startTime;return I.createTimeRanges([[i,s]])},e.prototype.initSegment=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r)return null;var s=lo(r),a=this.initSegments_[s];if(i&&!a&&r.bytes){var o=Dp.byteLength+r.bytes.byteLength,u=new Uint8Array(o);u.set(r.bytes),u.set(Dp,r.bytes.byteLength),this.initSegments_[s]=a={resolvedUri:r.resolvedUri,byterange:r.byterange,bytes:u}}return a||r},e.prototype.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},e.prototype.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},e.prototype.track=function(r){return typeof r>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=r,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},e.prototype.remove=function(r,i){Bs(r,i,this.subtitlesTrack_)},e.prototype.fillBuffer_=function(){var r=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var i=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(i=this.skipEmptySegments_(i),!!i){if(this.syncController_.timestampOffsetForTimeline(i.timeline)===null){var s=function(){r.state="READY",r.paused()||r.monitorBuffer_()};this.syncController_.one("timestampoffset",s),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(i)}},e.prototype.skipEmptySegments_=function(r){for(;r&&r.segment.empty;)r=this.generateSegmentInfo_(r.playlist,r.mediaIndex+1,r.startOfSegment+r.duration,r.isSyncRequest);return r},e.prototype.handleSegment_=function(){var r=this;if(!this.pendingSegment_||!this.subtitlesTrack_){this.state="READY";return}this.state="APPENDING";var i=this.pendingSegment_,s=i.segment;if(typeof R.WebVTT!="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var a=function(){r.handleSegment_()};this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",a),this.subtitlesTrack_.tech_.one("vttjserror",function(){r.subtitlesTrack_.tech_.off("vttjsloaded",a),r.error({message:"Error loading vtt.js"}),r.state="READY",r.pause(),r.trigger("error")});return}s.requested=!0;try{this.parseVTTCues_(i)}catch(o){return this.error({message:o.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,i.cues.length&&this.remove(i.cues[0].endTime,i.cues[i.cues.length-1].endTime),i.cues.forEach(function(o){r.subtitlesTrack_.addCue(o)}),this.handleUpdateEnd_()},e.prototype.parseVTTCues_=function(r){var i=void 0,s=!1;typeof R.TextDecoder=="function"?i=new R.TextDecoder("utf8"):(i=R.WebVTT.StringDecoder(),s=!0);var a=new R.WebVTT.Parser(R,R.vttjs,i);if(r.cues=[],r.timestampmap={MPEGTS:0,LOCAL:0},a.oncue=r.cues.push.bind(r.cues),a.ontimestampmap=function(l){return r.timestampmap=l},a.onparsingerror=function(l){I.log.warn("Error encountered when parsing cues: "+l.message)},r.segment.map){var o=r.segment.map.bytes;s&&(o=Lp(o)),a.parse(o)}var u=r.bytes;s&&(u=Lp(u)),a.parse(u),a.flush()},e.prototype.updateTimeMapping_=function(r,i,s){var a=r.segment;if(i){if(!r.cues.length){a.empty=!0;return}var o=r.timestampmap,u=o.MPEGTS/9e4-o.LOCAL+i.mapping;if(r.cues.forEach(function(f){f.startTime+=u,f.endTime+=u}),!s.syncInfo){var l=r.cues[0].startTime,c=r.cues[r.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+r.mediaIndex,time:Math.min(l,c-a.duration)}}}},e}(Hl),BO=function(e,n){for(var r=e.cues,i=0;i<r.length;i++){var s=r[i];if(n>=s.adStartTime&&n<=s.adEndTime)return s}return null},$O=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(e.segments)for(var i=r,s=void 0,a=0;a<e.segments.length;a++){var o=e.segments[a];if(s||(s=BO(n,i+o.duration/2)),s){if("cueIn"in o){s.endTime=i,s.adEndTime=i,i+=o.duration,s=null;continue}if(i<s.endTime){i+=o.duration;continue}s.endTime+=o.duration}else if("cueOut"in o&&(s=new R.VTTCue(i,i+o.duration,o.cueOut),s.adStartTime=i,s.adEndTime=i+parseFloat(o.cueOut),n.addCue(s)),"cueOutCont"in o){var u=void 0,l=void 0,c=o.cueOutCont.split("/").map(parseFloat);u=c[0],l=c[1],s=new R.VTTCue(i,i+o.duration,""),s.adStartTime=i-u,s.adEndTime=s.adStartTime+l,n.addCue(s)}i+=o.duration}},jO=sk.inspect,Np=[{name:"VOD",run:function(e,n,r,i,s){if(r!==1/0){var a={time:0,segmentIndex:0};return a}return null}},{name:"ProgramDateTime",run:function(e,n,r,i,s){if(!e.datetimeToDisplayTime)return null;var a=n.segments||[],o=null,u=null;s=s||0;for(var l=0;l<a.length;l++){var c=a[l];if(c.dateTimeObject){var f=c.dateTimeObject.getTime()/1e3,d=f+e.datetimeToDisplayTime,h=Math.abs(s-d);if(u!==null&&u<h)break;u=h,o={time:d,segmentIndex:l}}}return o}},{name:"Segment",run:function(e,n,r,i,s){var a=n.segments||[],o=null,u=null;s=s||0;for(var l=0;l<a.length;l++){var c=a[l];if(c.timeline===i&&typeof c.start<"u"){var f=Math.abs(s-c.start);if(u!==null&&u<f)break;(!o||u===null||u>=f)&&(u=f,o={time:c.start,segmentIndex:l})}}return o}},{name:"Discontinuity",run:function(e,n,r,i,s){var a=null;if(s=s||0,n.discontinuityStarts&&n.discontinuityStarts.length)for(var o=null,u=0;u<n.discontinuityStarts.length;u++){var l=n.discontinuityStarts[u],c=n.discontinuitySequence+u+1,f=e.discontinuities[c];if(f){var d=Math.abs(s-f.time);if(o!==null&&o<d)break;(!a||o===null||o>=d)&&(o=d,a={time:f.time,segmentIndex:l})}}return a}},{name:"Playlist",run:function(e,n,r,i,s){if(n.syncInfo){var a={time:n.syncInfo.time,segmentIndex:n.syncInfo.mediaSequence-n.mediaSequence};return a}return null}}],HO=function(t){ae(e,t);function e(){te(this,e);var n=ne(this,t.call(this));return n.inspectCache_=void 0,n.timelines=[],n.discontinuities=[],n.datetimeToDisplayTime=null,n.logger_=sa("SyncController"),n}return e.prototype.getSyncPoint=function(r,i,s,a){var o=this.runStrategies_(r,i,s,a);return o.length?this.selectSyncPoint_(o,{key:"time",value:a}):null},e.prototype.getExpiredTime=function(r,i){if(!r||!r.segments)return null;var s=this.runStrategies_(r,i,r.discontinuitySequence,0);if(!s.length)return null;var a=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return a.segmentIndex>0&&(a.time*=-1),Math.abs(a.time+Ss(r,a.segmentIndex,0))},e.prototype.runStrategies_=function(r,i,s,a){for(var o=[],u=0;u<Np.length;u++){var l=Np[u],c=l.run(this,r,i,s,a);c&&(c.strategy=l.name,o.push({strategy:l.name,syncPoint:c}))}return o},e.prototype.selectSyncPoint_=function(r,i){for(var s=r[0].syncPoint,a=Math.abs(r[0].syncPoint[i.key]-i.value),o=r[0].strategy,u=1;u<r.length;u++){var l=Math.abs(r[u].syncPoint[i.key]-i.value);l<a&&(a=l,s=r[u].syncPoint,o=r[u].strategy)}return this.logger_("syncPoint for ["+i.key+": "+i.value+"] chosen with strategy"+(" ["+o+"]: [time:"+s.time+",")+(" segmentIndex:"+s.segmentIndex+"]")),s},e.prototype.saveExpiredSegmentInfo=function(r,i){for(var s=i.mediaSequence-r.mediaSequence,a=s-1;a>=0;a--){var o=r.segments[a];if(o&&typeof o.start<"u"){i.syncInfo={mediaSequence:r.mediaSequence+a,time:o.start},this.logger_("playlist refresh sync: [time:"+i.syncInfo.time+","+(" mediaSequence: "+i.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},e.prototype.setDateTimeMapping=function(r){if(!this.datetimeToDisplayTime&&r.segments&&r.segments.length&&r.segments[0].dateTimeObject){var i=r.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-i}},e.prototype.reset=function(){this.inspectCache_=void 0},e.prototype.probeSegmentInfo=function(r){var i=r.segment,s=r.playlist,a=void 0;return i.map?a=this.probeMp4Segment_(r):a=this.probeTsSegment_(r),a&&this.calculateSegmentTimeMapping_(r,a)&&(this.saveDiscontinuitySyncInfo_(r),s.syncInfo||(s.syncInfo={mediaSequence:s.mediaSequence+r.mediaIndex,time:i.start})),a},e.prototype.probeMp4Segment_=function(r){var i=r.segment,s=Xh.timescale(i.map.bytes),a=Xh.startTime(s,r.bytes);return r.timestampOffset!==null&&(r.timestampOffset-=a),{start:a,end:a+i.duration}},e.prototype.probeTsSegment_=function(r){var i=jO(r.bytes,this.inspectCache_),s=void 0,a=void 0;return i?(i.video&&i.video.length===2?(this.inspectCache_=i.video[1].dts,s=i.video[0].dtsTime,a=i.video[1].dtsTime):i.audio&&i.audio.length===2&&(this.inspectCache_=i.audio[1].dts,s=i.audio[0].dtsTime,a=i.audio[1].dtsTime),{start:s,end:a,containsVideo:i.video&&i.video.length===2,containsAudio:i.audio&&i.audio.length===2}):null},e.prototype.timestampOffsetForTimeline=function(r){return typeof this.timelines[r]>"u"?null:this.timelines[r].time},e.prototype.mappingForTimeline=function(r){return typeof this.timelines[r]>"u"?null:this.timelines[r].mapping},e.prototype.calculateSegmentTimeMapping_=function(r,i){var s=r.segment,a=this.timelines[r.timeline];if(r.timestampOffset!==null)a={time:r.startOfSegment,mapping:r.startOfSegment-i.start},this.timelines[r.timeline]=a,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+r.timeline+": "+("[time: "+a.time+"] [mapping: "+a.mapping+"]")),s.start=r.startOfSegment,s.end=i.end+a.mapping;else if(a)s.start=i.start+a.mapping,s.end=i.end+a.mapping;else return!1;return!0},e.prototype.saveDiscontinuitySyncInfo_=function(r){var i=r.playlist,s=r.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(i.discontinuityStarts&&i.discontinuityStarts.length)for(var a=0;a<i.discontinuityStarts.length;a++){var o=i.discontinuityStarts[a],u=i.discontinuitySequence+a+1,l=o-r.mediaIndex,c=Math.abs(l);if(!this.discontinuities[u]||this.discontinuities[u].accuracy>c){var f=void 0;l<0?f=s.start-Ss(i,r.mediaIndex,o):f=s.end+Ss(i,r.mediaIndex+1,o),this.discontinuities[u]={time:f,accuracy:c}}}},e}(I.EventTarget),VO=new Cy("./decrypter-worker.worker.js",function(t,e){var n=this;(function(){var r=typeof t<"u"?t:typeof sn<"u"?sn:typeof n<"u"?n:{},i;typeof t<"u"?i=t:typeof r<"u"?i=r:typeof n<"u"?i=n:i={};var s=i;function a(re){return re.subarray(0,re.byteLength-re[re.byteLength-1])}var o=function(Z,H){if(!(Z instanceof H))throw new TypeError("Cannot call a class as a function")},u=function(){function re(Z,H){for(var z=0;z<H.length;z++){var ie=H[z];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(Z,ie.key,ie)}}return function(Z,H,z){return H&&re(Z.prototype,H),z&&re(Z,z),Z}}(),l=function(Z,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof H>"u"?"undefined":an(H)));Z.prototype=Object.create(H&&H.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,H):Z.__proto__=H)},c=function(Z,H){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&((typeof H>"u"?"undefined":an(H))==="object"||typeof H=="function")?H:Z},f=function(){var Z=[[[],[],[],[],[]],[[],[],[],[],[]]],H=Z[0],z=Z[1],ie=H[4],me=z[4],de=void 0,V=void 0,J=void 0,Te=[],he=[],pe=void 0,be=void 0,ze=void 0,Be=void 0,$e=void 0,we=void 0;for(de=0;de<256;de++)he[(Te[de]=de<<1^(de>>7)*283)^de]=de;for(V=J=0;!ie[V];V^=pe||1,J=he[J]||1)for(Be=J^J<<1^J<<2^J<<3^J<<4,Be=Be>>8^Be&255^99,ie[V]=Be,me[Be]=V,ze=Te[be=Te[pe=Te[V]]],we=ze*16843009^be*65537^pe*257^V*16843008,$e=Te[Be]*257^Be*16843008,de=0;de<4;de++)H[de][V]=$e=$e<<24^$e>>>8,z[de][Be]=we=we<<24^we>>>8;for(de=0;de<5;de++)H[de]=H[de].slice(0),z[de]=z[de].slice(0);return Z},d=null,h=function(){function re(Z){o(this,re),d||(d=f()),this._tables=[[d[0][0].slice(),d[0][1].slice(),d[0][2].slice(),d[0][3].slice(),d[0][4].slice()],[d[1][0].slice(),d[1][1].slice(),d[1][2].slice(),d[1][3].slice(),d[1][4].slice()]];var H=void 0,z=void 0,ie=void 0,me=void 0,de=void 0,V=this._tables[0][4],J=this._tables[1],Te=Z.length,he=1;if(Te!==4&&Te!==6&&Te!==8)throw new Error("Invalid aes key size");for(me=Z.slice(0),de=[],this._key=[me,de],H=Te;H<4*Te+28;H++)ie=me[H-1],(H%Te===0||Te===8&&H%Te===4)&&(ie=V[ie>>>24]<<24^V[ie>>16&255]<<16^V[ie>>8&255]<<8^V[ie&255],H%Te===0&&(ie=ie<<8^ie>>>24^he<<24,he=he<<1^(he>>7)*283)),me[H]=me[H-Te]^ie;for(z=0;H;z++,H--)ie=me[z&3?H:H-4],H<=4||z<4?de[z]=ie:de[z]=J[0][V[ie>>>24]]^J[1][V[ie>>16&255]]^J[2][V[ie>>8&255]]^J[3][V[ie&255]]}return re.prototype.decrypt=function(H,z,ie,me,de,V){var J=this._key[1],Te=H^J[0],he=me^J[1],pe=ie^J[2],be=z^J[3],ze=void 0,Be=void 0,$e=void 0,we=J.length/4-2,tt=void 0,lt=4,Mt=this._tables[1],qe=Mt[0],M=Mt[1],se=Mt[2],q=Mt[3],ce=Mt[4];for(tt=0;tt<we;tt++)ze=qe[Te>>>24]^M[he>>16&255]^se[pe>>8&255]^q[be&255]^J[lt],Be=qe[he>>>24]^M[pe>>16&255]^se[be>>8&255]^q[Te&255]^J[lt+1],$e=qe[pe>>>24]^M[be>>16&255]^se[Te>>8&255]^q[he&255]^J[lt+2],be=qe[be>>>24]^M[Te>>16&255]^se[he>>8&255]^q[pe&255]^J[lt+3],lt+=4,Te=ze,he=Be,pe=$e;for(tt=0;tt<4;tt++)de[(3&-tt)+V]=ce[Te>>>24]<<24^ce[he>>16&255]<<16^ce[pe>>8&255]<<8^ce[be&255]^J[lt++],ze=Te,Te=he,he=pe,pe=be,be=ze},re}(),g=function(){function re(){o(this,re),this.listeners={}}return re.prototype.on=function(H,z){this.listeners[H]||(this.listeners[H]=[]),this.listeners[H].push(z)},re.prototype.off=function(H,z){if(!this.listeners[H])return!1;var ie=this.listeners[H].indexOf(z);return this.listeners[H].splice(ie,1),ie>-1},re.prototype.trigger=function(H){var z=this.listeners[H];if(z)if(arguments.length===2)for(var ie=z.length,me=0;me<ie;++me)z[me].call(this,arguments[1]);else for(var de=Array.prototype.slice.call(arguments,1),V=z.length,J=0;J<V;++J)z[J].apply(this,de)},re.prototype.dispose=function(){this.listeners={}},re.prototype.pipe=function(H){this.on("data",function(z){H.push(z)})},re}(),E=function(re){l(Z,re);function Z(){o(this,Z);var H=c(this,re.call(this,g));return H.jobs=[],H.delay=1,H.timeout_=null,H}return Z.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},Z.prototype.push=function(z){this.jobs.push(z),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},Z}(g),S=function(Z){return Z<<24|(Z&65280)<<8|(Z&16711680)>>8|Z>>>24},x=function(Z,H,z){var ie=new Int32Array(Z.buffer,Z.byteOffset,Z.byteLength>>2),me=new h(Array.prototype.slice.call(H)),de=new Uint8Array(Z.byteLength),V=new Int32Array(de.buffer),J=void 0,Te=void 0,he=void 0,pe=void 0,be=void 0,ze=void 0,Be=void 0,$e=void 0,we=void 0;for(J=z[0],Te=z[1],he=z[2],pe=z[3],we=0;we<ie.length;we+=4)be=S(ie[we]),ze=S(ie[we+1]),Be=S(ie[we+2]),$e=S(ie[we+3]),me.decrypt(be,ze,Be,$e,V,we),V[we]=S(V[we]^J),V[we+1]=S(V[we+1]^Te),V[we+2]=S(V[we+2]^he),V[we+3]=S(V[we+3]^pe),J=be,Te=ze,he=Be,pe=$e;return de},D=function(){function re(Z,H,z,ie){o(this,re);var me=re.STEP,de=new Int32Array(Z.buffer),V=new Uint8Array(Z.byteLength),J=0;for(this.asyncStream_=new E,this.asyncStream_.push(this.decryptChunk_(de.subarray(J,J+me),H,z,V)),J=me;J<de.length;J+=me)z=new Uint32Array([S(de[J-4]),S(de[J-3]),S(de[J-2]),S(de[J-1])]),this.asyncStream_.push(this.decryptChunk_(de.subarray(J,J+me),H,z,V));this.asyncStream_.push(function(){ie(null,a(V))})}return re.prototype.decryptChunk_=function(H,z,ie,me){return function(){var de=x(H,z,ie);me.set(de,H.byteOffset)}},u(re,null,[{key:"STEP",get:function(){return 32e3}}]),re}(),$=function(Z){var H={};return Object.keys(Z).forEach(function(z){var ie=Z[z];ArrayBuffer.isView(ie)?H[z]={bytes:ie.buffer,byteOffset:ie.byteOffset,byteLength:ie.byteLength}:H[z]=ie}),H},U=function(Z){Z.onmessage=function(H){var z=H.data,ie=new Uint8Array(z.encrypted.bytes,z.encrypted.byteOffset,z.encrypted.byteLength),me=new Uint32Array(z.key.bytes,z.key.byteOffset,z.key.byteLength/4),de=new Uint32Array(z.iv.bytes,z.iv.byteOffset,z.iv.byteLength/4);new D(ie,me,de,function(V,J){s.postMessage($({source:z.source,decrypted:J}),[J.buffer])})}},_e=new U(n);return _e})()}),WO=function(e){var n=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(n="main-desc"),n},co=function(e,n){e.abort(),e.pause(),n&&n.activePlaylistLoader&&(n.activePlaylistLoader.pause(),n.activePlaylistLoader=null)},Vl=function(e,n){n.activePlaylistLoader=e,e.load()},zO=function(e,n){return function(){var r=n.segmentLoaders,i=r[e],s=r.main,a=n.mediaTypes[e],o=a.activeTrack(),u=a.activeGroup(o),l=a.activePlaylistLoader;if(co(i,a),!!u){if(!u.playlistLoader){l&&s.resetEverything();return}i.resyncLoader(),Vl(u.playlistLoader,a)}}},qO=function(e,n){return function(){var r=n.segmentLoaders,i=r[e],s=r.main,a=n.mediaTypes[e],o=a.activeTrack(),u=a.activeGroup(o),l=a.activePlaylistLoader;if(co(i,a),!!u){if(!u.playlistLoader){s.resetEverything();return}if(l===u.playlistLoader){Vl(u.playlistLoader,a);return}i.track&&i.track(o),i.resetEverything(),Vl(u.playlistLoader,a)}}},fo={AUDIO:function(e,n){return function(){var r=n.segmentLoaders[e],i=n.mediaTypes[e],s=n.blacklistCurrentPlaylist;co(r,i);var a=i.activeTrack(),o=i.activeGroup(),u=(o.filter(function(f){return f.default})[0]||o[0]).id,l=i.tracks[u];if(a===l){s({message:"Problem encountered loading the default audio track."});return}I.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var c in i.tracks)i.tracks[c].enabled=i.tracks[c]===l;i.onTrackChanged()}},SUBTITLES:function(e,n){return function(){var r=n.segmentLoaders[e],i=n.mediaTypes[e];I.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),co(r,i);var s=i.activeTrack();s&&(s.mode="disabled"),i.onTrackChanged()}}},Mp={AUDIO:function(e,n,r){if(n){var i=r.tech,s=r.requestOptions,a=r.segmentLoaders[e];n.on("loadedmetadata",function(){var o=n.media();a.playlist(o,s),(!i.paused()||o.endList&&i.preload()!=="none")&&a.load()}),n.on("loadedplaylist",function(){a.playlist(n.media(),s),i.paused()||a.load()}),n.on("error",fo[e](e,r))}},SUBTITLES:function(e,n,r){var i=r.tech,s=r.requestOptions,a=r.segmentLoaders[e],o=r.mediaTypes[e];n.on("loadedmetadata",function(){var u=n.media();a.playlist(u,s),a.track(o.activeTrack()),(!i.paused()||u.endList&&i.preload()!=="none")&&a.load()}),n.on("loadedplaylist",function(){a.playlist(n.media(),s),i.paused()||a.load()}),n.on("error",fo[e](e,r))}},GO=function(e,n){return function(r){return r.attributes[e]===n}},XO=function(e){return function(n){return n.resolvedUri===e}},KO={AUDIO:function(e,n){var r=n.hls,i=n.sourceType,s=n.segmentLoaders[e],a=n.requestOptions.withCredentials,o=n.master,u=o.mediaGroups,l=o.playlists,c=n.mediaTypes[e],f=c.groups,d=c.tracks,h=n.masterPlaylistLoader;(!u[e]||Object.keys(u[e]).length===0)&&(u[e]={main:{default:{default:!0}}});for(var g in u[e]){f[g]||(f[g]=[]);var E=l.filter(GO(e,g));for(var S in u[e][g]){var x=u[e][g][S],D=E.filter(XO(x.resolvedUri));D.length&&delete x.resolvedUri;var $=void 0;if(x.resolvedUri?$=new uo(x.resolvedUri,r,a):x.playlists&&i==="dash"?$=new jl(x.playlists[0],r,a,h):$=null,x=I.mergeOptions({id:S,playlistLoader:$},x),Mp[e](e,x.playlistLoader,n),f[g].push(x),typeof d[S]>"u"){var U=new I.AudioTrack({id:S,kind:WO(x),enabled:!1,language:x.language,default:x.default,label:S});d[S]=U}}}s.on("error",fo[e](e,n))},SUBTITLES:function(e,n){var r=n.tech,i=n.hls,s=n.sourceType,a=n.segmentLoaders[e],o=n.requestOptions.withCredentials,u=n.master.mediaGroups,l=n.mediaTypes[e],c=l.groups,f=l.tracks,d=n.masterPlaylistLoader;for(var h in u[e]){c[h]||(c[h]=[]);for(var g in u[e][h])if(!u[e][h][g].forced){var E=u[e][h][g],S=void 0;if(s==="hls"?S=new uo(E.resolvedUri,i,o):s==="dash"&&(S=new jl(E.playlists[0],i,o,d)),E=I.mergeOptions({id:g,playlistLoader:S},E),Mp[e](e,E.playlistLoader,n),c[h].push(E),typeof f[g]>"u"){var x=r.addRemoteTextTrack({id:g,kind:"subtitles",enabled:!1,language:E.language,label:g},!1).track;f[g]=x}}}a.on("error",fo[e](e,n))},"CLOSED-CAPTIONS":function(e,n){var r=n.tech,i=n.master.mediaGroups,s=n.mediaTypes[e],a=s.groups,o=s.tracks;for(var u in i[e]){a[u]||(a[u]=[]);for(var l in i[e][u]){var c=i[e][u][l];if(c.instreamId.match(/CC\d/)&&(a[u].push(I.mergeOptions({id:l},c)),typeof o[l]>"u")){var f=r.addRemoteTextTrack({id:c.instreamId,kind:"captions",enabled:!1,language:c.language,label:l},!1).track;o[l]=f}}}}},YO=function(e,n){return function(r){var i=n.masterPlaylistLoader,s=n.mediaTypes[e].groups,a=i.media();if(!a)return null;var o=null;return a.attributes[e]&&(o=s[a.attributes[e]]),o=o||s.main,typeof r>"u"?o:r===null?null:o.filter(function(u){return u.id===r.id})[0]||null}},JO={AUDIO:function(e,n){return function(){var r=n.mediaTypes[e].tracks;for(var i in r)if(r[i].enabled)return r[i];return null}},SUBTITLES:function(e,n){return function(){var r=n.mediaTypes[e].tracks;for(var i in r)if(r[i].mode==="showing")return r[i];return null}}},QO=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(c){KO[c](c,e)});var n=e.mediaTypes,r=e.masterPlaylistLoader,i=e.tech,s=e.hls;["AUDIO","SUBTITLES"].forEach(function(c){n[c].activeGroup=YO(c,e),n[c].activeTrack=JO[c](c,e),n[c].onGroupChanged=zO(c,e),n[c].onTrackChanged=qO(c,e)});var a=n.AUDIO.activeGroup(),o=(a.filter(function(c){return c.default})[0]||a[0]).id;n.AUDIO.tracks[o].enabled=!0,n.AUDIO.onTrackChanged(),r.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(c){return n[c].onGroupChanged()})});var u=function(){n.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"hls-audio-change"})};i.audioTracks().addEventListener("change",u),i.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),s.on("dispose",function(){i.audioTracks().removeEventListener("change",u),i.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(var l in n.AUDIO.tracks)i.audioTracks().addTrack(n.AUDIO.tracks[l])},ZO=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(n){e[n]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:ds,activeTrack:ds,onGroupChanged:ds,onTrackChanged:ds}}),e},eR=60*2,Hr=void 0,tR=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],rR=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},nR=function(t){ae(e,t);function e(n){te(this,e);var r=ne(this,t.call(this)),i=n.url,s=n.withCredentials,a=n.tech,o=n.bandwidth,u=n.externHls,l=n.useCueTags,c=n.blacklistDuration,f=n.enableLowInitialPlaylist,d=n.sourceType;if(!i)throw new Error("A non-empty playlist URL is required");Hr=u,r.withCredentials=s,r.tech_=a,r.hls_=a.hls,r.sourceType_=d,r.useCueTags_=l,r.blacklistDuration=c,r.enableLowInitialPlaylist=f,r.useCueTags_&&(r.cueTagsTrack_=r.tech_.addTextTrack("metadata","ad-cues"),r.cueTagsTrack_.inBandMetadataTrackDispatchType=""),r.requestOptions_={withCredentials:r.withCredentials,timeout:null},r.mediaTypes_=ZO(),r.mediaSource=new I.MediaSource,r.mediaSource.addEventListener("sourceopen",r.handleSourceOpen_.bind(r)),r.seekable_=I.createTimeRanges(),r.hasPlayed_=function(){return!1},r.syncController_=new HO(n),r.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,r.decrypter_=new VO;var h={hls:r.hls_,mediaSource:r.mediaSource,currentTime:r.tech_.currentTime.bind(r.tech_),seekable:function(){return r.seekable()},seeking:function(){return r.tech_.seeking()},duration:function(){return r.mediaSource.duration},hasPlayed:function(){return r.hasPlayed_()},goalBufferLength:function(){return r.goalBufferLength()},bandwidth:o,syncController:r.syncController_,decrypter:r.decrypter_,sourceType:r.sourceType_};return r.masterPlaylistLoader_=r.sourceType_==="dash"?new jl(i,r.hls_,r.withCredentials):new uo(i,r.hls_,r.withCredentials),r.setupMasterPlaylistLoaderListeners_(),r.mainSegmentLoader_=new Hl(I.mergeOptions(h,{segmentMetadataTrack:r.segmentMetadataTrack_,loaderType:"main"}),n),r.audioSegmentLoader_=new Hl(I.mergeOptions(h,{loaderType:"audio"}),n),r.subtitleSegmentLoader_=new FO(I.mergeOptions(h,{loaderType:"vtt"}),n),r.setupSegmentLoaderListeners_(),tR.forEach(function(g){r[g+"_"]=rR.bind(r,g)}),r.logger_=sa("MPC"),r.masterPlaylistLoader_.load(),r}return e.prototype.setupMasterPlaylistLoaderListeners_=function(){var r=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var i=r.masterPlaylistLoader_.media(),s=r.masterPlaylistLoader_.targetDuration*1.5*1e3;Fl(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.media())?r.requestOptions_.timeout=0:r.requestOptions_.timeout=s,i.endList&&r.tech_.preload()!=="none"&&(r.mainSegmentLoader_.playlist(i,r.requestOptions_),r.mainSegmentLoader_.load()),QO({sourceType:r.sourceType_,segmentLoaders:{AUDIO:r.audioSegmentLoader_,SUBTITLES:r.subtitleSegmentLoader_,main:r.mainSegmentLoader_},tech:r.tech_,requestOptions:r.requestOptions_,masterPlaylistLoader:r.masterPlaylistLoader_,hls:r.hls_,master:r.master(),mediaTypes:r.mediaTypes_,blacklistCurrentPlaylist:r.blacklistCurrentPlaylist.bind(r)}),r.triggerPresenceUsage_(r.master(),i);try{r.setupSourceBuffers_()}catch(a){return I.log.warn("Failed to create SourceBuffers",a),r.mediaSource.endOfStream("decode")}r.setupFirstPlay(),r.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var i=r.masterPlaylistLoader_.media();if(!i){r.excludeUnsupportedVariants_();var s=void 0;r.enableLowInitialPlaylist&&(s=r.selectInitialPlaylist()),s||(s=r.selectPlaylist()),r.initialMedia_=s,r.masterPlaylistLoader_.media(r.initialMedia_);return}if(r.useCueTags_&&r.updateAdCues_(i),r.mainSegmentLoader_.playlist(i,r.requestOptions_),r.updateDuration(),r.tech_.paused()||r.mainSegmentLoader_.load(),!i.endList){var a=function(){var l=r.seekable();l.length!==0&&r.mediaSource.addSeekableRange_(l.start(0),l.end(0))};if(r.duration()!==1/0){var o=function u(){r.duration()===1/0?a():r.tech_.one("durationchange",u)};r.tech_.one("durationchange",o)}else a()}}),this.masterPlaylistLoader_.on("error",function(){r.blacklistCurrentPlaylist(r.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){r.mainSegmentLoader_.abort(),r.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var i=r.masterPlaylistLoader_.media(),s=r.masterPlaylistLoader_.targetDuration*1.5*1e3;Fl(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.media())?r.requestOptions_.timeout=0:r.requestOptions_.timeout=s,r.mainSegmentLoader_.playlist(i,r.requestOptions_),r.mainSegmentLoader_.load(),r.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var i=r.masterPlaylistLoader_.media(),s=r.stuckAtPlaylistEnd_(i);s&&(r.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),r.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){r.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){r.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},e.prototype.triggerPresenceUsage_=function(r,i){var s=r.mediaGroups||{},a=!0,o=Object.keys(s.AUDIO);for(var u in s.AUDIO)for(var l in s.AUDIO[u]){var c=s.AUDIO[u][l];c.uri||(a=!1)}a&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(s.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),Hr.Playlist.isAes(i)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),Hr.Playlist.isFmp4(i)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),o.length&&Object.keys(s.AUDIO[o[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})},e.prototype.setupSegmentLoaderListeners_=function(){var r=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var i=r.selectPlaylist(),s=r.masterPlaylistLoader_.media(),a=r.tech_.buffered(),o=a.length?a.end(a.length-1)-r.tech_.currentTime():0,u=r.bufferLowWaterLine();(!s.endList||r.duration()<tr.MAX_BUFFER_LOW_WATER_LINE||i.attributes.BANDWIDTH<s.attributes.BANDWIDTH||o>=u)&&r.masterPlaylistLoader_.media(i),r.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){r.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){r.blacklistCurrentPlaylist(r.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){r.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){r.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){r.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){r.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){r.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},eR)}),this.mainSegmentLoader_.on("reseteverything",function(){r.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(i){r.tech_.trigger({type:"hls-segment-time-mapping",mapping:i.mapping})}),this.audioSegmentLoader_.on("ended",function(){r.onEndOfStream()})},e.prototype.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},e.prototype.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},e.prototype.fastQualityChange_=function(){var r=this.selectPlaylist();r!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(r),this.mainSegmentLoader_.resetLoader())},e.prototype.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_()&&this.load();var r=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<r.start(0))return this.tech_.setCurrentTime(r.end(r.length-1))}},e.prototype.setupFirstPlay=function(){var r=this,i=this.masterPlaylistLoader_.media();if(!i||this.tech_.paused()||this.hasPlayed_())return!1;if(!i.endList){var s=this.seekable();if(!s.length)return!1;if(I.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){r.trigger("firstplay"),r.tech_.setCurrentTime(s.end(0)),r.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0},e.prototype.handleSourceOpen_=function(){try{this.setupSourceBuffers_()}catch(i){return I.log.warn("Failed to create Source Buffers",i),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var r=this.tech_.play();typeof r<"u"&&typeof r.then=="function"&&r.then(null,function(i){})}this.trigger("sourceopen")},e.prototype.onEndOfStream=function(){var r=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?r=r&&this.audioSegmentLoader_.ended_:r=this.audioSegmentLoader_.ended_),r&&this.mediaSource.endOfStream()},e.prototype.stuckAtPlaylistEnd_=function(r){var i=this.seekable();if(!i.length)return!1;var s=this.syncController_.getExpiredTime(r,this.mediaSource.duration);if(s===null)return!1;var a=Hr.Playlist.playlistEnd(r,s),o=this.tech_.currentTime(),u=this.tech_.buffered();if(!u.length)return a-o<=wn;var l=u.end(u.length-1);return l-o<=wn&&a-l<=wn},e.prototype.blacklistCurrentPlaylist=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments[1],s=void 0,a=void 0;if(s=r.playlist||this.masterPlaylistLoader_.media(),i=i||r.blacklistDuration||this.blacklistDuration,!s){this.error=r;try{return this.mediaSource.endOfStream("network")}catch{return this.trigger("error")}}var o=this.masterPlaylistLoader_.master.playlists.filter(qo).length===1;return o?(I.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(o)):(s.excludeUntil=Date.now()+i*1e3,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),a=this.selectPlaylist(),I.log.warn("Problem encountered with the current HLS playlist."+(r.message?" "+r.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(a))},e.prototype.pauseLoading=function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()},e.prototype.setCurrentTime=function(r){var i=Ey(this.tech_.buffered(),r);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(i&&i.length)return r;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},e.prototype.duration=function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:Hr.Playlist.duration(this.masterPlaylistLoader_.media()):0},e.prototype.seekable=function(){return this.seekable_},e.prototype.onSyncInfoUpdate_=function(){var r=void 0,i=void 0;if(this.masterPlaylistLoader_){var s=this.masterPlaylistLoader_.media();if(s){var a=this.syncController_.getExpiredTime(s,this.mediaSource.duration);a!==null&&(r=Hr.Playlist.seekable(s,a),r.length!==0&&(this.mediaTypes_.AUDIO.activePlaylistLoader&&(s=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),a=this.syncController_.getExpiredTime(s,this.mediaSource.duration),a===null||(i=Hr.Playlist.seekable(s,a),i.length===0))||(i?i.start(0)>r.end(0)||r.start(0)>i.end(0)?this.seekable_=r:this.seekable_=I.createTimeRanges([[i.start(0)>r.start(0)?i.start(0):r.start(0),i.end(0)<r.end(0)?i.end(0):r.end(0)]]):this.seekable_=r,this.logger_("seekable updated ["+Rf(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))))}}},e.prototype.updateDuration=function(){var r=this,i=this.mediaSource.duration,s=Hr.Playlist.duration(this.masterPlaylistLoader_.media()),a=this.tech_.buffered(),o=function u(){r.mediaSource.duration=s,r.tech_.trigger("durationchange"),r.mediaSource.removeEventListener("sourceopen",u)};a.length>0&&(s=Math.max(s,a.end(a.length-1))),i!==s&&(this.mediaSource.readyState!=="open"?this.mediaSource.addEventListener("sourceopen",o):o())},e.prototype.dispose=function(){var r=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(i){var s=r.mediaTypes_[i].groups;for(var a in s)s[a].forEach(function(o){o.playlistLoader&&o.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()},e.prototype.master=function(){return this.masterPlaylistLoader_.master},e.prototype.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},e.prototype.setupSourceBuffers_=function(){var r=this.masterPlaylistLoader_.media(),i=void 0;if(!(!r||this.mediaSource.readyState!=="open")){if(i=IO(this.masterPlaylistLoader_.master,r),i.length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+r.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(i),this.excludeIncompatibleVariants_(r)}},e.prototype.configureLoaderMimeTypes_=function(r){var i=r.length>1&&r[0].indexOf(",")===-1&&r[0]!==r[1]?new I.EventTarget:null;this.mainSegmentLoader_.mimeType(r[0],i),r[1]&&this.audioSegmentLoader_.mimeType(r[1],i)},e.prototype.excludeUnsupportedVariants_=function(){this.master().playlists.forEach(function(r){r.attributes.CODECS&&R.MediaSource&&R.MediaSource.isTypeSupported&&!R.MediaSource.isTypeSupported('video/mp4; codecs="'+EO(r.attributes.CODECS)+'"')&&(r.excludeUntil=1/0)})},e.prototype.excludeIncompatibleVariants_=function(r){var i=2,s=null,a=void 0;r.attributes.CODECS&&(a=$s(r.attributes.CODECS),s=a.videoCodec,i=a.codecCount),this.master().playlists.forEach(function(o){var u={codecCount:2,videoCodec:null};o.attributes.CODECS&&(u=$s(o.attributes.CODECS)),u.codecCount!==i&&(o.excludeUntil=1/0),u.videoCodec!==s&&(o.excludeUntil=1/0)})},e.prototype.updateAdCues_=function(r){var i=0,s=this.seekable();s.length&&(i=s.start(0)),$O(r,this.cueTagsTrack_,i)},e.prototype.goalBufferLength=function(){var r=this.tech_.currentTime(),i=tr.GOAL_BUFFER_LENGTH,s=tr.GOAL_BUFFER_LENGTH_RATE,a=Math.max(i,tr.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+r*s,a)},e.prototype.bufferLowWaterLine=function(){var r=this.tech_.currentTime(),i=tr.BUFFER_LOW_WATER_LINE,s=tr.BUFFER_LOW_WATER_LINE_RATE,a=Math.max(i,tr.MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+r*s,a)},e}(I.EventTarget),iR=function(e,n,r){return function(i){var s=e.master.playlists[n],a=Of(s),o=qo(s);return typeof i>"u"?o:(i?delete s.disabled:s.disabled=!0,i!==o&&!a&&(r(),i?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),i)}},sR=function t(e,n,r){te(this,t);var i=e.masterPlaylistController_.fastQualityChange_.bind(e.masterPlaylistController_);if(n.attributes.RESOLUTION){var s=n.attributes.RESOLUTION;this.width=s.width,this.height=s.height}this.bandwidth=n.attributes.BANDWIDTH,this.id=r,this.enabled=iR(e.playlists,n.uri,i)},aR=function(e){var n=e.playlists;e.representations=function(){return n.master.playlists.filter(function(r){return!Of(r)}).map(function(r,i){return new sR(e,r,r.uri)})}},Up=["seeking","seeked","pause","playing","error"],oR=function(){function t(e){var n=this;te(this,t),this.tech_=e.tech,this.seekable=e.seekable,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=sa("PlaybackWatcher"),this.logger_("initialize");var r=function(){return n.monitorCurrentTime_()},i=function(){return n.techWaiting_()},s=function(){return n.cancelTimer_()},a=function(){return n.fixesBadSeeks_()};this.tech_.on("seekablechanged",a),this.tech_.on("waiting",i),this.tech_.on(Up,s),this.tech_.on("canplay",r),this.dispose=function(){n.logger_("dispose"),n.tech_.off("seekablechanged",a),n.tech_.off("waiting",i),n.tech_.off(Up,s),n.tech_.off("canplay",r),n.checkCurrentTimeTimeout_&&R.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}return t.prototype.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&R.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=R.setTimeout(this.monitorCurrentTime_.bind(this),250)},t.prototype.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_()){this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime();return}if(!(this.tech_.paused()||this.tech_.seeking())){var n=this.tech_.currentTime(),r=this.tech_.buffered();if(this.lastRecordedTime===n&&(!r.length||n+wn>=r.end(r.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&n===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):n===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=n)}},t.prototype.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.prototype.fixesBadSeeks_=function(){var n=this.tech_.seeking(),r=this.seekable(),i=this.tech_.currentTime(),s=void 0;if(n&&this.afterSeekableWindow_(r,i)){var a=r.end(r.length-1);s=a}if(n&&this.beforeSeekableWindow_(r,i)){var o=r.start(0);s=o+wn}return typeof s<"u"?(this.logger_("Trying to seek outside of seekable at time "+i+" with "+("seekable range "+Rf(r)+". Seeking to ")+(s+".")),this.tech_.setCurrentTime(s),!0):!1},t.prototype.waiting_=function(){if(!this.techWaiting_()){var n=this.tech_.currentTime(),r=this.tech_.buffered(),i=Ey(r,n);if(i.length&&n+3<=i.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(n),this.logger_("Stopped at "+n+" while inside a buffered region "+("["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},t.prototype.techWaiting_=function(){var n=this.seekable(),r=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(n,r)){var i=n.end(n.length-1);return this.logger_("Fell out of live window at time "+r+". Seeking to "+("live point (seekable end) "+i)),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var s=this.tech_.buffered(),a=xp(s,r);if(this.videoUnderflow_(a,s,r))return this.cancelTimer_(),this.tech_.setCurrentTime(r),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(a.length>0){var o=a.start(0)-r;return this.logger_("Stopped at "+r+", setting timer for "+o+", seeking "+("to "+a.start(0))),this.timer_=setTimeout(this.skipTheGap_.bind(this),o*1e3,r),!0}return!1},t.prototype.afterSeekableWindow_=function(n,r){return n.length?r>n.end(n.length-1)+wn:!1},t.prototype.beforeSeekableWindow_=function(n,r){return!!(n.length&&n.start(0)>0&&r<n.start(0)-wn)},t.prototype.videoUnderflow_=function(n,r,i){if(n.length===0){var s=this.gapFromVideoUnderflow_(r,i);if(s)return this.logger_("Encountered a gap in video from "+s.start+" to "+s.end+". "+("Seeking to current time "+i)),!0}return!1},t.prototype.skipTheGap_=function(n){var r=this.tech_.buffered(),i=this.tech_.currentTime(),s=xp(r,i);this.cancelTimer_(),!(s.length===0||i!==n)&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",n,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+Pi),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.prototype.gapFromVideoUnderflow_=function(n,r){for(var i=KP(n),s=0;s<i.length;s++){var a=i.start(s),o=i.end(s);if(r-a<4&&r-a>2)return{start:a,end:o}}return null},t}(),uR={errorInterval:30,getSource:function(e){var n=this.tech({IWillNotUseThisInPlugins:!0}),r=n.currentSource_;return e(r)}},lR=function t(e,n){var r=0,i=0,s=I.mergeOptions(uR,n);e.ready(function(){e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var a=function(){i&&e.currentTime(i)},o=function(d){d!=null&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",a),e.src(d),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},u=function(){if(Date.now()-r<s.errorInterval*1e3){e.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!s.getSource||typeof s.getSource!="function"){I.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return r=Date.now(),s.getSource.call(e,o)},l=function f(){e.off("loadedmetadata",a),e.off("error",u),e.off("dispose",f)},c=function(d){l(),t(e,d)};e.on("error",u),e.on("dispose",l),e.reloadSourceOnError=c},Fp=function(e){lR(this,e)},cR="1.0.0",Rt={PlaylistLoader:uo,Playlist:Bt,Decrypter:Nu.Decrypter,AsyncStream:Nu.AsyncStream,decrypt:Nu.decrypt,utils:XP,STANDARD_PLAYLIST_SELECTOR:OO,INITIAL_PLAYLIST_SELECTOR:DO,comparePlaylistBandwidth:Lf,comparePlaylistResolution:kO,xhr:by()},Bp=4194304;["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(t){Object.defineProperty(Rt,t,{get:function(){return I.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),tr[t]},set:function(n){if(I.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),typeof n!="number"||n<0){I.log.warn("value of Hls."+t+" must be greater than or equal to 0");return}tr[t]=n}})});var Ny=function(e){var n=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;if(n.test(e))return"hls";var r=/^application\/dash\+xml/i;return r.test(e)?"dash":null},My=function(e,n){for(var r=n.media(),i=-1,s=0;s<e.length;s++)if(e[s].id===r.uri){i=s;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})},fR=function(e,n){n.representations().forEach(function(r){e.addQualityLevel(r)}),My(e,n.playlists)};Rt.canPlaySource=function(){return I.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var dR=function(e,n,r){if(!e)return e;var i={};for(var s in e)i[s]={audioContentType:'audio/mp4; codecs="'+r.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+n.attributes.CODECS+'"'},n.contentProtection&&n.contentProtection[s]&&n.contentProtection[s].pssh&&(i[s].pssh=n.contentProtection[s].pssh),typeof e[s]=="string"&&(i[s].url=e[s]);return I.mergeOptions(e,i)},hR=function(e){if(e.options_.sourceType==="dash"){var n=I.players[e.tech_.options_.playerId];if(n.eme){var r=dR(e.source_.keySystems,e.playlists.media(),e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());r&&(n.currentSource().keySystems=r)}}};Rt.supportsNativeHls=function(){var t=ue.createElement("video");if(!I.getTech("Html5").isSupported())return!1;var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(n){return/maybe|probably/i.test(t.canPlayType(n))})}();Rt.supportsNativeDash=function(){return I.getTech("Html5").isSupported()?/maybe|probably/i.test(ue.createElement("video").canPlayType("application/dash+xml")):!1}();Rt.supportsTypeNatively=function(t){return t==="hls"?Rt.supportsNativeHls:t==="dash"?Rt.supportsNativeDash:!1};Rt.isSupported=function(){return I.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var pR=I.getComponent("Component"),Uy=function(t){ae(e,t);function e(n,r,i){te(this,e);var s=ne(this,t.call(this,r,i.hls));if(r.options_&&r.options_.playerId){var a=I(r.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return I.log.warn("player.hls is deprecated. Use player.tech_.hls instead."),r.trigger({type:"usage",name:"hls-player-access"}),s}}),a.vhs=s,a.dash=s}if(s.tech_=r,s.source_=n,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(ue,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(o){var u=ue.fullscreenElement||ue.webkitFullscreenElement||ue.mozFullScreenElement||ue.msFullscreenElement;u&&u.contains(s.tech_.el())&&s.masterPlaylistController_.fastQualityChange_()}),s.on(s.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}return e.prototype.setOptions_=function(){var r=this;this.options_.withCredentials=this.options_.withCredentials||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Bp),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Bp,["withCredentials","bandwidth"].forEach(function(i){typeof r.source_[i]<"u"&&(r.options_[i]=r.source_[i])}),this.bandwidth=this.options_.bandwidth},e.prototype.src=function(r,i){var s=this;r&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Rt,this.options_.sourceType=Ny(i),this.masterPlaylistController_=new nR(this.options_),this.playbackWatcher_=new oR(I.mergeOptions(this.options_,{seekable:function(){return s.seekable()}})),this.masterPlaylistController_.on("error",function(){var a=I.players[s.tech_.options_.playerId];a.error(s.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Rt.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Rt.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(o){this.masterPlaylistController_.selectPlaylist=o.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(o){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=o,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(o){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=o,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var o=1/(this.bandwidth||1),u=void 0;this.throughput>0?u=1/this.throughput:u=0;var l=Math.floor(1/(o+u));return l},set:function(){I.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Ep(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Ep(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){aR(s),hR(s)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return s.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(I.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))},e.prototype.setupQualityLevels_=function(){var r=this,i=I.players[this.tech_.options_.playerId];i&&i.qualityLevels&&(this.qualityLevels_=i.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){fR(r.qualityLevels_,r)}),this.playlists.on("mediachange",function(){My(r.qualityLevels_,r.playlists)}))},e.prototype.play=function(){this.masterPlaylistController_.play()},e.prototype.setCurrentTime=function(r){this.masterPlaylistController_.setCurrentTime(r)},e.prototype.duration=function(){return this.masterPlaylistController_.duration()},e.prototype.seekable=function(){return this.masterPlaylistController_.seekable()},e.prototype.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),t.prototype.dispose.call(this)},e}(pR),Nf={name:"videojs-http-streaming",VERSION:cR,canHandleSource:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=I.mergeOptions(I.options,n);return Nf.canPlayType(e.type,r)},handleSource:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=I.mergeOptions(I.options,r);return n.hls=new Uy(e,n,i),n.hls.xhr=by(),n.hls.src(e.src,e.type),n.hls},canPlayType:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=I.mergeOptions(I.options,n),i=r.hls.overrideNative,s=Ny(e),a=s&&(!Rt.supportsTypeNatively(s)||i);return a?"maybe":""}};(typeof I.MediaSource>"u"||typeof I.URL>"u")&&(I.MediaSource=ia,I.URL=Ry);ia.supportsNativeMediaSources()&&I.getTech("Html5").registerSourceHandler(Nf,0);I.HlsHandler=Uy;I.HlsSourceHandler=Nf;I.Hls=Rt;I.use||I.registerComponent("Hls",Rt);I.options.hls=I.options.hls||{};I.registerPlugin?I.registerPlugin("reloadSourceOnError",Fp):I.plugin("reloadSourceOnError",Fp);var mR=I;const gR=qs(mR);const vR={class:"my-0 mx-auto max-w-screen-xl h-full flex flex-col"},yR={class:"p-20 m-4 h-[85%]"},_R={class:"w-full h-full"},bR={key:0,class:"items-center flex h-full justify-center w-full"},TR=ke("span",null,[ke("svg",{class:"animate-spin ml-1 mr-3 h-8 w-8 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[ke("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),ke("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])],-1),SR=[TR],xR={key:1,class:"items-center flex justify-center w-full h-full"},ER={class:"relative lg:h-full"},wR={key:0,class:"animate-pulse bg-red-500 rounded-full absolute left-2 right-0 top-2 bottom-0 w-4 h-4"},CR={class:"flex items-center justify-center w-full h-full relative"},AR={key:0,class:"w-full h-full opacity-80 bg-black absolute left-0 right-0 top-0 bottom-0 rounded-lg flex flex-col justify-between"},IR={class:"action-button flex justify-center mt-8"},kR=ke("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24"},[ke("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1),PR=ke("span",{class:"group-hover:opacity-100 transition-opacity bg-gray-800 text-sm text-gray-100 rounded-md absolute left-1/2 -translate-x-1/2 translate-y-full opacity-0 m-4 mt-14 mx-auto w-[110px] px-2 py-0.5"}," Cancel uploading ",-1),OR=[kR,PR],RR={class:"progressbar p-2"},DR={class:"text-xs text-white w-full flex justify-end pr-2"},LR={class:"p-8 m-4 h-[15%] flex justify-center items-center"},NR={class:"w-full flex justify-center items-center"},MR=ke("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24"},[ke("path",{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z"})],-1),UR=ke("span",{class:"group-hover:opacity-100 transition-opacity bg-gray-800 text-sm text-gray-100 rounded-md absolute left-1/2 -translate-x-1/2 translate-y-full opacity-0 m-4 mt-14 mx-auto w-[110px] px-2 py-0.5"}," Start recording ",-1),FR=[MR,UR],BR=ke("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24"},[ke("path",{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9"})],-1),$R=ke("span",{class:"group-hover:opacity-100 transition-opacity bg-gray-800 text-sm text-gray-100 rounded-md absolute left-1/2 -translate-x-1/2 translate-y-full opacity-0 m-4 mt-14 mx-auto w-[110px] px-2 py-0.5"}," Stop recording ",-1),jR=[BR,$R],HR=ke("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24"},[ke("path",{d:"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z"})],-1),VR=ke("span",{class:"group-hover:opacity-100 transition-opacity bg-gray-800 text-sm text-gray-100 rounded-md absolute left-1/2 -translate-x-1/2 translate-y-full opacity-0 m-4 mt-14 mx-auto w-[110px] px-2 py-0.5"}," Upload the video ",-1),WR=[HR,VR],zR=ke("source",{src:kS,type:"audio/mpeg"},null,-1),qR=ke("source",{src:PS,type:"audio/mpeg"},null,-1),GR=Hs({__name:"videoRecorder",setup(t){const e=It(null),n=It(!1),r=It(!1),i=It(0),s=It(),a=It(),o=It(),u=It(),l=It();let c=It("NOT_STARTED"),f=It(!1),d=null,h=null,g=[],E=It(),S=It(),x=mi({name:"",url:null});const D=async()=>{d=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),s.value.srcObject=d,h=new MediaRecorder(d,{mimeType:"video/webm"}),u.value.play(),h.addEventListener("dataavailable",V=>{g.push(V.data)})},$=async()=>{h.addEventListener("stop",()=>{E.value=new Blob(g,{type:"video/webm"});let V=URL.createObjectURL(new Blob(g,{type:"video/webm"}));x.name=Date.now()+"_recorded.webm",x.url=V,a.value.src=x.url,h.stream.getTracks().forEach(J=>{J.readyState=="live"&&J.stop()}),g=[],de()})},U=V=>{de(),a.value.src=V},_e=async()=>{c.value="STARTED",i.value=0,o.value=null,f.value=!0,await D(),$(),h.start(),f.value=!1},re=async()=>{c.value="ENDED",f.value=!0,h.stop(),l.value.play(),f.value=!1},Z=()=>{n.value=!0,r.value=!1,a.value.pause();const V=Gw(Zw,"video/"+x.name);S.value=z(E.value,x.name),e.value=zw(V,S.value),e.value.on("state_change",J=>{switch(i.value=Math.round(J.bytesTransferred/J.totalBytes*100)-1,J.state){case"running":console.log("Upload is running");break}},J=>{console.log("error: ",J),n.value=!1,r.value=!0},()=>{qw(e.value.snapshot.ref).then(J=>{n.value=!1,r.value=!1,i.value=i.value+1,o.value=J,U(J),console.log("File available at",J)})})},H=()=>{e.value.cancel(),r.value=!0,n.value=!1,i.value=0},z=(V,J)=>{const Te=V;return Te.lastModifiedDate=new Date,Te.name=J,V};let ie=null;const me=mi({autoplay:!1,controls:!0,sources:[{src:"",type:"video/mp4"}]}),de=()=>{me.sources=[{src:o.value||x.url,type:"video/mp4"}],ie=gR("player-element",me,function(){console.log("Player Is: ",ie)})};return ic(()=>{ie&&ie.dispose()}),(V,J)=>(Ut(),Sr(Jt,null,[ke("div",vR,[ke("div",yR,[ke("div",_R,[ft(f)&&ft(c)!=="NOT_STARTED"?(Ut(),Sr("div",bR,SR)):gn("",!0),ft(c)==="STARTED"?(Ut(),Sr("div",xR,[ke("div",ER,[ke("video",{ref_key:"video",ref:s,class:"rounded-xl h-full",src:"",muted:"",autoplay:""},null,512),!ft(f)&&ft(c)==="STARTED"?(Ut(),Sr("span",wR)):gn("",!0)])])):gn("",!0),sb(ke("div",CR,[ke("video",{ref_key:"videoPreview",ref:a,id:"player-element",class:"rounded-xl overflow-hidden video-js vjs-theme-fantasy w-full h-full",controls:""},null,512),n.value?(Ut(),Sr("div",AR,[ke("div",IR,[ke("button",{id:"endRecording",class:"inline-flex items-center justify-center w-12 h-12 mr-2 text-white transition-colors duration-150 bg-pink-700 rounded-full focus:shadow-outline hover:bg-pink-800 group relative",onClick:J[0]||(J[0]=Te=>H())},OR)]),ke("div",RR,[wt(nC,{color:"red",percentage:i.value,rounded:!0,indeterminate:!1},{default:vm(()=>[ke("span",DR,f_(i.value)+"%",1)]),_:1},8,["percentage"])])])):gn("",!0)],512),[[yT,ft(c)==="ENDED"]])])]),ke("div",LR,[ke("div",NR,[ft(c)==="NOT_STARTED"||ft(c)==="ENDED"?(Ut(),Sr("button",{key:0,id:"startRecording",class:"inline-flex items-center justify-center w-12 h-12 mr-2 text-white transition-colors duration-150 bg-pink-700 rounded-full focus:shadow-outline hover:bg-pink-800 group relative",onClick:J[1]||(J[1]=Te=>_e())},FR)):gn("",!0),ft(c)==="STARTED"?(Ut(),Sr("button",{key:1,id:"endRecording",class:"inline-flex items-center justify-center w-12 h-12 mr-2 text-white transition-colors duration-150 bg-pink-700 rounded-full focus:shadow-outline hover:bg-pink-800 group relative",onClick:J[2]||(J[2]=Te=>re())},jR)):gn("",!0),ft(c)==="ENDED"?(Ut(),Sr("button",{key:2,id:"endRecording",class:"inline-flex items-center justify-center w-12 h-12 mr-2 text-white transition-colors duration-150 bg-pink-700 rounded-full focus:shadow-outline hover:bg-pink-800 group relative",onClick:J[3]||(J[3]=Te=>Z())},WR)):gn("",!0)])])]),ke("div",null,[ke("audio",{ref_key:"recordingSoundStart",ref:u},[zR,al(" Your browser does not support the audio element. ")],512),ke("audio",{ref_key:"recordingSoundStop",ref:l},[qR,al(" Your browser does not support the audio element. ")],512)])],64))}}),XR=Hs({__name:"Home",setup(t){return(e,n)=>(Ut(),xo(GR))}}),KR=AS({history:VT("/"),routes:[{path:"/",name:"home",component:XR}]}),Fy=TT(wT);Fy.use(KR);Fy.mount("#app");
